(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c7c9b98"],{"07c8":function(e,t,a){"use strict";a("eb22")},"95a4":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAJCAYAAAAGuM1UAAAAAXNSR0IArs4c6QAAALJJREFUKFOV0LEqxwEUxfHPKYMsIpQX8AQ2mxewyGAzGMQbmC2K1aA8h0ky2s0KT8CgUEc/+eufxd+dbrf7PfecG/+otvOZdL/tGo4nAtou4RIffwJtF3CDF2ym7RRWcJ/kddxi21Wc4R27Se4GYBlXOE1yPgLaLn7bGEYbSZ6GZgCmcTIo4AAXmMM1nrGV5HEk9JWh7SwOsYfhyjresDPYGLf5E7rtDPZxhFtsJ3n4/fZPJ3I6vOCFrsYAAAAASUVORK5CYII="},db5c:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{ref:"form",attrs:{model:e.form,"label-position":"right","label-width":"100px"}},[i("el-alert",{directives:[{name:"show",rawName:"v-show",value:!0===e.scanNewUpload,expression:"scanNewUpload === true"}],staticStyle:{"margin-bottom":"10px"},attrs:{title:"企业logo已上传，点击页面底部保存按钮即可保存！",type:"warning"}}),i("el-card",[i("company-title",[e._v("企业资料")]),i("div",{staticClass:"enterpriseData"},[e._v("基本信息")]),i("el-form-item",{attrs:{label:"企业名称",prop:"basic.companyname",rules:[{required:!0,message:"请输入公司名称",trigger:"blur"},{max:60,message:"长度在 1 到 60 个字符",trigger:"blur"}]}},[i("el-input",{staticClass:"el-select_width",attrs:{disabled:e.companynameDisabled,placeholder:"请填写"},model:{value:e.form.basic.companyname,callback:function(t){e.$set(e.form.basic,"companyname",t)},expression:"form.basic.companyname"}},[e._v(" >")])],1),1==e.field_rule.basic.short_name.is_display?i("el-form-item",{attrs:{rules:[{required:1==e.field_rule.basic.short_name.is_require,message:"请输入"+e.field_rule.basic.short_name.field_cn,trigger:"blur"},{max:60,message:"长度在 1 到 60 个字符",trigger:"blur"}],label:e.field_rule.basic.short_name.field_cn,prop:"basic.short_name"}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请填写"},model:{value:e.form.basic.short_name,callback:function(t){e.$set(e.form.basic,"short_name",t)},expression:"form.basic.short_name"}},[e._v(" >")])],1):e._e(),i("el-form-item",{attrs:{label:"企业性质",prop:"basic.nature",rules:[{required:!0,message:"请选择公司性质",trigger:"change"}]}},[i("el-select",{staticClass:"el-select_width",model:{value:e.form.basic.nature,callback:function(t){e.$set(e.form.basic,"nature",t)},expression:"form.basic.nature"}},e._l(e.columnsNature,(function(e){return i("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"企业规模",prop:"basic.scale",rules:[{required:!0,message:"请选择公司规模",trigger:"change"}]}},[i("el-select",{staticClass:"el-select_width",model:{value:e.form.basic.scale,callback:function(t){e.$set(e.form.basic,"scale",t)},expression:"form.basic.scale"}},e._l(e.columnsScale,(function(e){return i("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"所属行业",prop:"basic.trade",rules:[{required:!0,message:"请选择所属行业",trigger:"change"}]}},[i("el-select",{staticClass:"el-select_width",model:{value:e.form.basic.trade,callback:function(t){e.$set(e.form.basic,"trade",t)},expression:"form.basic.trade"}},e._l(e.columnsTrade,(function(e){return i("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})),1)],1),1===e.field_rule.basic.registered.is_display?i("el-form-item",{attrs:{rules:[{required:1===e.field_rule.basic.registered.is_require,message:"请输入注册资金",trigger:"blur"},{max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}],label:e.field_rule.basic.registered.field_cn,prop:"basic.registered"}},[i("el-input",{staticClass:"input-with-select el-select_width",attrs:{placeholder:"请输入"+e.field_rule.basic.registered.field_cn},model:{value:e.form.basic.registered,callback:function(t){e.$set(e.form.basic,"registered",t)},expression:"form.basic.registered"}},[i("el-select",{staticStyle:{width:"120px"},attrs:{slot:"append",placeholder:"请选择"},slot:"append",model:{value:e.form.basic.currency,callback:function(t){e.$set(e.form.basic,"currency",t)},expression:"form.basic.currency"}},[i("el-option",{attrs:{label:"万人民币",value:0}}),i("el-option",{attrs:{label:"万美元",value:1}})],1)],1)],1):e._e(),1===e.field_rule.info.website.is_display?i("el-form-item",{attrs:{rules:[{required:1===e.field_rule.info.website.is_require,message:"请输入"+e.field_rule.info.website.field_cn,trigger:"blur"},{max:50,message:"长度在 0 到 50 个字符",trigger:"blur"},{validator:e.validateUrl,trigger:"blur"}],label:e.field_rule.info.website.field_cn,prop:"info.website"}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"http://"},model:{value:e.form.info.website,callback:function(t){e.$set(e.form.info,"website",t)},expression:"form.info.website"}})],1):e._e(),1==e.field_rule.basic.tag.is_display?i("el-form-item",{attrs:{rules:[{required:1==e.field_rule.basic.tag.is_require,message:"请选择"+e.field_rule.basic.tag.field_cn,trigger:"change"}],label:e.field_rule.basic.tag.field_cn,prop:"basic.tag"}},[i("el-select",{staticClass:"el-select_width",attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"","multiple-limit":10,placeholder:"请选择"},model:{value:e.form.basic.tag,callback:function(t){e.$set(e.form.basic,"tag",t)},expression:"form.basic.tag"}},e._l(e.columnsTag,(function(e,t){return i("el-option",{key:t,attrs:{label:e.text,value:e.id}})})),1)],1):e._e(),i("el-form-item",{attrs:{label:"所在地区",prop:"basic.citycategory_arr",rules:[{type:"array",type:"array",required:!0,message:"请选择所在地区",trigger:"change"}]}},[e.areaDistrict.length>0?i("el-cascader",{ref:"cascaderAddr",staticClass:"el_input_widht",attrs:{options:e.areaDistrict,"show-all-levels":!0,filterable:""},on:{change:e.setLocation},model:{value:e.form.basic.citycategory_arr,callback:function(t){e.$set(e.form.basic,"citycategory_arr",t)},expression:"form.basic.citycategory_arr"}}):e._e(),1==e.config.is_open_map?i("span",{on:{click:e.handlerShowMap}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请标注详细地址",disabled:""},model:{value:e.form.info.address,callback:function(t){e.$set(e.form.info,"address",t)},expression:"form.info.address"}})],1):i("span",[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请输入详细地址"},model:{value:e.form.info.address,callback:function(t){e.$set(e.form.info,"address",t)},expression:"form.info.address"}})],1),1==e.config.is_open_map?i("div",{staticClass:"inp_bz_map",on:{click:e.handlerShowMap}},[e._v("标注")]):e._e()],1),1==e.field_rule.info.short_desc.is_display?i("el-form-item",{attrs:{rules:[{required:1==e.field_rule.info.short_desc.is_require,message:"请输入公司简介",trigger:"blur"},{max:255,message:"长度在 0 到 255 个字符",trigger:"blur"}],label:e.field_rule.info.short_desc.field_cn,prop:"info.short_desc"}},[i("el-input",{staticClass:"synopsis",attrs:{type:"textarea",placeholder:"请简短介绍一下您的企业",autosize:""},model:{value:e.form.info.short_desc,callback:function(t){e.$set(e.form.info,"short_desc",t)},expression:"form.info.short_desc"}})],1):e._e(),1===e.field_rule.info.content.is_display?i("el-form-item",{attrs:{rules:[{required:1===e.field_rule.info.content.is_require,message:"请输入"+e.field_rule.info.content.field_cn,trigger:"blur"}],label:e.field_rule.info.content.field_cn,prop:"info.content"}},[i("el-input",{staticClass:"synopsis",attrs:{type:"textarea",placeholder:"请介绍一下您的企业",autosize:{minRows:3}},model:{value:e.form.info.content,callback:function(t){e.$set(e.form.info,"content",t)},expression:"form.info.content"}})],1):e._e(),i("div",{staticClass:"avatar-uploader-box"},[i("div",{staticClass:"send_company_logo",on:{click:function(t){e.logoDialogVisible=!0}}},[e._v("生成LOGO")]),i("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{"http-request":e.handlerUpload,action:"#","show-file-list":!1}},[i("div",{staticClass:"upload_icon_con"},[e.form.basic.logo?i("img",{staticClass:"avatar",attrs:{src:e.logoUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),i("br"),e.form.basic.logo?e._e():i("p",[e._v("上传logo")])]),i("div",{staticClass:"uploader_text"},[i("div",{staticClass:"Wx_upload",staticStyle:{"text-align":"right"}},[e._v(" 扫码上传 "),i("div",{staticClass:"codeImg"},[i("img",{attrs:{src:e.scanQrcode}}),i("p",[e._v(" 微信扫描二维码"),i("br"),e._v(" 快速上传手机相册图片 ")]),i("em",[e._v("◆")]),i("span",[e._v("◆")])])]),e._v(" 建议尺寸：120*120 ")])])],1)],1),i("el-card",[i("company-title",[e._v("联系方式")]),i("el-form-item",{attrs:{label:"联系人",prop:"contact.contact",rules:[{required:!0,message:"请输入联系人",trigger:"blur"},{max:6,message:"长度在 1 到 6 个汉字",trigger:"blur"}]}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请输入联系人"},model:{value:e.form.contact.contact,callback:function(t){e.$set(e.form.contact,"contact",t)},expression:"form.contact.contact"}})],1),i("el-form-item",{attrs:{label:"联系电话",prop:"contact.mobile",rules:[{required:!0,message:"请输入联系手机",trigger:"blur"},{validator:e.validateContactMobile,trigger:"blur"}]}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请输入联系电话"},on:{input:e.hanlderMobile},model:{value:e.form.contact.mobile,callback:function(t){e.$set(e.form.contact,"mobile",t)},expression:"form.contact.mobile"}}),e._v("   "),i("el-checkbox",{on:{change:e.handlerSecrecyHidden},model:{value:e.secrecyHidden,callback:function(t){e.secrecyHidden=t},expression:"secrecyHidden"}},[e._v("不对外显示仅接收通知")])],1),1==e.field_rule.contact.weixin.is_display?i("el-form-item",{attrs:{rules:[{required:1==e.field_rule.contact.weixin.is_require,message:"请输入"+e.field_rule.contact.weixin.field_cn,trigger:"blur"}],label:e.field_rule.contact.weixin.field_cn,prop:"contact.weixin"}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请输入"+e.field_rule.contact.weixin.field_cn},on:{input:e.hanlderWeixin},model:{value:e.form.contact.weixin,callback:function(t){e.$set(e.form.contact,"weixin",t)},expression:"form.contact.weixin"}},[e._v(" >")]),e._v("   "),i("el-checkbox",{on:{change:e.handlerSync},model:{value:e.weixin_sync_mobile,callback:function(t){e.weixin_sync_mobile=t},expression:"weixin_sync_mobile"}},[e._v("同手机号")])],1):e._e(),1==e.field_rule.contact.telephone.is_display?i("el-form-item",{attrs:{rules:[{required:1==e.field_rule.contact.telephone.is_require,message:"请输入"+e.field_rule.contact.telephone.field_cn,trigger:"blur"}],label:e.field_rule.contact.telephone.field_cn,prop:"contact.telephone"}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请输入"+e.field_rule.contact.telephone.field_cn+"(格式:区号+电话号)"},model:{value:e.form.contact.telephone,callback:function(t){e.$set(e.form.contact,"telephone",t)},expression:"form.contact.telephone"}},[e._v(" >")])],1):e._e(),1===e.field_rule.contact.email.is_display?i("el-form-item",{attrs:{rules:[{required:1===e.field_rule.contact.email.is_require,message:"请输入"+e.field_rule.contact.email.field_cn,trigger:"blur"},{validator:e.validateContactEmail,trigger:"blur"}],label:e.field_rule.contact.email.field_cn,prop:"contact.email"}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请输入"+e.field_rule.contact.email.field_cn},model:{value:e.form.contact.email,callback:function(t){e.$set(e.form.contact,"email",t)},expression:"form.contact.email"}},[e._v(">")])],1):e._e(),1==e.field_rule.contact.qq.is_display?i("el-form-item",{attrs:{rules:[{required:1==e.field_rule.contact.qq.is_require,message:"请输入"+e.field_rule.contact.qq.field_cn,trigger:"blur"}],label:e.field_rule.contact.qq.field_cn,prop:"contact.qq"}},[i("el-input",{staticClass:"el-select_width",attrs:{placeholder:"请输入"+e.field_rule.contact.qq.field_cn},model:{value:e.form.contact.qq,callback:function(t){e.$set(e.form.contact,"qq",t)},expression:"form.contact.qq"}},[e._v(">")])],1):e._e(),i("el-form-item",{attrs:{label:""}},[i("el-button",{staticClass:"preservation_btn",attrs:{type:"primary",loading:e.isSubmit},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")])],1)],1)],1),i("div",{staticClass:"dateRange"},[i("el-dialog",{attrs:{title:"标注详情地址",visible:e.showMap,width:"800px",height:"500px"},on:{"update:visible":function(t){e.showMap=t},opened:e.handlerMapOpened,closed:e.handlerMapClose}},[i("Mapset",{ref:"mapset",attrs:{title:"地图标注",location:e.location,mapLat:e.form.basic.map_lat,mapLng:e.form.basic.map_lng,mapZoom:e.form.basic.map_zoom,address:e.form.info.address}}),i("div",{staticClass:"preserveBtn"},[i("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handlerMapClose(!0)}}},[e._v("保 存")]),i("el-button",{on:{click:e.handlerMapClose}},[e._v("取 消")])],1)])],1)],1),i("el-dialog",{attrs:{title:"智能生成LOGO",visible:e.logoDialogVisible,width:"455px","append-to-body":""},on:{"update:visible":function(t){e.logoDialogVisible=t},close:e.closeDialog}},[i("div",{staticClass:"send_logo_box"},[i("div",{staticClass:"logo_img",attrs:{id:"img"}},[1===e.string_type?i("div",{staticClass:"backgroudcolor",style:{background:e.backgroudcolor}},[""==e.logo_name?i("span",[e._v(" LOGO ")]):i("span",[e._v(" "+e._s(e.logo_name)+" ")])]):i("div",{staticClass:"backgroudcolor2",style:{background:e.backgroudcolor}},[i("div",{staticClass:"logo_name_box"},[i("span",{staticClass:"logo_name"},[e._v(" "+e._s(e.logo_name)+" ")])])])]),i("div",[i("div",{staticClass:"custom"},[i("div",{staticClass:"top"},[i("span",{staticClass:"asterisk"},[e._v("*")]),i("span",{staticClass:"custom_texts"},[e._v("自定义LOGO文字：")])]),i("div",{staticClass:"input"},[i("el-input",{staticClass:"custom_text",staticStyle:{width:"291px"},attrs:{placeholder:"请输入LOGO文字（2-4个汉字）",maxlength:"4",minlength:"2"},model:{value:e.logo_name,callback:function(t){e.logo_name=t},expression:"logo_name"}})],1),i("div",{staticClass:"custom_color_box"},[i("div",[i("span",{staticClass:"asterisk"},[e._v("*")]),i("span",{staticClass:"custom_color"},[e._v("自定义LOGO颜色：")])]),i("div",{staticClass:"color_box2"},e._l(e.color_arr,(function(t,s){return i("div",{key:s},[i("div",{staticClass:"color_box",style:{background:t},on:{click:function(a){e.backgroudcolor=t}}},[t==e.backgroudcolor?i("img",{staticClass:"color_img",attrs:{src:a("95a4"),alt:""}}):e._e()])])})),0)]),i("div",{staticClass:"button_box"},[i("el-button",{staticClass:"send_logo",attrs:{type:"primary"},on:{click:e.save_logo}},[e._v("生成")]),i("el-button",{staticClass:"cancellation",on:{click:e.closeDialog}},[e._v("取消")])],1)])])])])],1)},s=[],o=a("5530"),l=a("b85c"),r=(a("d81d"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("00b4"),a("d3b7"),a("159b"),a("d9e2"),a("1276"),a("b680"),a("168f"));function c(e){var t=/^(([^<>()\\[\]\\.,;:\s@"]+(\.[^<>()\\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function n(e){var t=/^1[3456789]\d{9}$/;return t.test(e)}var d=a("751a"),m=a("d722"),f=a("c0e9"),u=a.n(f),p=function(e,t){return e.map((function(e){var a,i=Object(l["a"])(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(s.value==e)return t=s.children,s}}catch(o){i.e(o)}finally{i.f()}return null}))},_={components:{Mapset:r["a"]},data:function(){return{string_type:1,color_arr:["#3E6EF9","#FF8432","#6647FF","#8FAC0C","#3B83C0","#2CE7F3","#FF5656","#21C78E","#FECD25","#F02D94","#8EBBFB","#FEA68F","#BCB4E3","#DFE2AD","#98BAD8","#AFE8EC","#FFE2E2","#90E7D2","#FEF3C6","#F8B4E7"],logoDialogVisible:!1,logo_name:"",backgroudcolor:"#3E6EF9",location:"",companynameDisabled:!1,scanNewUpload:!1,showMap:!1,areaDistrictKey:0,logoUrl:"",weixin_sync_mobile:!1,field_rule:{basic:{logo:{},short_name:{},registered:{},tag:{}},contact:{weixin:{},telephone:{},qq:{},email:{}},info:{website:{},short_desc:{},content:{}}},form:{basic:{logo:0,companyname:"",short_name:"",registered:0,currency:0,nature:"",trade:"",scale:"",citycategory_arr:[],district1:0,district2:0,district3:0,map_lat:0,map_lng:0,map_zoom:0,tag:[]},info:{content:"",short_desc:"",website:"",address:""},contact:{contact:"",mobile:"",weixin:"",telephone:"",email:"",qq:"",is_secrecy:1}},dialogVisible:!1,timer:"",scanQrcode:"",secrecyHidden:!1,isSubmit:!1}},created:function(){clearInterval(this.timer),this.$store.dispatch("getClassify","companyNature"),this.$store.dispatch("getClassify","trade"),this.$store.dispatch("getClassify","companyScale"),this.$store.dispatch("getClassify","citycategory"),this.$store.dispatch("getClassify","jobTag"),this.fetchData();var e=this.$store.state.config.mobile_domain+"scan_upload?type=company_logo&access="+this.$store.state.userToken;e=encodeURIComponent(e),this.scanQrcode=window.global.RequestBaseUrl+m["a"].get_qrcode+"?type=normal&url="+e},mounted:function(){this.timer=setInterval(this.scanUploadResult,5e3)},beforeDestroy:function(){clearInterval(this.timer)},computed:{columnsNature:function(){return this.$store.state.classifyCompanyNature},columnsTrade:function(){return this.$store.state.classifyTrade},columnsScale:function(){return this.$store.state.classifyCompanyScale},areaDistrict:function(){return this.$store.state.classifyCityCategory},columnsTag:function(){return this.$store.state.classifyJobTag},config:function(){return this.$store.state.config}},watch:{logo_name:{handler:function(e,t){var a=new RegExp("[一-龥]+");console.log(t);var i=e;a.test(i)&&4===e.toString().length?this.string_type=2:this.string_type=1}}},methods:{closeDialog:function(){this.logoDialogVisible=!1,this.logo_name=""},save_logo:function(){var e=this;this.form.basic.logo>0?this.$confirm("检测到已存在企业Logo,继续保存将替换原有Logo,是否确认替换？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.onsubmitLogo().catch((function(){e.logoDialogVisible=!1}))})).catch():this.onsubmitLogo()},onsubmitLogo:function(){var e=this;u()(document.querySelector("#img"),{width:80,height:80,allowTaint:!1,useCORS:!0}).then((function(t){d["a"].post(m["a"].sendCompanyLogo,{imgBase64:t.toDataURL()}).then((function(t){e.scanNewUpload=!0,e.logoUrl=t.data.file_url,e.form.basic.logo=t.data.file_id,e.logoDialogVisible=!1,e.backgroudcolor="#3E6EF9",e.$message({type:"success",message:t.message})})).catch((function(){}))}))},setLocation:function(e){var t=this;t.location="";var a=p(e,t.areaDistrict);a.forEach((function(e){t.location+=e.label}))},scanUploadResult:function(){var e=this;d["a"].post(m["a"].scan_upload_result,{type:"company_logo"}).then((function(t){0!=t.data&&(e.scanNewUpload=!0,e.logoUrl=t.data.file_url,e.form.basic.logo=t.data.file_id)})).catch((function(){}))},validateContactMobile:function(e,t,a){n(t)?a():a(new Error("请输入正确的手机号"))},validateContactEmail:function(e,t,a){""!==t&&void 0!==t||a(),c(t)?a():a(new Error("请输入正确的邮箱"))},validateUrl:function(e,t,a){""!==t&&void 0!==t||a(),/^http[s]?:\/\/.*/.test(t)?a():a(new Error("请输入正确的网址 https://www.xxx.com"))},onSubmit:function(e){var t=this;this.isSubmit=!0,this.$refs[e].validate((function(e){if(e){if(1===t.field_rule.basic.logo.is_display&&1===t.field_rule.basic.logo.is_require&&0===t.form.basic.logo)return t.$message.error("请上传"+t.field_rule.basic.logo.field_cn),t.isSubmit=!1,!1;d["a"].post(m["a"].company_profile,{basic:t.form.basic,info:t.form.info,contact:t.form.contact}).then((function(e){t.$message({type:"success",message:e.message}),t.isSubmit=!1})).catch((function(){t.isSubmit=!1}))}else t.isSubmit=!1,t.$nextTick((function(){var e=document.getElementsByClassName("is-error");return e[0].scrollIntoView({block:"center",behavior:"smooth"}),!1}))}))},hanlderMobile:function(e){!0===this.weixin_sync_mobile&&(this.form.contact.weixin=e)},hanlderWeixin:function(){this.weixin_sync_mobile=this.form.contact.weixin===this.form.contact.mobile},handlerSync:function(){!0===this.weixin_sync_mobile&&(this.form.contact.weixin=this.form.contact.mobile)},handlerSecrecyHidden:function(){!0===this.secrecyHidden?this.form.contact.is_secrecy=0:this.form.contact.is_secrecy=1},fetchData:function(){var e=this;d["a"].get(m["a"].company_profile,{}).then((function(t){var a=Object(o["a"])({},t.data),i=a.basic,s=a.contact,l=a.info,r=a.field_rule;for(var c in void 0!==i.companyname&&""!=i.companyname&&(e.companynameDisabled=!0),e.form.basic={logo:i.logo,companyname:i.companyname,short_name:i.short_name,registered:i.registered,currency:i.currency,nature:i.nature?i.nature:"",trade:i.trade?i.trade:"",scale:i.scale?i.scale:"",district1:i.district1,district2:i.district2,district3:i.district3,map_lat:i.map_lat,map_lng:i.map_lng,map_zoom:i.map_zoom,tag:i.tag,citycategory_arr:[]},e.form.info={content:l.content,short_desc:l.short_desc,website:l.website,address:l.address},e.form.contact={contact:s.contact,mobile:s.mobile,weixin:s.weixin,telephone:s.telephone,email:s.email,qq:s.qq,is_secrecy:s.is_secrecy},""!==e.form.contact.mobile&&e.form.contact.mobile===e.form.contact.weixin&&(e.weixin_sync_mobile=!0),e.form.basic.tag)isNaN(e.form.basic.tag[c])||(e.form.basic.tag[c]=parseInt(e.form.basic.tag[c]));e.field_rule=r,e.logoUrl=i.logo_src,0!=i.district1&&e.form.basic.citycategory_arr.push(i.district1),0!=i.district2&&e.form.basic.citycategory_arr.push(i.district2),0!=i.district3&&e.form.basic.citycategory_arr.push(i.district3),e.location=i.district_text_full,e.secrecyHidden=1!=e.form.contact.is_secrecy})).catch((function(){}))},handlerUpload:function(e){var t=this,a=e.file,i=(a.type||"").split("/"),s=i[1],o=["png","jpg","jpeg","bmp","gif"];if(-1==o.indexOf(s))return this.$message.error("文件类型不支持"),!1;if(a.size>1024*this.$store.state.config.fileupload_size){var l=this.$store.state.config.fileupload_size/1024;return l=l.toFixed(1),this.$message.error("文件大小超出限制，最大"+l+"mb"),!1}d["a"].postFormData(m["a"].uploadFile,{file:a}).then((function(e){200===parseInt(e.code)?(t.form.basic.logo=e.data.file_id,t.logoUrl=e.data.file_url,t.$message({type:"success",message:e.message})):t.$message.error(e.message)})).catch((function(e){console.log(e)}))},handlerShowMap:function(){this.showMap=!0},handlerMapOpened:function(){this.$refs.mapset.initCB()},handlerMapClose:function(e){if(this.$refs.mapset.mapLocation.address="",!0===e){if(""==this.$store.state.baiduMapFrom.location)return this.$message("请填写详细信息");this.form.basic.map_lat=this.$refs.mapset.mapData.lat,this.form.basic.map_lng=this.$refs.mapset.mapData.lng,this.form.basic.map_zoom=this.$refs.mapset.mapData.zoom,this.form.info.address=this.$store.state.baiduMapFrom.location}this.showMap=!1}}},g=_,b=(a("07c8"),a("2877")),h=Object(b["a"])(g,i,s,!1,null,"2e84881e",null);t["default"]=h.exports},eb22:function(e,t,a){}}]);