(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23308a9c"],{"0a9c":function(t,e,s){},"63b1":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-card",[s("company-title",[t._v(" 企业风采 "),s("div",{staticClass:"wxCode"},[t._v(" 手机传图更方便，使用微信扫码上传 "),s("div",{staticClass:"codeImg"},[s("span",{staticClass:"triangle"}),s("img",{attrs:{src:t.scanQrcode}}),s("p",[t._v("微信扫描二维码"),s("br"),t._v(" 快速上传手机相册图片 ")])])])]),s("el-alert",{attrs:{title:"最多可上传6张企业风采图片",type:"warning",closable:!1,"show-icon":""}}),s("div",{staticClass:"imgList_warpper"},[t._l(t.imgList,(function(e,a){return s("div",{key:a,staticClass:"img-item"},[s("el-image",{staticStyle:{width:"148px",height:"148px"},attrs:{src:e.img_src,"preview-src-list":t.srcList}}),s("div",{staticClass:"removeIcon",on:{click:function(s){return t.handleRemove(e,s)}}}),1!==parseInt(e.audit)?s("div",{staticClass:"img-mask"},[t._v(t._s(e.audit_text?e.audit_text:"待审核"))]):t._e()],1)})),s("el-upload",{staticClass:"imgList img_up_ico",attrs:{"show-file-list":!1,action:"#","list-type":"picture-card","http-request":t.handlerUpload,"on-exceed":t.handlerMax}},[s("i",{staticClass:"el-icon-plus"}),s("p",[t._v("上传风采")])]),s("div",{staticClass:"clear"})],2)],1)},i=[],n=s("5530"),c=(s("ac1f"),s("1276"),s("b680"),s("751a")),o=s("d722"),r={data:function(){return{imgList:[],srcList:[],timer:"",scanQrcode:""}},created:function(){clearInterval(this.timer),this.fetchData();var t=this.$store.state.config.mobile_domain+"scan_upload?type=company_img&access="+this.$store.state.userToken;t=encodeURIComponent(t),this.scanQrcode=window.global.RequestBaseUrl+o["a"].get_qrcode+"?type=normal&url="+t},mounted:function(){this.timer=setInterval(this.scanUploadResult,5e3)},beforeDestroy:function(){clearInterval(this.timer)},methods:{scanUploadResult:function(){var t=this;c["a"].post(o["a"].scan_upload_result,{type:"company_img"}).then((function(e){0!=e.data&&t.fetchData()})).catch((function(){}))},fetchData:function(){var t=this;c["a"].get(o["a"].company_profile,{}).then((function(e){var s=Object(n["a"])({},e.data),a=s.img_list;t.imgList=a;for(var i=0;i<t.imgList.length;i++){var c=t.imgList[i];t.srcList[i]=c.img_src}})).catch((function(){}))},handlerUpload:function(t){var e=this,s=t.file,a=(s.type||"").split("/"),i=a[1],n=["png","jpg","jpeg","bmp","gif"];if(-1==n.indexOf(i))return this.$message.error("文件类型不支持"),!1;if(s.size>1024*this.$store.state.config.fileupload_size){var r=this.$store.state.config.fileupload_size/1024;return r=r.toFixed(1),this.$message.error("文件大小超出限制，最大"+r+"mb"),!1}c["a"].postFormData(o["a"].company_img_upload,{file:s}).then((function(t){200===parseInt(t.code)?(e.$message({type:"success",message:t.message}),e.fetchData()):e.$message.error(t.message)})).catch((function(t){console.log(t)}))},handleRemove:function(t){var e=this;this.$confirm("确定删除该风采照片吗","系统提示",{type:"warning"}).then((function(){c["a"].post(o["a"].company_img_del,{id:t.id}).then((function(t){200===parseInt(t.code)?(e.$message({type:"success",message:t.message}),e.fetchData()):e.$message.error(t.message)})).catch((function(t){console.log(t)}))})).catch((function(){}))},handlerMax:function(t,e){e.length>=6&&this.$message.error("最多可上传6张企业风采图片")}}},l=r,u=(s("de05"),s("2877")),d=Object(u["a"])(l,a,i,!1,null,"146d5c09",null);e["default"]=d.exports},de05:function(t,e,s){"use strict";s("0a9c")}}]);