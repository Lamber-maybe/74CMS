(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f3373c74"],{8639:function(t,e,i){"use strict";var a=i("6c87"),n=i("7cd8"),s=i("9f69"),o=i("e08f"),r=i("7f45"),c=i("952c"),l=i("a4fc"),d=i("1392"),u=i("eb5b"),h=i("4cee"),v=i("d50e"),m=h.UNSUPPORTED_Y,f=[].push,_=Math.min,p=4294967295,g=!v((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));a("split",(function(t,e,i){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var a=String(o(this)),s=void 0===i?p:i>>>0;if(0===s)return[];if(void 0===t)return[a];if(!n(t))return e.call(a,t,s);var r,c,l,d=[],h=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,m=new RegExp(t.source,h+"g");while(r=u.call(m,a)){if(c=m.lastIndex,c>v&&(d.push(a.slice(v,r.index)),r.length>1&&r.index<a.length&&f.apply(d,r.slice(1)),l=r[0].length,v=c,d.length>=s))break;m.lastIndex===r.index&&m.lastIndex++}return v===a.length?!l&&m.test("")||d.push(""):d.push(a.slice(v)),d.length>s?d.slice(0,s):d}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var n=o(this),s=void 0==e?void 0:e[t];return void 0!==s?s.call(e,n,i):a.call(String(n),e,i)},function(t,n){var o=i(a,this,t,n,a!==e);if(o.done)return o.value;var u=s(this),h=String(t),v=r(u,RegExp),f=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"g":"y"),b=new v(m?"^(?:"+u.source+")":u,g),w=void 0===n?p:n>>>0;if(0===w)return[];if(0===h.length)return null===d(b,h)?[h]:[];var x=0,C=0,y=[];while(C<h.length){b.lastIndex=m?0:C;var I,S=d(b,m?h.slice(C):h);if(null===S||(I=_(l(b.lastIndex+(m?C:0)),h.length))===x)C=c(h,C,f);else{if(y.push(h.slice(x,C)),y.length===w)return y;for(var T=1;T<=S.length-1;T++)if(y.push(S[T]),y.length===w)return y;C=x=I}}return y.push(h.slice(x)),y}]}),!g,m)},a5c9:function(t,e,i){"use strict";var a=i("e450"),n=i("d50e"),s=i("99f6"),o=i("0f4e"),r=i("eb35"),c=i("a4fc"),l=i("f342"),d=i("9f0d"),u=i("529c"),h=i("9bc6"),v=i("acb9"),m=h("isConcatSpreadable"),f=9007199254740991,_="Maximum allowed index exceeded",p=v>=51||!n((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),g=u("concat"),b=function(t){if(!o(t))return!1;var e=t[m];return void 0!==e?!!e:s(t)},w=!p||!g;a({target:"Array",proto:!0,forced:w},{concat:function(t){var e,i,a,n,s,o=r(this),u=d(o,0),h=0;for(e=-1,a=arguments.length;e<a;e++)if(s=-1===e?o:arguments[e],b(s)){if(n=c(s.length),h+n>f)throw TypeError(_);for(i=0;i<n;i++,h++)i in s&&l(u,h,s[i])}else{if(h>=f)throw TypeError(_);l(u,h++,s)}return u.length=h,u}})},a851:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"vi_head"},[i("div",{staticClass:"head_content"},[i("a",{attrs:{href:""}},[i("img",{staticClass:"hc_logo",attrs:{src:t.$store.state.config.logo,alt:"logo"}})]),i("div",{staticClass:"hc_logo_vi"}),i("a",{staticClass:"hc_back_home",attrs:{href:t.$store.state.config.link_url_web.index}},[t._v("返回网站")]),i("a",{staticClass:"hc_contact"},[t._v("联系电话："+t._s(t.$store.state.config.contact_tel))]),i("router-link",{staticClass:"hc_detect",attrs:{to:"/video_test/"+t.interview_id}},[t._v("设备检测")])],1)]),i("div",{staticClass:"vi_container"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isChrome,expression:"!isChrome"}],staticClass:"tip"},[t._v(" 为提高视频面试效率，建议您使用谷歌内核浏览器并提前检测您的设备是否能够正常连通 ")]),"opened"!==t.room_status?i("div",{staticClass:"vi_over_box"},[i("div",{staticClass:"over_title"},["overtime"===t.room_status?i("span",[t._v("本次面试已结束，感谢您的参与！")]):t._e(),"nostart"===t.room_status?i("span",[t._v("本次面试未开始，敬请期待！")]):t._e()]),i("div",{staticClass:"clear"}),i("div",{staticClass:"over_info_box"},[i("div",{staticClass:"box_line"},[t._v("    候选人："),i("span",{staticClass:"con"},[t._v(t._s(t.fullname))])]),i("div",{staticClass:"box_line"},[t._v(" 面试时间："),i("span",{staticClass:"con"},[t._v(t._s(t.interview_time))])]),i("div",{staticClass:"box_line"},[t._v(" 面试职位："),i("span",{staticClass:"con"},[t._v(t._s(t.jobname))])]),i("div",{staticClass:"box_line"},[t._v(" 公司名称："),i("span",{staticClass:"con"},[t._v(t._s(t.companyname))])])])]):i("div",{staticClass:"vi_media_room"},[i("div",{class:t.isMobile?"stream_box mobile":"stream_box",attrs:{title:"pc",id:"video_grid"}},[t._m(0),!0===t.waiting?i("div",{staticClass:"wait_join"},[t._v(" "+t._s(1===t.utype?"等待求职者进入…":"等待HR进入…")+" ")]):t._e()]),i("div",{staticClass:"stream_handle"},[i("div",{staticClass:"handle_box"},[i("div",{class:!0===t.disableAudio?"handle_audio disable":"handle_audio",on:{click:t.handlerAudio}}),i("div",{staticClass:"handle_call",on:{click:t.hanlderLeaveRoom}}),i("div",{staticClass:"clear"})]),i("div",{staticClass:"info_line i1"},[t._v(" 面试时长："),i("span",{attrs:{id:"J_view_time"}},[t._v(t._s(t.timeHtml))])]),i("div",{staticClass:"info_line i2"},[t._v("面试职位："+t._s(t.jobname))]),1===t.utype?i("div",[i("div",{staticClass:"info_line i3"},[t._v(" "+t._s(t.fullname)+" ("+t._s(t.ageText)+"岁,"+t._s(t.educationText)+","+t._s(t.experienceText)+") ")]),i("a",{staticClass:"to_show",attrs:{href:t.resumeUrl,target:"_blank"}},[t._v("查看简历")]),i("div",{staticClass:"to_warn",on:{click:t.toNotice}},[t._v("发送提醒")])]):i("div",[i("div",{staticClass:"info_line i3"},[t._v("薪资待遇："+t._s(t.wageText))]),i("a",{staticClass:"to_show",attrs:{href:t.jobUrl,target:"_blank"}},[t._v("查看职位")]),i("div",{staticClass:"to_warn",on:{click:t.toNotice}},[t._v("发送提醒")])])])])]),i("input",{attrs:{type:"hidden",id:"userId",value:""}}),i("input",{attrs:{type:"hidden",id:"roomId",value:""}})])},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"local_stream",attrs:{id:"local_stream"}},[i("div",{staticClass:"video-info",attrs:{id:"local_video_info"}})])}],s=(i("2621"),i("2769"),i("8639"),i("a5c9"),i("3f7e"),i("4865")),o=i.n(s),r=i("751a"),c=i("d722"),l={name:"Main",data:function(){return{isChrome:!0,userId:"",roomId:"",client:"",remoteStreamArr:[],localStream:"",config:{appid:"",sig:""},interview_id:0,audio:!0,video:!0,fullname:"",interview_time:"",jobname:"",jobUrl:"",resumeUrl:"",companyname:"",wageText:"",ageText:"",educationText:"",experienceText:"",sexText:"",room_status:"opened",utype:1,error:1,isMobile:!1,waiting:!0,disableAudio:!1,callTimer:"",intDiff:parseInt(0),timeHtml:"00:00"}},created:function(){this.isChrome=navigator.userAgent.indexOf("Chrome")>-1,this.interview_id=this.$route.params.interview_id,this.utype=this.$store.state.LoginType,this.getConfig()},mounted:function(){},methods:{getConfig:function(){var t=this;r["a"].post(c["a"].rtc_config,{interview_id:this.interview_id}).then((function(e){"opened"===e.data.room_status&&(t.roomId=e.data.roomid,t.userId=e.data.userid,t.config.appid=e.data.appid,t.config.sig=e.data.sig,t.fullname=e.data.fullname,t.interview_time=e.data.interview_time,t.jobname=e.data.jobname,t.jobUrl=e.data.joburl,t.resumeUrl=e.data.resumeurl,t.companyname=e.data.companyname,t.wageText=e.data.wage_text,t.ageText=e.data.age_text,t.educationText=e.data.education_text,t.experienceText=e.data.experience_text,t.sexText=e.data.sex_text,t.createClient()),t.room_status=e.data.room_status})).catch((function(){}))},createClient:function(){var t=this.config.appid,e=this.config.sig,i=this.userId;this.client=o.a.createClient({mode:"videoCall",sdkAppId:t,userId:i,userSig:e}),console.warn("链接成功，准备加入房间"),this.subscribeStream(this.client),this.joinRoom(this.client,this.roomId)},joinRoom:function(t,e){var i=this;t.join({roomId:e}).catch((function(t){console.error("进房失败 "+t)})).then((function(){console.warn("进房成功，准备创建本地流"),i.createStream(i.userId),i.playStream(i.client),i.handleEvents()}))},createStream:function(t){var e=this,i=o.a.createStream({userId:t,audio:this.audio,video:this.video,facingMode:"user"});i.setVideoProfile("720p"),this.localStream=i,i.initialize().catch((function(t){console.error("初始化本地流失败 "+t)})).then((function(){console.warn("初始化本地流成功，准备发布本地流"),i.play("local_stream"),e.publishStream(i,e.client)}))},publishStream:function(t,e){e.publish(t).catch((function(t){console.error("本地流发布失败 "+t)})).then((function(){console.warn("本地流发布成功")}))},subscribeStream:function(t){t.on("stream-added",(function(e){var i=e.stream;console.warn("远端流增加: "+i.getId()),t.subscribe(i)}))},playStream:function(t){var e=this;t.on("stream-subscribed",(function(t){var i=t.stream,a=i.getId();e.remoteStreamArr.push(i),console.warn("远端流订阅成功："+a),i.play("video_grid"),e.waiting=!1,e.timerJoin(e.intDiff),e.isMobile&&setTimeout((function(){document.getElementById("player_"+a).setAttribute("style","width: 375px; height: 100%; background: #50555c; border-radius: 0; margin: 0 auto;")}),100)}))},handleEvents:function(){var t=this;this.client.on("error",(function(t){console.error(t)})),this.client.on("client-banned",(function(t){console.error("客户端被禁言 "+t)})),this.client.on("peer-join",(function(e){var i=e.userId;console.warn("远端用户进房 - "+i),t.isMobile="mobile"===i.split("spl")[1]})),this.client.on("peer-leave",(function(e){var i=e.userId;console.warn(i+" 用户退出房间"),t.leaveRoom(),t.waiting=!0})),this.client.on("stream-removed",(function(e){var i=e.stream,a=i.getId();i.stop(),console.warn("stream-removed ID: ".concat(a,"  type: ").concat(i.getType())),console.warn("远端流删除 - "+a),t.remoteStreamArr=t.remoteStreamArr.filter((function(t){return t.getId()!==a})),t.waiting=!0,clearInterval(t.callTimer),t.intDiff=parseInt(0),t.timeHtml="00:00"})),this.client.on("stream-updated",(function(e){var i=e.stream;console.log("type: "+i.getType()+" stream-updated hasAudio: "+i.hasAudio()+" hasVideo: "+i.hasVideo()),console.warn("远端流更新！"),t.waiting=!1}))},leaveRoom:function(){var t=this;this.client&&this.client.leave().then((function(){t.localStream.stop(),t.localStream.close(),t.localStream=null})).catch((function(t){console.error("退房失败 "+t)}))},handlerAudio:function(){if(!this.client)return!1;!0===this.disableAudio?this.localStream.muteAudio():this.localStream.unmuteAudio(),this.disableAudio=!this.disableAudio},hanlderLeaveRoom:function(){var t=this;this.client?this.$confirm("挂断后将断开本次视频面试，再次开启请刷新当前页面或视频面试列表进入房间","系统提示",{confirmButtonText:"立即挂断",cancelButtonText:"取消",type:"warning"}).then((function(){t.leaveRoom()})).catch((function(){})):this.$notify("请先加入房间！")},timerJoin:function(t){var e=this;this.callTimer=window.setInterval((function(){var i=0,a=0;t>0&&(i=Math.floor(t/60),a=Math.floor(t)-60*i),i<=9&&(i="0"+i),a<=9&&(a="0"+a),e.timeHtml=i+":"+a,t++}),1e3)},toNotice:function(){var t=this,e=1===this.utype?"求职者":"企业",i=1===this.utype?c["a"].company_interview_video_notice:c["a"].personal_manage_interview_video_notice;this.$confirm("确定提醒"+e+"吗？","系统提示",{type:"warning"}).then((function(){r["a"].post(i,{id:t.interview_id}).then((function(){t.$message({type:"success",message:"提醒成功"})})).catch((function(){}))})).catch((function(){}))}}},d=l,u=(i("f14c"),i("5d22")),h=Object(u["a"])(d,a,n,!1,null,"57886d21",null);e["default"]=h.exports},f14c:function(t,e,i){"use strict";i("fc29")},fc29:function(t,e,i){}}]);