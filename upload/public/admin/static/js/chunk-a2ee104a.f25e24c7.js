(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2ee104a","chunk-91140928"],{"068e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDM2MCwgMjAyMC8wMi8xMy0wMTowNzoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY4NURGRDQ1M0ZEQzExRURBMEMyOTlDMDI0QzFERTIwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY4NURGRDQ2M0ZEQzExRURBMEMyOTlDMDI0QzFERTIwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Njg1REZENDMzRkRDMTFFREEwQzI5OUMwMjRDMURFMjAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Njg1REZENDQzRkRDMTFFREEwQzI5OUMwMjRDMURFMjAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6RwHVIAAABRklEQVR42mL8Hy/IQA3ABKU9gfgZEP8nET+D6gXygC4C4mf/z2//TzIA6QHpBZoBc5Ekg4EH6f6B6JFE9hrVwoh48PohA0NPMAPD++cUGHTnNANDozMDw5X9DAy3T6JIsRBtyOMrDAy9oQwM3z8xMMjpMjB8fkvAoP/AWL13loFB2QQh9uk1A0NfOAMDM1B59nwGBlN/IsJoVgYDQydQ4dsnEP6/vwwMUxIYGLgFGBjq92I1BLtBLmlAm1kZGFbUQPhb+hgYvn1kYCjfyMAgKk9CrCkbMzDkLWZgOLedgWHrBAaGAwsZGIpWMTDwiuANQuyBrWnLwOBTyMCwvgPiEiEpgnGBO9Y8c4Dhws/AoGpOYYLk4GFgcMskOWU/Z7iwk/R8AdHzAkQwQssjLyCeC8QSJBr1FIiB0cywDRZG22C5mFwAEGAAlsWN73B8zvUAAAAASUVORK5CYII="},"0e2b":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"followup_wrapper"},[i("el-row",[i("el-col",{staticClass:"write",attrs:{span:12}},[i("div",{staticClass:"info"},[i("el-form",{ref:"followUp",attrs:{"label-width":"100px",rules:e.rules,model:e.followUp}},[i("el-form-item",{staticClass:"label_title",attrs:{label:"跟进方式：",prop:"mode"}},[i("el-select",{attrs:{disabled:e.disabled_state},model:{value:e.followUp.mode,callback:function(t){e.$set(e.followUp,"mode",t)},expression:"followUp.mode"}},e._l(e.visitStatusList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"联系人："}},["allClient"==e.currentNav||"myClient"==e.currentNav||"pubilceClient"==e.currentNav||"wholeClue"==e.currentNav||"wholeMy"==e.currentNav||"wholeInternationalWaters"==e.currentNav?i("el-select",{attrs:{placeholder:"请选择",disabled:e.disabled_state},model:{value:e.followUp.contacts,callback:function(t){e.$set(e.followUp,"contacts",t)},expression:"followUp.contacts"}},e._l(e.contactsData,(function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.value},nativeOn:{click:function(i){return e.contactsClick(t)}}})})),1):i("el-input",{attrs:{value:e.followUp.link_man+" | "+e.followUp.link_mobile,placeholder:"请输入内容",disabled:!0}})],1),i("el-form-item",{attrs:{label:"下次跟进："}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.disabled_state,"picker-options":e.pickerOptions,type:"datetime",placeholder:"选择日期时间"},model:{value:e.followUp.next_time,callback:function(t){e.$set(e.followUp,"next_time",t)},expression:"followUp.next_time"}})],1),i("el-form-item",{attrs:{label:"跟进结果：",prop:"result"}},[i("el-input",{attrs:{rows:11,type:"textarea",disabled:e.disabled_state,maxlength:"250","show-word-limit":""},model:{value:e.followUp.result,callback:function(t){e.$set(e.followUp,"result",t)},expression:"followUp.result"}})],1),i("el-form-item",{attrs:{label:"添加图片："}},[i("el-upload",{ref:"uploadFile",staticClass:"upload-demo",attrs:{disabled:e.disabled_state,headers:e.headerObj,"on-remove":function(t,i){e.removeImg(t,i)},drag:"",action:e.upload_url,multiple:"","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将图片拖到此处，或"),i("em",[e._v("点击上传")])]),i("div",{staticClass:"el-upload__text"},[e._v("图片上传仅支持jpg/png格式")])])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",disabled:e.disabled_state},nativeOn:{click:function(t){return e.conserveVisitLog("followUp")}}},[e._v("保存跟进记录")])],1)],1)],1)]),i("el-col",{staticClass:"history",attrs:{span:12}},[i("div",{staticClass:"title"},[i("span",{staticClass:"text"},[e._v("历史跟进")]),i("div",{staticClass:"total"},[e._v(" 共有 "),i("span",{staticClass:"sum"},[e._v(e._s(e.total)+"条")]),e._v(" 跟进 ")])]),i("div",{staticClass:"history_list"},e._l(e.record,(function(t){return i("div",{staticClass:"history_item"},[i("div",{staticClass:"user"},[e._v(e._s(t.usernamelastTwoChars))]),i("div",{staticClass:"info"},[i("div",{staticClass:"followup"},[i("div",{staticClass:"text"},[i("span",{staticClass:"color"},[e._v(e._s(t.username))]),e._v(" "+e._s(t.mode)+" "),i("span",{staticClass:"color"},[e._v(e._s(t.name))])]),i("div",{staticClass:"text_right"},[i("span",{staticClass:"time"},[e._v(e._s(t.create_time))])])]),i("div",{staticClass:"content"},[i("pre",[e._v(e._s(t.result))]),""!=t.enclosure&&t.enclosure.length>0?i("div",e._l(t.enclosure,(function(e){return i("div",{staticClass:"img"},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{cover:"",src:e,"preview-src-list":[e]}})],1)})),0):e._e()])])])})),0),e.listParams.total>=10?i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"","current-page":e.listParams.page,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper","page-size":e.listParams.page_size,total:e.total},on:{"size-change":e.handlePageSize,"current-change":e.handleCurrentSize}})],1):e._e()])],1)],1)},l=[],s=i("5530"),n=(i("b0c0"),i("ac1f"),i("1276"),i("00b4"),i("fb6a"),i("a15b"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("39f6")),o=i("5f87"),c={name:"FollowUpRecord",props:["uid","clue_id","contacts","mobile"],data:function(){return{loading:!1,disabled_state:!1,listParams:{page:1,page_size:10,total:0},pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},contactsData:[],rules:{mode:[{required:!0,message:"请选择跟进方式",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"}],result:[{required:!0,message:"请输入跟进结果",trigger:"blur"}]},followUp:{utype:0,type:"",contacts:"",link_man:"",link_mobile:"",mode:"",next_time:"",result:"",enclosure:[]},visitStatusList:[{label:"当面拜访",value:"1"},{label:"电话拜访",value:"2"},{label:"网络拜访",value:"3"},{label:"其它拜访",value:"0"}],addParams:{id:"",result:""},addListId:"",record:[],total:0,upload_url:"",headerObj:"",currentNav:"",clue_ids:0,user_id:0}},watch:{contacts:function(e){this.followUp.link_man=e},mobile:function(e){this.followUp.link_mobile=e},uid:function(e){"allClient"==this.currentNav&&"myClient"==this.currentNav&&"pubilceClient"==this.currentNav||(this.contactList(e),this.followUpList(e)),this.user_id=e},clue_id:function(e){this.clue_ids=e,"wholeClue"!=this.currentNav&&"wholeMy"!=this.currentNav&&"wholeInternationalWaters"!=this.currentNav||(this.followUpList(),this.clueContactList())}},created:function(){this.currentNav=this.$route.name,"wholeClue"!=this.currentNav&&"wholeInternationalWaters"!=this.currentNav&&"allClient"!=this.currentNav&&"pubilceClient"!=this.currentNav||(this.disabled_state=!0),"wholeClue"==this.currentNav||"wholeMy"==this.currentNav||"wholeInternationalWaters"==this.currentNav?this.followUp.type=1:(this.followUp.type=2,this.followUp.utype=1),this.upload_url=window.global.RequestBaseUrl+"/upload/index",this.headerObj={admintoken:Object(o["e"])()}},mounted:function(){"wholeClue"!=this.currentNav&&"wholeMy"!=this.currentNav&&"wholeInternationalWaters"!=this.currentNav||this.clue_id&&(this.followUpList(),this.clueContactList()),"allClient"==this.currentNav&&"myClient"==this.currentNav&&"pubilceClient"==this.currentNav||this.uid&&(this.contactList(this.uid),this.followUpList(this.uid),void 0!==this.user_id&&0!==this.user_id||(this.user_id=this.uid))},methods:{handlePageSize:function(e){this.listParams.page_size=e,this.followUpList()},handleCurrentSize:function(e){this.listParams.page=e,this.followUpList()},contactsClick:function(e){var t=e.name.split(" | ");this.followUp.link_man=t[0],this.followUp.link_mobile=t[1]},contactList:function(e){var t=this;Object(n["B"])({uid:e}).then((function(e){if(e.data.length>0)for(var i="",a=0;a<=e.data.length-1;a++)"company"==e.data[a].type&&(t.followUp.contacts=e.data[a].auto_id,t.followUp.link_man=e.data[a].contact,t.followUp.link_mobile=e.data[a].mobile,""==e.data[a].mobile&&(t.followUp.link_mobile=e.data[a].telephone)),i=e.data[a].contact+" | "+e.data[a].mobile,""==e.data[a].mobile&&(i=e.data[a].contact+" | "+e.data[a].telephone),t.contactsData.push({name:i,value:e.data[a].auto_id})})).catch((function(){}))},clueContactList:function(){var e=this;this.contactsData=[],Object(n["h"])({clue_id:this.clue_id}).then((function(t){if(t.data.length>0){for(var i="",a=0;a<=t.data.length-1;a++)i=t.data[a].contact+" | "+t.data[a].mobile,""==t.data[a].mobile&&(i=t.data[a].contact+" | "+t.data[a].telephone),e.contactsData.push({name:i,value:t.data[a].contact_id});e.followUp.contacts=t.data[0].contact_id,e.followUp.link_man=t.data[0].contact,e.followUp.link_mobile=t.data[0].mobile,""==t.data[0].mobile&&(e.followUp.link_mobile=t.data[0].telephone)}})).catch((function(){}))},followUpList:function(e){var t=this,i="";i="allClient"==this.currentNav||"myClient"==this.currentNav||"pubilceClient"==this.currentNav?0!=this.clue_id?{clue_id:this.clue_ids,uid:e,page:this.listParams.page,pagesize:this.listParams.page_size}:{uid:e,page:this.listParams.page,pagesize:this.listParams.page_size}:{clue_id:this.clue_id,page:this.listParams.page,pagesize:this.listParams.page_size},this.loading=!0,Object(n["O"])(i).then((function(e){if(e.data.items.length>0){t.record=e.data.items;for(var i=0;i<=t.record.length-1;i++){t.record[i].enclosure=t.record[i].enclosure.split(",");var a=t.record[i].username,l=void 0;l=/^[\u4e00-\u9fa5]+$/.test(a)?a.slice(-2):a.length>=5?a.slice(-5):a,t.record[i].usernamelastTwoChars=l}t.total=e.data.pages.record_num,t.listParams.total=e.data.pages.record_num,t.listParams.page=e.data.pages.now_page}t.loading=!1})).catch((function(){t.loading=!1}))},conserveVisitLog:function(e){var t=this;if(!0===this.submitLoading)return!1;this.submitLoading=!0;var i=Object(s["a"])({},this.followUp);this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;"allClient"==t.currentNav||"myClient"==t.currentNav||"pubilceClient"==t.currentNav?(i.clue_id=t.clue_ids,i.uid=t.user_id):i.clue_id=t.clue_id,""!=i.enclosure?i.enclosure=i.enclosure.join(","):i.enclosure="",i.next_time=new Date(i.next_time).getTime()/1e3,Object(n["c"])(i).then((function(e){200==e.code?(t.$message.success(e.message),"allClient"==t.currentNav||"myClient"==t.currentNav||"pubilceClient"==t.currentNav?(t.followUpList(t.user_id),t.$emit("companyDetails")):(t.followUpList(),t.$emit("clueDetails"))):t.$message.error(e.message),t.followUp.mode="",t.followUp.next_time="",t.followUp.result="",t.followUp.enclosure=[],t.$refs.uploadFile.clearFiles(),t.submitLoading=!1})).catch((function(){t.submitLoading=!1}))}))},handleAvatarSuccess:function(e,t){URL.createObjectURL(t.raw),e.data&&this.followUp.enclosure.push(e.data.file_url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,i="image/png"===e.type,a=e.size/1024/1024<2;return this.followUp.enclosure.length>=6?(this.$message.error("图片最多可以上传6张"),!1):(t||i||this.$message.error("上传图片只能是 JPG / PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a||i)},removeImg:function(e,t){for(var i=this.followUp.enclosure,a=0;a<=i.length-1;a++)i[a]==e.response.data.file_url&&this.$delete(i,a);this.followUp.enclosure=i}}},r=c,d=(i("6823"),i("2877")),u=Object(d["a"])(r,a,l,!1,null,"1e57bb48",null);t["a"]=u.exports},"21ed":function(e,t,i){},"2de5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAMCAYAAAC9QufkAAAAvklEQVQokYWRMQoCMRBFX8TSwgvsFazsdHuvoIV29tp4AxGEbcVym20FO7FcEW0srF3FO9hHAgnENTv7IJBh8mfC/0prjWE0mTeADdAHTsAqS5MXAmo4nrnuFph6Tz9AB6gcYLblgHbC9XJB3Ouaawt42l7o5M3ytN3+yKN4S791KCOObREB9/Pl1rb1ARiIameYNS2yw65ZmhS1q31xmboEfLdDiAn4boeOlMC/2yEqEvhxO4SYgGiYoTIB4Atfl1UFq1kTBwAAAABJRU5ErkJggg=="},"36e4":function(e,t,i){},"39a0":function(e,t,i){"use strict";i.r(t),i.d(t,"export_table_to_excel",(function(){return c})),i.d(t,"export_json_to_excel",(function(){return r}));i("d3b7"),i("c19f"),i("ace4"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7");function a(e){for(var t=[],i=e.querySelectorAll("tr"),a=[],l=0;l<i.length;++l){for(var s=[],n=i[l],o=n.querySelectorAll("td"),c=0;c<o.length;++c){var r=o[c],d=r.getAttribute("colspan"),u=r.getAttribute("rowspan"),m=r.innerText;if(""!==m&&m==+m&&(m=+m),a.forEach((function(e){if(l>=e.s.r&&l<=e.e.r&&s.length>=e.s.c&&s.length<=e.e.c)for(var t=0;t<=e.e.c-e.s.c;++t)s.push(null)})),(u||d)&&(u=u||1,d=d||1,a.push({s:{r:l,c:s.length},e:{r:l+u-1,c:s.length+d-1}})),s.push(""!==m?m:null),d)for(var f=0;f<d-1;++f)s.push(null)}t.push(s)}return[t,a]}function l(e,t){t&&(e+=1462);var i=Date.parse(e);return(i-new Date(Date.UTC(1899,11,30)))/864e5}function s(e,t){for(var i={},a={s:{c:1e7,r:1e7},e:{c:0,r:0}},s=0;s!=e.length;++s)for(var n=0;n!=e[s].length;++n){a.s.r>s&&(a.s.r=s),a.s.c>n&&(a.s.c=n),a.e.r<s&&(a.e.r=s),a.e.c<n&&(a.e.c=n);var o={v:e[s][n]};if(null!=o.v){var c=XLSX.utils.encode_cell({c:n,r:s});"number"===typeof o.v?o.t="n":"boolean"===typeof o.v?o.t="b":o.v instanceof Date?(o.t="n",o.z=XLSX.SSF._table[14],o.v=l(o.v)):o.t="s",i[c]=o}}return a.s.c<1e7&&(i["!ref"]=XLSX.utils.encode_range(a)),i}function n(){if(!(this instanceof n))return new n;this.SheetNames=[],this.Sheets={}}function o(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),a=0;a!=e.length;++a)i[a]=255&e.charCodeAt(a);return t}function c(e){var t=document.getElementById(e);console.log("a");var i=a(t),l=i[1],c=i[0],r="SheetJS";console.log(c);var d=new n,u=s(c);u["!merges"]=l,d.SheetNames.push(r),d.Sheets[r]=u;var m=XLSX.write(d,{bookType:"xlsx",bookSST:!1,type:"binary"});saveAs(new Blob([o(m)],{type:"application/octet-stream"}),"test.xlsx")}function r(e,t,i){var a=t;a.unshift(e);var l="SheetJS",c=new n,r=s(a);c.SheetNames.push(l),c.Sheets[l]=r;var d=XLSX.write(c,{bookType:"xlsx",bookSST:!1,type:"binary"}),u=i||"列表";saveAs(new Blob([o(d)],{type:"application/octet-stream"}),u+".xlsx")}i("0fd4"),i("df1a"),i("1447")},"49ac":function(e,t,i){"use strict";i("c923")},"4aae":function(e,t,i){},"4e94":function(e,t,i){e.exports=i.p+"static/img/renew.4d34b632.png"},"5ab5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAMCAYAAAC9QufkAAAAcElEQVQokWP4//8/DDP9//9/5v///69CaUUkOawYWRCkARl8JmQAiDj8nzxwmImBfMCI7AzZ////v0dyww5CfmYEux0BZBkYGGwZGBhOMjAw3CXoJgKm440BQprxxsDgCG1sGG8MoIc2NoA9BhgYGACzIKLIwi8QQAAAAABJRU5ErkJggg=="},6823:function(e,t,i){"use strict";i("9b7d")},"7db0":function(e,t,i){"use strict";var a=i("23e7"),l=i("b727").find,s=i("44d2"),n=i("ae40"),o="find",c=!0,r=n(o);o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!r},{find:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),s(o)},"9b7d":function(e,t,i){},"9be7":function(e,t,i){"use strict";i("4aae")},"9ff4":function(e,t,i){"use strict";i("36e4")},b6a7:function(e,t,i){"use strict";i.d(t,"e",(function(){return s})),i.d(t,"l",(function(){return n})),i.d(t,"f",(function(){return o})),i.d(t,"g",(function(){return c})),i.d(t,"i",(function(){return r})),i.d(t,"d",(function(){return d})),i.d(t,"h",(function(){return u})),i.d(t,"m",(function(){return m})),i.d(t,"a",(function(){return f})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return h})),i.d(t,"n",(function(){return _})),i.d(t,"p",(function(){return v})),i.d(t,"o",(function(){return g})),i.d(t,"j",(function(){return b})),i.d(t,"k",(function(){return w}));var a=i("b775"),l=i("d722");function s(e){return Object(a["a"])({url:l["a"].baseConfig,method:"get",params:e})}function n(e){return Object(a["a"])({url:l["a"].baseConfig,method:"post",data:e})}function o(e){return Object(a["a"])({url:l["a"].getCompanyClueList,method:"post",data:e})}function c(e){return Object(a["a"])({url:l["a"].getConsumeRecordList,method:"post",data:e})}function r(e){return Object(a["a"])({url:l["a"].importClue,method:"post",data:e})}function d(e){return Object(a["a"])({url:l["a"].getAccountBalance,method:"get",params:e})}function u(e){return Object(a["a"])({url:l["a"].getContactList,method:"get",params:e})}function m(e){return Object(a["a"])({url:l["a"].setAsMainContact,method:"post",data:e})}function f(e){return Object(a["a"])({url:l["a"].clueAddContact,method:"post",data:e})}function p(e){return Object(a["a"])({url:l["a"].clueEditContact,method:"post",data:e})}function h(e){return Object(a["a"])({url:l["a"].deleteContact,method:"post",data:e})}function _(e){return Object(a["a"])({url:l["a"].verifyRepeatClueName,method:"get",params:e})}function v(e){return Object(a["a"])({url:l["a"].verifyRepeatMobile,method:"get",params:e})}function g(e){return Object(a["a"])({url:l["a"].verifyRepeatCompany,method:"get",params:e})}function b(e){return Object(a["a"])({url:l["a"].mergeClueToCompany,method:"post",data:e})}function w(e){return Object(a["a"])({url:l["a"].queryCacheIsExists,method:"post",data:e})}},beb9:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.title))])]),a("div",{staticClass:"list-search"},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"440px"},attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.funSearchKeyword.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-select",{staticClass:"input-sel",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.key_type,callback:function(t){e.key_type=t},expression:"key_type"}},[a("el-option",{attrs:{label:"线索名称",value:"1"}}),a("el-option",{attrs:{label:"手机号码",value:"2"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.funSearchKeyword},slot:"append"})],1),a("div",{staticStyle:{float:"right","z-index":"1",position:"relative"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.goto("/user/company/crm/wholeAdd")}}},[e._v(" 新增线索 ")])],1)],1),""!=e.saleFilter||""!=e.followupFilter||""!=e.industryFilter||""!=e.regionFilter||""!=e.createdByFilter||""!=e.collectionFilter||""!=e.followCountFilter?a("div",{staticClass:"filterCriteria"},[a("div",{staticStyle:{float:"left",display:"inline-block","margin-top":"6px"}},[e._v("已选条件：")]),a("div",{staticStyle:{float:"left",display:"inline-block",width:"80%"}},[""!=e.saleFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("所属销售："+e._s(e.saleFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.saleFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.industryFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("客户行业："+e._s(e.industryFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.industryFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.regionFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("所在地区："+e._s(e.regionFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.regionFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.createdByFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("创建人："+e._s(e.createdByFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.createdByFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.collectionFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("领取时间："+e._s(e.collectionFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.collectionFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.followCountFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("跟进次数："+e._s(e.followCountFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.followCountFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.followupFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("未跟进："+e._s(e.followupFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.followupFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e()]),a("div",{staticStyle:{float:"right",display:"inline-block","margin-top":"6px",color:"#409eff","font-size":"13px"},on:{click:function(t){return e.reset("all")}}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 清空条件 ")]),a("div",{staticStyle:{clear:"both"}})]):e._e(),a("div",{staticStyle:{position:"relative","padding-top":"15px"}},[a("span",{staticClass:"checkboxName"},[e._v("ID")]),a("div",{class:""!=e.saleFilter||""!=e.followupFilter||""!=e.industryFilter||""!=e.regionFilter||""!=e.createdByFilter||""!=e.collectionFilter||""!=e.followCountFilter?"setField_s":"setField"},[a("el-popover",{attrs:{placement:"bottom-start",width:"220",trigger:"manual"},model:{value:e.visiblepop,callback:function(t){e.visiblepop=t},expression:"visiblepop"}},[a("div",{staticClass:"setField_h"},e._l(e.fieldData,(function(t){return a("div",{staticClass:"setFields"},[1==t.select?a("input",{attrs:{type:"checkbox",name:t.name,checked:""},domProps:{value:t.field},on:{change:function(i){return e.select(t.field)}}}):e._e(),0==t.select?a("input",{attrs:{type:"checkbox",name:t.name},domProps:{value:t.field},on:{change:function(i){return e.select(t.field)}}}):e._e(),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name))])])})),0),a("el-button",{class:"menu"==e.menu_icon?"field_s":"field_s_select",attrs:{slot:"reference"},on:{click:e.menu},slot:"reference"},["menu"==e.menu_icon?a("img",{attrs:{src:i("2de5"),alt:""}}):e._e(),"menu_select"==e.menu_icon?a("img",{attrs:{src:i("5ab5"),alt:""}}):e._e()]),a("div",{staticStyle:{"margin-top":"10px","margin-right":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.setFieldClose()}}},[e._v("关闭")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.setFieldConfirm()}}},[e._v("确认")])],1)],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"v-loading":e.loading,data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#f9f9f9","border-right":"1px solid #e4e6eb"},border:"",stripe:"",height:e.tabelHeight},on:{"sort-change":e.sortTable,"selection-change":e.handleSelectionChange,"cell-mouse-enter":e.cellEnter,"cell-mouse-leave":e.cellLeave,"select-all":e.cellEnter}},[a("el-table-column",{attrs:{type:"selection",width:"80",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,l=t.$index;return[e.columnCheckedId==i.id||e.checkedList[l]?a("div",{on:{click:function(e){e.stopPropagation()}}},[a("el-checkbox",{on:{change:function(t){return e.cellCheckbox(i,l)}},model:{value:e.checkedList[l],callback:function(t){e.$set(e.checkedList,l,t)},expression:"checkedList[$index]"}})],1):a("span",[e._v(e._s(i.id))])]}}])}),a("el-table-column",{attrs:{fixed:"",type:"text",width:"200",label:"线索名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[""==t.row.name?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(t.row.name)+" ")]),""!=t.row.tripartite_id?a("span",{staticClass:"mlLabel"},[e._v("名录")]):e._e()])]}}])}),e._l(e.fieldData,(function(t){return 1==t.is_locking&&1==t.select?a("el-table-column",{attrs:{fixed:"",sortable:t.is_sortable,prop:t.field,width:t.width},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{class:"custom"==t.is_sortable?"sotrTime":"",on:{mouseenter:function(i){return e.locks(t.field)},mouseleave:function(i){return e.locks(t.field)}}},["not_following_day"==t.field?a("span",[e._v(e._s(t.name)+"(天)")]):a("span",[e._v(e._s(t.name))]),a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},["admin_username"==t.field?a("div",[a("el-checkbox-group",{staticStyle:{height:"250px"}},e._l(e.saleScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.saleScreen,callback:function(t){e.saleScreen=t},expression:"saleScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"trade"==t.field?a("div",[a("el-checkbox-group",e._l(e.industryScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.industryScreen,callback:function(t){e.industryScreen=t},expression:"industryScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"district"==t.field?a("div",[a("el-cascader-panel",{attrs:{props:e.props,clearable:"",options:e.regionScreenData},model:{value:e.regionScreen,callback:function(t){e.regionScreen=t},expression:"regionScreen"}})],1):e._e(),"collection_time"==t.field?a("div",[a("el-checkbox-group",e._l(e.collectionScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.collectionScreen,callback:function(t){e.collectionScreen=t},expression:"collectionScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"follow_count"==t.field?a("div",[a("el-checkbox-group",e._l(e.followCountScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.followCountScreen,callback:function(t){e.followCountScreen=t},expression:"followCountScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"not_following_day"==t.field?a("div",{staticClass:"screen_s"},[a("el-checkbox-group",e._l(e.followupScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.followupScreen,callback:function(t){e.followupScreen=t},expression:"followupScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"creat_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.createdByScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.createdByScreen,callback:function(t){e.createdByScreen=t},expression:"createdByScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.reset(t.field)}}},[e._v("重置 ")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1),"admin_username"==t.field||"trade"==t.field||"district"==t.field||"creat_username"==t.field||"collection_time"==t.field||"follow_count"==t.field?a("div",{staticClass:"drop_down",attrs:{slot:"reference"},slot:"reference"}):e._e()]),1==t.is_lock_display?a("div",{staticClass:"unlock_display",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e(),0==t.is_lock_display?a("div",{staticClass:"unlock",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e()],1)]}},{key:"default",fn:function(i){return["admin_username"==t.field?a("div",[""==i.row.admin_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.admin_username)+" ")])]):e._e(),"contacts"==t.field?a("div",[""==i.row.contacts?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.contacts)+" ")])]):e._e(),"mobile"==t.field?a("div",[""==i.row.mobile||null==i.row.mobile?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.mobile)+" "),a("div",{staticClass:"dial",attrs:{title:"拨打联系人手机号"}},[a("div",{staticClass:"disal_img",on:{click:function(t){return e.clickDial(i.row.mobile,i.row.name)}}})])])]):e._e(),"weixin"==t.field?a("div",[""==i.row.weixin?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.weixin)+" ")])]):e._e(),"collection_time"==t.field?a("div",[""==i.row.collection_time?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.collection_time)+" ")])]):e._e(),"trade"==t.field?a("div",[""==i.row.trade?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.trade)+" ")])]):e._e(),"district"==t.field?a("div",[""==i.row.district?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.district)+" ")])]):e._e(),"address"==t.field?a("div",[""==i.row.address?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.address)+" ")])]):e._e(),"updatetime"==t.field?a("div",[""==i.row.updatetime?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.updatetime)+" ")])]):e._e(),"follow_count"==t.field?a("div",[""==i.row.follow_count?a("span",[e._v(" 0 ")]):a("span",[e._v(" "+e._s(i.row.follow_count)+" ")])]):e._e(),"creat_username"==t.field?a("div",[""==i.row.creat_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.creat_username)+" ")])]):e._e(),"remark"==t.field?a("div",[""==i.row.remark?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.remark)+" ")])]):e._e(),"last_visit_time"==t.field?a("div",[""==i.row.last_visit_time?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.last_visit_time))])]):e._e(),"not_following_day"==t.field?a("div",[-1==i.row.not_following_day?a("span",[e._v("-")]):0==i.row.not_following_day?a("span",[e._v("0")]):a("span",[e._v(e._s(i.row.not_following_day))])]):e._e()]}}],null,!0)}):e._e()})),e._l(e.fieldData,(function(t){return 0==t.is_locking&&1==t.select?a("el-table-column",{attrs:{prop:t.field,sortable:t.is_sortable,width:t.width},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{class:"custom"==t.is_sortable?"sotrTime":"",on:{mouseenter:function(i){return e.locks(t.field)},mouseleave:function(i){return e.locks(t.field)}}},["not_following_day"==t.field?a("span",[e._v(e._s(t.name)+"(天)")]):a("span",[e._v(e._s(t.name))]),a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},["admin_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.saleScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.saleScreen,callback:function(t){e.saleScreen=t},expression:"saleScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"trade"==t.field?a("div",[a("el-checkbox-group",e._l(e.industryScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.industryScreen,callback:function(t){e.industryScreen=t},expression:"industryScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"district"==t.field?a("div",[a("el-cascader-panel",{attrs:{props:e.props,clearable:"",options:e.regionScreenData},model:{value:e.regionScreen,callback:function(t){e.regionScreen=t},expression:"regionScreen"}})],1):e._e(),"creat_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.createdByScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.createdByScreen,callback:function(t){e.createdByScreen=t},expression:"createdByScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"collection_time"==t.field?a("div",[a("el-checkbox-group",e._l(e.collectionScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.collectionScreen,callback:function(t){e.collectionScreen=t},expression:"collectionScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"follow_count"==t.field?a("div",[a("el-checkbox-group",e._l(e.followCountScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.followCountScreen,callback:function(t){e.followCountScreen=t},expression:"followCountScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"not_following_day"==t.field?a("div",{staticClass:"screen_s"},[a("el-checkbox-group",e._l(e.followupScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.followupScreen,callback:function(t){e.followupScreen=t},expression:"followupScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.reset(t.field)}}},[e._v("重置 ")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1),"creat_username"==t.field||"not_following_day"==t.field||"admin_username"==t.field||"trade"==t.field||"district"==t.field||"collection_time"==t.field||"follow_count"==t.field?a("div",{staticClass:"drop_down",attrs:{slot:"reference"},slot:"reference"}):e._e()]),1==t.is_lock_display?a("div",{staticClass:"lock_display",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e(),0==t.is_lock_display?a("div",{staticClass:"lock",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e()],1)]}},{key:"default",fn:function(i){return["admin_username"==t.field?a("div",[""==i.row.admin_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.admin_username)+" ")])]):e._e(),"contacts"==t.field?a("div",[""==i.row.contacts?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.contacts)+" ")])]):e._e(),"mobile"==t.field?a("div",[""!=i.row.mobile&&null!=i.row.mobile||""!=i.row.telephone&&null!=i.row.telephone?""!=i.row.mobile?a("span",[e._v(" "+e._s(i.row.mobile)+" "),a("div",{staticClass:"dial",attrs:{title:"拨打联系人手机号"}},[a("div",{staticClass:"disal_img",on:{click:function(t){return e.clickDial(i.row.mobile,i.row.name)}}})])]):a("span",[e._v(" "+e._s(i.row.telephone)+" "),a("div",{staticClass:"dial",attrs:{title:"拨打联系人手机号"}},[a("div",{staticClass:"disal_img",on:{click:function(t){return e.clickDial(i.row.telephone,i.row.name)}}})])]):a("span",[e._v(" - ")])]):e._e(),"weixin"==t.field?a("div",[""==i.row.weixin?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.weixin)+" ")])]):e._e(),"collection_time"==t.field?a("div",[""==i.row.collection_time?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.collection_time)+" ")])]):e._e(),"trade"==t.field?a("div",[""==i.row.trade?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.trade)+" ")])]):e._e(),"district"==t.field?a("div",[""==i.row.district?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.district)+" ")])]):e._e(),"address"==t.field?a("div",[""==i.row.address?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.address)+" ")])]):e._e(),"updatetime"==t.field?a("div",[""==i.row.updatetime?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.updatetime)+" ")])]):e._e(),"follow_count"==t.field?a("div",[""==i.row.follow_count?a("span",[e._v(" 0 ")]):a("span",[e._v(" "+e._s(i.row.follow_count)+" ")])]):e._e(),"creat_username"==t.field?a("div",[""==i.row.creat_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.creat_username)+" ")])]):e._e(),"remark"==t.field?a("div",[""==i.row.remark?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.remark)+" ")])]):e._e(),"last_visit_time"==t.field?a("div",[""==i.row.last_visit_time?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.last_visit_time))])]):e._e(),"not_following_day"==t.field?a("div",[-1==i.row.not_following_day?a("span",[e._v("-")]):0==i.row.not_following_day?a("span",[e._v("0")]):a("span",[e._v(e._s(i.row.not_following_day))])]):e._e()]}}],null,!0)}):e._e()})),a("el-table-column",{attrs:{label:"操作",width:"140",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.see(t.row.id)}}},[e._v("查看")]),2==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.release(t.row.id)}}},[e._v("释放")]):e._e(),2==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.see(t.row.id)}}},[e._v("跟进 ")]):e._e(),1==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.funAuditBatch("single",t.row.id)}}},[e._v("领取")]):e._e(),1==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.wholeDel("single",t.row.id)}}},[e._v("删除")]):e._e()]}}])})],2)],1),a("div",{staticClass:"bortton-page"},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.choose}},[e._v(" 全选/反选 ")]),1==e.list_type?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.funAuditBatch("all")}}},[e._v(" 领取 ")]):e._e(),1==e.list_type?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.wholeDel("all")}}},[e._v(" 删除 ")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.funExport}},[e._v(" 导出 ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-pagination",{attrs:{background:"","destroy-on-close":"","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e.drawer?a("el-drawer",{attrs:{size:"75%","show-close":!1,"with-header":!1,"wrapper-closable":!1,visible:e.drawer,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[a("show",{attrs:{"row-id":e.rowId},on:{hideDetail:e.hideDetail}}),a("div",{staticClass:"close",on:{click:e.handleClose}},[a("i",{staticClass:"el-icon-close"})])],1):e._e(),a("div",{staticClass:"call"},[a("el-dialog",{attrs:{visible:e.callDialogVisible,width:"30%","before-close":e.callHandleClose},on:{"update:visible":function(t){e.callDialogVisible=t}}},[a("div",{staticClass:"box-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title1"},[e._v("您还尚未开通云呼叫服务")]),a("div",{staticClass:"title2"},[e._v("扫码添加客服")]),a("div",{staticClass:"title3"},[e._v("快速开通呼叫业务")])]),a("div",{staticClass:"code"},[a("img",{attrs:{src:i("4e94"),alt:""}})]),a("div",{staticStyle:{clear:"both"}}),a("div",{staticClass:"slogan"},[e._v("一键发起云呼叫，自动录音，助力提升沟通效率！")]),a("div",{staticClass:"advantage"},[a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("免硬件设备")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("录音清晰无杂音")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("外显销售手机号")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("招聘行业专用线路")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("稳定性更高")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("防封强、接通率高")])])])])])],1),a("div",{staticClass:"meet"},[a("el-dialog",{attrs:{visible:e.meetDialogVisible,width:"30%","before-close":e.meetHandleClose},on:{"update:visible":function(t){e.meetDialogVisible=t}}},[a("div",{staticClass:"box-content"},[a("div",{staticClass:"img",attrs:{id:"animation"}}),a("div",{staticClass:"hu"},[e._v("正在呼叫客户")]),a("div",{staticClass:"telephone"},[e._v(e._s(e.dialPhone))]),a("div",{staticClass:"company"},[e._v(e._s(e.dialName))]),a("div",{staticClass:"tips"},[e._v("请您留意手机来电接听")])])])],1)],1)},l=[],s=(i("ac1f"),i("1276"),i("7db0"),i("d3b7"),i("b0c0"),i("4e82"),i("e9c4"),i("d81d"),i("159b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"popup_box"},[i("div",{staticClass:"base"},[i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[i("div",{staticClass:"name"},[e._v(" "+e._s(e.details.name?e.details.name:"-")+" ")]),i("div",{staticClass:"user"},[e._v(" （"),i("span",[e._v("线索ID： "+e._s(e.details.id?e.details.id:"-")+"； ")]),i("span",{staticClass:"logoin",on:{click:e.conversion}},[e._v("转化为客户")]),e._v("） ")]),i("div",{staticClass:"users",staticStyle:{"margin-left":"30px"}},[e._v(" 转为客户将自动注册企业会员 ")])]),i("div",{staticClass:"details"},[i("el-row",{staticClass:"line"},[i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("所属销售：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.admin_username?e.details.admin_username:"-")+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("跟进记录：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.visit_count)+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("最后跟进：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.last_visit_time?e.details.last_visit_time:"-")+" ")])])],1),i("el-row",{staticClass:"line"},[i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("所在地区：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.district_text)+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("创建人：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.creat_username?e.details.creat_username:"-")+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("创建时间：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.createtime?e.details.createtime:"-")+" ")])])],1)],1)])]),i("div",{staticClass:"tab_box"},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"跟进记录",name:"first"}},["first"==e.activeName?i("followUpRecord",{attrs:{clue_id:e.rowId,contacts:e.details.contacts,mobile:e.details.mobile},on:{clueDetails:e.clueDetails}}):e._e()],1),i("el-tab-pane",{attrs:{label:"线索详情",name:"second"}},["second"==e.activeName?i("clueDetailsEdit",{attrs:{clue_id:e.rowId,"same-client-visible":e.sameClientVisible,"componey-list":e.componeyList,"com-id":e.comId,details:e.details},on:{changeSameClient:e.changeSameClient,clueDetails:e.clueDetails,conversion:e.conversion,hideDetail:e.hideDetail}}):e._e()],1),i("el-tab-pane",{attrs:{label:"联系人",name:"third"}},["third"==e.activeName?i("clueContact",{attrs:{clue_id:e.rowId,details:e.details},on:{clueDetails:e.clueDetails,conversion:e.conversion}}):e._e()],1)],1)],1)])])}),n=[],o=i("0e2b"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"box"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[i("el-form-item",{attrs:{label:"线索名称：",prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"联系人：",prop:"contacts"}},[i("el-input",{model:{value:e.form.contacts,callback:function(t){e.$set(e.form,"contacts",t)},expression:"form.contacts"}})],1),i("el-form-item",{attrs:{label:"联系手机：",prop:"mobile"}},[i("el-input",{attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),i("el-form-item",{attrs:{label:"座机：",prop:"telephone"}},[i("el-input",{model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1),i("el-form-item",{attrs:{label:"联系微信："}},[i("el-input",{model:{value:e.form.weixin,callback:function(t){e.$set(e.form,"weixin",t)},expression:"form.weixin"}})],1),i("el-form-item",{attrs:{label:"公司规模："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.scale,callback:function(t){e.$set(e.form,"scale",t)},expression:"form.scale"}},e._l(e.scaleData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"所属行业："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.trade,callback:function(t){e.$set(e.form,"trade",t)},expression:"form.trade"}},e._l(e.industryScreenData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"所在地区",prop:"citycategory_arr"}},[i("el-cascader",{attrs:{options:e.options_citycategory,"show-all-levels":!1},model:{value:e.form.district,callback:function(t){e.$set(e.form,"district",t)},expression:"form.district"}})],1),i("el-form-item",{attrs:{label:"详细地址："}},[i("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),i("el-form-item",{attrs:{label:"备注："}},[i("el-input",{staticStyle:{width:"558px"},attrs:{rows:3,type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),i("el-form-item",{staticClass:"e_button"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),i("el-button",{attrs:{type:"primary"},on:{click:e.conversion}},[e._v("转化为客户")])],1)],1)],1),i("el-dialog",{attrs:{visible:e.sameClientVisibleChild,"append-to-body":"",title:e.sameClientTitle,fullscreen:!1,width:"650px"},on:{"update:visible":function(t){e.sameClientVisibleChild=t},close:e.closeSameClientVisible}},[i("div",{staticClass:"sameLists"},[i("div",{staticClass:"sameListTitle"},[e._v("您可以选择将本线索的跟进记录、联系人合并到以下客户：")]),i("div",{class:e.list.length>3?"sameItemList sameItemListScroll":"sameItemList"},e._l(e.list,(function(t,a){return i("div",{key:a,class:t.select?"sameItem sameItemActive":"sameItem",on:{click:function(i){return e.selectItem(t)}}},[1==t.type?i("div",{staticClass:"labelBox"},[e._v("已存在相同手机的客户")]):e._e(),2==t.type?i("div",{staticClass:"labelBox"},[e._v("已存在相同名称的客户")]):e._e(),i("div",{staticClass:"labelSelect"}),i("div",{class:2==t.type?"selectComName company_name":"company_name"},[e._v(e._s(t.name)+" "),i("span",{staticClass:"contentTxt"},[e._v("（ID："+e._s(t.id)+"）")])]),i("div",{staticClass:"register_time first"},[i("span",{staticClass:"time"},[e._v("注册时间："+e._s(t.addtime)+"("+e._s(t.platform)+")")]),i("span",{staticClass:"time"},[e._v("所属销售："+e._s(t.username))])]),i("div",{staticClass:"register_time"},[i("span",{staticClass:"time"},[e._v("企业手机："),i("span",{class:t.company_mobile==e.form.mobile?"selectTel":""},[e._v(e._s(t.company_mobile))])]),i("span",{staticClass:"time"},[e._v("会员手机："),i("span",{class:t.member_mobile==e.form.mobile?"selectTel":""},[e._v(e._s(t.member_mobile))]),""!=t.company_contact?i("span",[e._v("("+e._s(t.company_contact)+")")]):e._e()])])])})),0)]),i("div",{staticClass:"btnLists"},[i("el-button",{attrs:{size:"small"},on:{click:e.toConversion}},[e._v("不合并，继续转化")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.toMerge}},[e._v("合并到已选客户")])],1)])],1)},r=[],d=i("5530"),u=i("2909"),m=i("39f6"),f=(i("61f7"),i("b6a7")),p={name:"ClueDetails",props:["clue_id","details","sameClientVisible","componeyList","comId"],data:function(){var e=this,t=function(t,i,a){var l={name:i,id:e.clue_id};Object(m["S"])(l).then((function(e){0==e.data.sys_configs&&e.data.clue_count>0?a(new Error("线索名称已重复")):a()}))};return{rules:{name:[{required:!0,message:"请输入线索名称",trigger:"blur"},{max:20,message:"长度在 0 到 20 个字符",trigger:"blur"},{validator:t,trigger:"blur"}],contacts:[{required:!0,message:"请输入联系人",trigger:"blur"},{max:6,message:"长度在 1 到 6 个汉字",trigger:"blur"}]},form:{name:"",contacts:"",mobile:"",weixin:"",scale:"",industry:"",region:"",address:"",trade:"",remark:"",district:[],telephone:""},submitLoading:!1,scaleData:[],options_citycategory:[],industryScreenData:[],sameClientTitle:"检测到已存在相似的客户",list:this.componeyList,sameClientVisibleChild:this.sameClientVisible,company_id:""}},watch:{sameClientVisible:function(e){this.sameClientVisibleChild=e},componeyList:function(e){this.list=e,this.company_id=this.list[0].id},details:function(e){for(var t in e)this.form[t]=e[t]}},created:function(){this.classify(),this.company_id=this.comId},methods:{classify:function(){var e=this;Object(m["e"])({type:"citycategory,trade,companyScale"}).then((function(t){e.options_citycategory=Object(u["a"])(t.data.citycategory),e.options_citycategory=e.options_citycategory.map((function(e){if(e.children.length){var t=e.children;return t=t.map((function(e){return e.children.length?{label:e.label,value:e.value,children:e.children}:{label:e.label,value:e.value}})),{value:e.value,label:e.label,children:t}}return{value:e.value,label:e.label}})),e.industryScreenData=t.data.trade,e.scaleData=t.data.companyScale})).catch((function(){}))},getVerifyRepeatCompany:function(){var e=this;Object(f["o"])({clue_id:this.clue_id}).then((function(t){if(""==t.data)e.$router.push("/user/company/add?id="+e.details.id);else{for(var i in e.list=t.data,e.list)e.list[i].select=!1;e.list[0].select=!0,e.company_id=e.list[0].id,e.list.length>0&&(e.sameClientVisibleChild=!0)}}))},conversion:function(){this.getVerifyRepeatCompany()},toConversion:function(){this.sameClientVisibleChild=!1,this.$router.push("/user/company/add?id="+this.details.id)},toMerge:function(){var e=this;""==this.company_id?this.$message.error("请选择要合并的客户!"):Object(f["j"])({clue_id:this.clue_id,company_id:this.company_id}).then((function(t){e.$message.success(t.message),e.sameClientVisibleChild=!1,e.$emit("hideDetail")}))},onSubmit:function(e){var t=this;if(!0===this.submitLoading)return!1;if(""==this.mobile&&""==this.telephone)return this.$message.error("请填写联系手机或座机二选一"),!1;this.submitLoading=!0;var i=this,a=Object(d["a"])({},this.form);a.clue_id=this.clue_id,0==a.district.length&&(a.district1=0,a.district2=0,a.district3=0,a.district=0),1==a.district.length&&(a.district1=a.district[0],a.district=a.district[0],a.district2=0,a.district3=0),2==a.district.length&&(a.district1=a.district[0],a.district2=a.district[1],a.district3=0,a.district=a.district[1]),3==a.district.length&&(a.district1=a.district[0],a.district2=a.district[1],a.district3=a.district[2],a.district=a.district[2]),this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;Object(m["k"])(a).then((function(e){200==e.code?(t.$message.success(e.message),t.$emit("clueDetails")):t.$message.error(e.message),i.submitLoading=!1})).catch((function(){i.submitLoading=!1}))}))},selectItem:function(e){for(var t in this.list)if(this.list[t].select=!1,e.unique_id==this.list[t].unique_id){var i=this.list[t];i.select=!0,this.company_id=this.list[t].id,this.$set(this.list,t,i)}},closeSameClientVisible:function(){this.sameClientVisibleChild=!1,this.$emit("changeSameClient",!1),this.company_id=""}}},h=p,_=(i("49ac"),i("2877")),v=Object(_["a"])(h,c,r,!1,null,"13749b2e",null),g=v.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"box"},[e._l(e.list,(function(t,i){return a("div",{key:i,staticClass:"box-item"},[a("div",{staticClass:"box-item-name"},[""!=t.contact?a("span",{staticClass:"name"},[e._v(e._s(t.contact))]):a("span",{staticClass:"name"},[e._v("未知联系人")]),1==t.is_main?a("span",{staticClass:"label"},[e._v("主要")]):e._e()]),a("div",{staticClass:"box-item-tel"},[a("span",{staticClass:"box-item-telnum"},[e._v(e._s(t.mobile||"-"))]),t.mobile?a("span",{staticClass:"box-item-tel-icon",attrs:{title:"拨打联系人号码"},on:{click:function(i){return e.clickDial(t.mobile,t.contact)}}}):e._e()]),a("div",{staticClass:"box-item-contact-other"},[a("div",[e._v("座机："+e._s(t.telephone))]),a("div",[e._v("QQ："+e._s(t.qq))]),a("div",[e._v("邮箱："+e._s(t.email))])]),a("div",{staticClass:"oprations-list"},[0==t.is_main?a("span",{staticClass:"opration1",on:{click:function(i){return e.doSomeThing("main",t)}}},[e._v("设为主要")]):a("span"),a("div",{staticClass:"opration2"},[a("span",{staticClass:"edit",on:{click:function(i){return e.edit("edit",t)}}},[e._v("修改")]),0==t.is_main?a("span",{staticClass:"del",on:{click:function(i){return e.doSomeThing("delete",t)}}},[e._v("删除")]):e._e()])])])})),a("div",{staticClass:"box-item",on:{click:function(t){return e.addContact("add")}}},[e._m(0)])],2),a("el-dialog",{attrs:{visible:e.addContactVisible,"append-to-body":"",title:e.title,fullscreen:!1,width:"45%"},on:{"update:visible":function(t){e.addContactVisible=t}}},[a("el-form",{ref:"form",staticClass:"form-box",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"姓名：",prop:"contact"}},[a("el-input",{attrs:{placeholder:"请输入联系人姓名"},model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:0,value:"0"}},[e._v("男")]),a("el-radio",{attrs:{label:1,value:"1"}},[e._v("女")])],1)],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"手机号：",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入联系人手机号",oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"公司座机：",prop:"telephone"}},[a("el-input",{attrs:{placeholder:"请输入联系人座机号"},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入联系人邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"QQ：",prop:"qq"}},[a("el-input",{attrs:{placeholder:"请输入联系人QQ"},model:{value:e.form.qq,callback:function(t){e.$set(e.form,"qq",t)},expression:"form.qq"}})],1),a("el-form-item",{staticClass:"e_button"},[a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1),a("el-dialog",{staticClass:"call",attrs:{visible:e.callDialogVisible,width:"30%","append-to-body":"","before-close":e.callHandleClose},on:{"update:visible":function(t){e.callDialogVisible=t}}},[a("div",{staticClass:"box-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title1"},[e._v("您还尚未开通云呼叫服务")]),a("div",{staticClass:"title2"},[e._v("扫码添加客服")]),a("div",{staticClass:"title3"},[e._v("快速开通呼叫业务")])]),a("div",{staticClass:"code"},[a("img",{attrs:{src:i("4e94"),alt:""}})]),a("div",{staticStyle:{clear:"both"}}),a("div",{staticClass:"slogan"},[e._v("一键发起云呼叫，自动录音，助力提升沟通效率！")]),a("div",{staticClass:"advantage"},[a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("免硬件设备")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("录音清晰无杂音")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("外显销售手机号")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("招聘行业专用线路")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("稳定性更高")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("防封强、接通率高")])])])])]),a("el-dialog",{staticClass:"meet",attrs:{visible:e.meetDialogVisible,width:"30%","append-to-body":"","before-close":e.meetHandleClose},on:{"update:visible":function(t){e.meetDialogVisible=t}}},[a("div",{staticClass:"box-content"},[a("div",{staticClass:"img",attrs:{id:"animation"}}),a("div",{staticClass:"hu"},[e._v("正在呼叫客户")]),a("div",{staticClass:"telephone"},[e._v(e._s(e.dialPhone))]),a("div",{staticClass:"company"},[e._v(e._s(e.dialName))]),a("div",{staticClass:"tips"},[e._v("请您留意手机来电接听")])])])],1)},w=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-btn"},[i("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"rgb(37, 177, 73)","margin-right":"3px"}}),i("span",{staticClass:"add-text"},[e._v("添加联系人")])])}],C=i("f09a"),y={name:"ClueDetails",props:["clue_id","details"],data:function(){return{rules:{contact:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}]},form:{contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""},submitLoading:!1,scaleData:[],options_citycategory:[],industryScreenData:[],list:[],addContactVisible:!1,title:"添加联系人",oprationVal:"add",callDialogVisible:!1,meetDialogVisible:!1,dialPhone:"",dialName:""}},created:function(){this.getContactList()},methods:{getContactList:function(){var e=this;Object(f["h"])({clue_id:this.clue_id}).then((function(t){200==t.code?(e.list=t.data,e.copyList=t.data):e.$message.error(t.message)}))},addContact:function(e){this.oprationVal=e,this.form={contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""},this.addContactVisible=!0},edit:function(e,t){this.oprationVal=e,this.form=t,this.addContactVisible=!0},doSomeThing:function(e,t){var i=this,a="main"==e?"确定将此联系人设为主要联系人吗？":"确定删除该联系人吗？",l="main"==e?"已取消设为主要":"已取消删除",s={clue_id:this.clue_id,contact_id:t.contact_id};this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"main"==e?Object(f["m"])(s).then((function(e){i.$message.success(e.message),i.getContactList()})).catch((function(){})):"delete"==e&&Object(f["c"])(s).then((function(e){i.$message.success(e.message),i.getContactList()})).catch((function(){}))})).catch((function(){i.$message({type:"info",message:l})}))},conversion:function(){this.$emit("conversion")},reset:function(){("add"==this.oprationVal||"edit"==this.oprationVal)&&(this.form={contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""})},onSubmit:function(e){var t=this,i=this.oprationVal;if(!0===this.submitLoading)return!1;if(!this.form.mobile&&!this.form.telephone)return this.$message.error("请填写手机号或公司座机二选一"),!1;this.submitLoading=!0;var a=Object(d["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;a.clue_id=t.clue_id,"add"==i?Object(f["a"])(a).then((function(e){200==e.code?(t.addContactVisible=!1,t.$message.success(e.message),t.form={contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""},t.getContactList()):t.$message.error(e.message),t.submitLoading=!1})).catch((function(){t.submitLoading=!1})):"edit"==i&&Object(f["b"])(a).then((function(e){200==e.code?(t.addContactVisible=!1,t.$message.success(e.message),t.form={contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""},t.getContactList()):t.$message.error(e.message),t.submitLoading=!1})).catch((function(){t.submitLoading=!1}))}))},clickDial:function(e,t){var i=this,a="";a=""==t||null==t?"未完善线索资料":t,this.$confirm("是否对【"+a+"】"+e+" 发起呼叫？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(C["i"])({mobile:e}).then((function(a){200==a.code&&(i.meetDialogVisible=!0,i.dialPhone=e,i.dialName=t),4040==a.code&&(i.callDialogVisible=!0)})).catch((function(e){}))})).catch((function(){}))},callHandleClose:function(){this.callDialogVisible=!1},meetHandleClose:function(){this.meetDialogVisible=!1}}},S=y,k=(i("9ff4"),Object(_["a"])(S,b,w,!1,null,"a77ec834",null)),x=k.exports,D={name:"Show",components:{clueDetailsEdit:g,followUpRecord:o["a"],clueContact:x},props:{rowId:{default:""}},data:function(){return{details:[],activeName:"first",loading:!1,sameClientVisible:!1,componeyList:[],comId:0}},created:function(){this.clueDetails()},methods:{getVerifyRepeatCompany:function(){var e=this;Object(f["o"])({clue_id:this.rowId}).then((function(t){""==t.data?e.$router.push("/user/company/add?id="+e.details.id):(e.activeName="second",e.sameClientVisible=!0,e.componeyList=t.data,e.componeyList[0].select=!0,e.comId=e.componeyList[0].id)}))},conversion:function(){this.getVerifyRepeatCompany()},hideDetail:function(){this.$emit("hideDetail")},clueDetails:function(){var e=this;this.loading=!0,Object(m["j"])({clue_id:this.rowId}).then((function(t){e.details=t.data;var i=[];0!=t.data.district1&&i.push(t.data.district1),0!=t.data.district2&&i.push(t.data.district2),0!=t.data.district3&&i.push(t.data.district3),e.details.citycategory_arr=i,e.details.citycategory_arr=i,e.loading=!1})).catch((function(){}))},changeSameClient:function(e){this.sameClientVisible=!1},handleClick:function(){"first"!=this.activeName&&"second"!=this.activeName||this.clueDetails()}}},A=D,I=(i("c1e9"),Object(_["a"])(A,s,n,!1,null,"0d1122d7",null)),L=I.exports,B=i("39a0"),O={name:"Whole",components:{show:L},data:function(){return{key_type:"1",loading:!1,props:{multiple:!1,checkStrictly:!0},visiblepop:!1,menu_icon:"menu",keyword:"",drawer:!1,fieldData:[],createdByScreen:"",createdByScreenData:[],regionScreen:"",regionScreenData:[],industryScreen:"",industryScreenData:[],saleScreen:"",saleScreenData:[],pagesize:10,total:0,currentPage:1,multipleSelection:[],exportData:[],tableData:[],columnCheckedId:"",multipleSelectionNew:[],checkedList:[],title:"",currentNav:"",list_type:0,rowId:0,draggableOption:{sort:!1,scroll:!0,disabled:!0},export_field:[],export_name:[],callDialogVisible:!1,meetDialogVisible:!1,dialPhone:"",dialName:"",sort_type:"",sort:"",saleFilter:"",industryFilter:"",regionFilter:"",createdByFilter:"",collectionScreenData:[{id:1,name:"今日新增"},{id:2,name:"本周新增"},{id:3,name:"本月新增"}],collectionScreen:"",collectionFilter:"",followCountScreenData:[{id:1,name:"跟进0次"},{id:2,name:"跟进1次"},{id:3,name:"跟进2次"},{id:4,name:"跟进3次及以上"}],followCountScreen:"",followCountFilter:"",tabelHeight:0,followupScreen:"",followupScreenData:[{id:0,name:"全部"},{id:1,name:"今日跟进"},{id:2,name:"30天内跟进过"},{id:3,name:"7天内未跟进"},{id:4,name:"15天内未跟进"},{id:5,name:"30天内未跟进"},{id:6,name:"从未跟进"},{id:7,name:"即将转公"}],followupFilter:""}},computed:{clueTime:function(){var e=this.$route.query.time;return e}},watch:{clueTime:function(){var e=localStorage.getItem("clue_type"),t=localStorage.getItem("clue_id");""!=e&&"follow"==e&&(this.drawer=!0,this.rowId=t,localStorage.setItem("clue_type",""),localStorage.setItem("clue_id",""))}},updated:function(){var e=this;this.$nextTick((function(){e.$refs.multipleTable.doLayout(),e.loading||setTimeout((function(){var t=e.$refs.multipleTable.$el.className,i=t.split(" "),a=document.querySelectorAll(".el-table__fixed-right")[0],l=document.querySelectorAll(".el-table__empty-block")[0];void 0!=l&&(l.style.width="100%");var s=i.find((function(e,t,i){return"el-table--scrollable-y"==e}));a.style.right=s?"10px":"0px"}),100)}))},mounted:function(){var e=this;this.$nextTick((function(){var t=document.documentElement.clientHeight;e.tabelHeight=t-316-60}))},created:function(){this.currentNav=this.$route.name,"wholeClue"==this.currentNav?(this.title="全部线索",this.list_type=0):"wholeMy"==this.currentNav?(this.title="我的线索",this.list_type=2):"wholeInternationalWaters"==this.currentNav&&(this.title="线索公海",this.list_type=1),this.clueList(),this.crmCustomList(),this.clueAdminLists(),this.classify();var e=localStorage.getItem("clue_type"),t=localStorage.getItem("clue_id");""!=e&&"follow"==e&&(this.drawer=!0,this.rowId=t,localStorage.setItem("clue_type",""),localStorage.setItem("clue_id",""))},methods:{sortTable:function(e){var t=e.column,i=e.order;this.sortType="ascending"==i?"asc":"descending"==i?"desc":"",this.sort_type=t.property,this.sort=this.sortType,this.clueList()},classify:function(){var e=this;Object(m["e"])({type:"citycategory,trade,companyScale"}).then((function(t){e.regionScreenData=t.data.citycategory,e.industryScreenData=t.data.trade})).catch((function(){}))},clueAdminLists:function(){var e=this;Object(m["g"])().then((function(t){e.saleScreenData=t.data,e.createdByScreenData=t.data})).catch((function(){}))},clueList:function(){var e=this;if(this.loading=!0,localStorage.getItem("collectionScreen")){var t=localStorage.getItem("collectionScreen");this.collectionScreen=parseInt(t),this.collectionFilter={name:"1"==t?"今日新增":"2"==t?"本周新增":"本月新增",field:"collection_time"},localStorage.setItem("collectionScreen","")}if(localStorage.getItem("followCountScreen")){var i=localStorage.getItem("followCountScreen");this.followCountScreen=parseInt(i),this.followCountFilter={name:"1"==i?"跟进0次":"2"==i?"跟进1次的":"3"==i?"跟进2次":"跟进3次及以上",field:"follow_count"},localStorage.setItem("followCountScreen","")}localStorage.getItem("followupScreen")&&"6"==localStorage.getItem("followupScreen")&&(this.followupScreen=6,this.followupFilter={name:"从未跟进",field:"deadline"},localStorage.setItem("followupScreen","")),localStorage.getItem("followupScreen")&&"1"==localStorage.getItem("followupScreen")&&(this.followupScreen=1,this.followupFilter={name:"今日跟进客户",field:"not_following_day"},localStorage.setItem("followupScreen","")),localStorage.getItem("followupScreen")&&"7"==localStorage.getItem("followupScreen")&&(this.followupScreen=7,this.followupFilter={name:"即将转入公海客户",field:"not_following_day"},localStorage.setItem("followupScreen","")),localStorage.getItem("followupScreen")&&"2"==localStorage.getItem("followupScreen")&&(this.followupScreen=2,this.followupFilter={name:"30天内跟进客户",field:"not_following_day"},localStorage.setItem("followupScreen","")),localStorage.getItem("followupScreen")&&"4"==localStorage.getItem("followupScreen")&&(this.followupScreen=4,this.followupFilter={name:"15天内未跟进客户",field:"not_following_day"},localStorage.setItem("followupScreen","")),localStorage.getItem("followupScreen")&&"3"==localStorage.getItem("followupScreen")&&(this.followupScreen=3,this.followupFilter={name:"7天内未跟进客户",field:"not_following_day"},localStorage.setItem("followupScreen","")),localStorage.getItem("collection_date_custom")&&(this.collectionScreen=localStorage.getItem("collection_date_custom"),this.collectionFilter={name:localStorage.getItem("collection_date_custom"),field:"collection_time"},localStorage.setItem("collection_date_custom","")),Object(m["l"])({page:this.currentPage,pagesize:this.pagesize,list_type:this.list_type,key_type:this.key_type,keyword:this.keyword,trade:this.industryScreen,district:this.regionScreen,creat_id:this.createdByScreen,admin_id:this.saleScreen,sort_type:this.sort_type,sort:this.sort,collection:this.collectionScreen,follow_count:this.followCountScreen,search_type:this.followupScreen}).then((function(t){e.tableData=t.data.items,e.total=t.data.total,e.currentPage=t.data.current_page,e.loading=!1})).catch((function(){e.loading=!1}))},setFieldClose:function(){this.menu_icon="menu",this.visiblepop=!1},setFieldConfirm:function(){var e=this,t=this.list_type,i=0;0==t&&(i=1),1==t&&(i=2),2==t&&(i=3),Object(m["F"])({menu:i,type:1,value:JSON.stringify(this.fieldData)},"post").then((function(t){200==t.code?e.$message.success(t.message):e.$message.error(t.message)})).catch((function(){}))},crmCustomList:function(){var e=this,t=this.list_type,i=0;0==t&&(i=1),1==t&&(i=2),2==t&&(i=3),Object(m["E"])({menu:i,type:1}).then((function(t){e.fieldData=JSON.parse(t.data);for(var i=0;i<=e.fieldData.length-1;i++)"collection_time"==e.fieldData[i].field||"last_visit_time"==e.fieldData[i].field?e.fieldData[i].is_sortable="custom":e.fieldData[i].is_sortable=!1,e.export_name.push(e.fieldData[i].name),e.export_field.push(e.fieldData[i].field)})).catch((function(){}))},locking:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].is_locking?(this.fieldData[t].is_locking=!1,this.fieldData[t].is_lock_display=!1,this.fieldData[t].icon="el-icon-lock"):(this.fieldData[t].icon="el-icon-unlock",this.fieldData[t].is_locking=!0,this.fieldData[t].is_lock_display=!1));this.setFieldConfirm()},select:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].select?this.fieldData[t].select=!1:this.fieldData[t].select=!0)},menu:function(){"menu"==this.menu_icon?(this.visiblepop=!0,this.menu_icon="menu_select"):(this.visiblepop=!1,this.menu_icon="menu")},confirm:function(e){var t=this;if("reset"!=e&&(this.tabelHeight="calc(100vh - 446px)",this.$nextTick((function(){t.$refs.multipleTable.doLayout()}))),""!=this.saleScreen)for(var i=0;i<=this.saleScreenData.length-1;i++)this.saleScreen==this.saleScreenData[i].id&&(this.saleFilter={field:"admin_username",name:this.saleScreenData[i].name});else this.saleFilter="";if(""!=this.followupScreen)for(i=0;i<=this.followupScreenData.length-1;i++)this.followupScreen==this.followupScreenData[i].id&&(this.followupFilter={field:"not_following_day",name:this.followupScreenData[i].name});else this.followupFilter="";if(""!=this.industryScreen)for(i=0;i<=this.industryScreenData.length-1;i++)this.industryScreen==this.industryScreenData[i].id&&(this.industryFilter={field:"trade",name:this.industryScreenData[i].name});else this.industryFilter="";if(""!=this.regionScreen){if(1==this.regionScreen.length)for(i=0;i<=this.regionScreenData.length-1;i++)this.regionScreen[0]==this.regionScreenData[i].value&&(this.regionFilter={field:"district",name:this.regionScreenData[i].label});if(2==this.regionScreen.length)for(i=0;i<=this.regionScreenData.length-1;i++)for(var a=0;a<=this.regionScreenData[i].children.length-1;a++)this.regionScreen[1]==this.regionScreenData[i].children[a].value&&(this.regionFilter={field:"district",name:this.regionScreenData[i].children[a].label});if(3==this.regionScreen.length)for(i=0;i<=this.regionScreenData.length-1;i++)for(a=0;a<=this.regionScreenData[i].children.length-1;a++)for(var l=0;l<=this.regionScreenData[i].children[a].children.length-1;l++)this.regionScreen[2]==this.regionScreenData[i].children[a].children[l].value&&(this.regionFilter={field:"district",name:this.regionScreenData[i].children[a].children[l].label})}else this.regionFilter="";if(""!=this.createdByScreen)for(i=0;i<=this.createdByScreenData.length-1;i++)this.createdByScreen==this.createdByScreenData[i].id&&(this.createdByFilter={field:"creat_username",name:this.createdByScreenData[i].name});else this.createdByFilter="";if(""!=this.collectionScreen)for(i=0;i<=this.collectionScreenData.length-1;i++)this.collectionScreen==this.collectionScreenData[i].id&&(this.collectionFilter={field:"collection_time",name:this.collectionScreenData[i].name});else this.collectionFilter="";if(""!=this.followCountScreen)for(i=0;i<=this.followCountScreenData.length-1;i++)this.followCountScreen==this.followCountScreenData[i].id&&(this.followCountFilter={field:"follow_count",name:this.followCountScreenData[i].name});else this.followCountFilter="";this.currentPage=1,this.clueList()},see:function(e){this.drawer=!0,this.rowId=e},handleClose:function(){this.clueList(),this.drawer=!1},hideDetail:function(){this.clueList(),this.drawer=!1},handleSizeChange:function(e){this.pagesize=e,this.clueList()},handleCurrentChange:function(e){this.currentPage=e,this.clueList()},release:function(e){var t=this;this.$confirm("您确认释放该线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["n"])({clue_id:e}).then((function(e){200==e.code?t.$message.success(e.message):t.$message.error(e.message),t.clueList()}))})).catch((function(){}))},funAuditBatch:function(e,t){var i=this;if("all"==e){var a=this;if(0==a.multipleSelection.length)return a.$message.error("请选择要领取的线索"),!1;var l=a.multipleSelection}else l=t;this.$confirm("您确认要领取此线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["m"])({clue_id:l}).then((function(e){200==e.code?i.$message.success(e.message):i.$message.error(e.message),i.clueList()}))})).catch((function(){}))},wholeDel:function(e,t){var i=this;if("all"==e){var a=this;if(0==a.multipleSelection.length)return a.$message.error("请选择要删除的线索"),!1;var l=a.multipleSelection}else l=t;this.$confirm("您确认要删除此线索?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["i"])({clue_id:l}).then((function(e){200==e.code?i.$message.success(e.message):i.$message.error(e.message),i.clueList()}))})).catch((function(){}))},funExport:function(){var e=this;if(0==e.$store.state.user.access_export)return e.$message.error("当前管理员没有导出权限"),!1;if(0==e.multipleSelection.length)return e.$message.error("请选择要导出的线索"),!1;for(var t=this.exportData,i=0;i<=t.length-1;i++)-1==t[i].not_following_day&&(t[i].not_following_day="");e.exportExcel(this.exportData)},exportExcel:function(e){var t=this;Promise.resolve().then(function(){var a=i("39a0"),l=(a.export_json_to_excel,t.export_name);l.unshift("线索名称");var s=t.export_field;s.unshift("name");var n=t.formatJson(s,e);Object(B["export_json_to_excel"])(l,n,"线索导出")}.bind(null,i)).catch(i.oe)},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},funSearchKeyword:function(){this.currentPage=1,this.clueList()},goto:function(e){this.$router.push(e)},locks:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].is_lock_display?this.fieldData[t].is_lock_display=!1:this.fieldData[t].is_lock_display=!0)},choose:function(){var e=this;this.tableData.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)}))},handleSelectionChange:function(e){var t=this,i=[];e.forEach((function(e){i.push(e.id)})),this.exportData=e,this.multipleSelection=i,this.multipleSelectionNew=e,this.multipleSelectionNew.length==this.tableData.length&&this.multipleSelectionNew.forEach((function(e,i){t.checkedList[i]=!0})),0==this.multipleSelectionNew.length&&(this.checkedList=[]),this.$forceUpdate(),this.$emit("selectList",this.multipleSelectionNew)},cellEnter:function(e,t,i,a){this.columnCheckedId=e.id},cellLeave:function(e,t,i,a){this.columnCheckedId=""},cellCheckbox:function(e,t){this.checkedList[t]?this.$refs.multipleTable.toggleRowSelection(e,!0):this.$refs.multipleTable.toggleRowSelection(e,!1)},reset:function(e){this.tabelHeight="calc(100vh - 372px)","all"==e&&(this.saleScreen=[],this.industryScreen=[],this.regionScreen=[],this.createdByScreen=[],this.followupScreen="",this.key_type="1",this.keyword="",this.collectionScreen="",this.followCountScreen=""),"admin_username"==e&&(this.saleScreen=[]),"trade"==e&&(this.industryScreen=[]),"district"==e&&(this.regionScreen=[]),"creat_username"==e&&(this.createdByScreen=[]),"collection_time"==e&&(this.collectionScreen=""),"follow_count"==e&&(this.followCountScreen=""),"not_following_day"==e&&(this.followupScreen=""),this.confirm("reset")},clickDial:function(e,t){var i=this;this.$confirm("是否对【"+t+"】"+e+" 发起呼叫？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(C["i"])({mobile:e}).then((function(a){200==a.code&&(i.meetDialogVisible=!0,i.dialPhone=e,i.dialName=t),4040==a.code&&(i.callDialogVisible=!0)})).catch((function(e){}))})).catch((function(){}))},callHandleClose:function(){this.callDialogVisible=!1},meetHandleClose:function(){this.meetDialogVisible=!1}}},N=O,U=(i("9be7"),Object(_["a"])(N,a,l,!1,null,"33896200",null));t["default"]=U.exports},c1e9:function(e,t,i){"use strict";i("21ed")},c923:function(e,t,i){},df1a:function(e,t,i){i("ac1f"),i("466d"),i("d3b7"),i("b0c0"),i("1276"),i("a15b"),i("25f0"),i("fb6a"),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(i){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},a=function(e,t,i){this.data=e,this.size=e.length,this.type=t,this.encoding=i},l=i.prototype,s=a.prototype,n=e.FileReaderSync,o=function(e){this.code=this[this.name=e]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),r=c.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,m=d.revokeObjectURL,f=d,p=e.btoa,h=e.atob,_=e.ArrayBuffer,v=e.Uint8Array;a.fake=s.fake=!0;while(r--)o.prototype[c[r]]=r+1;return d.createObjectURL||(f=e.URL={}),f.createObjectURL=function(e){var t,i=e.type;return null===i&&(i="application/octet-stream"),e instanceof a?(t="data:"+i,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):p?t+";base64,"+p(e.data):t+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&m&&m.call(d,e)},l.append=function(e){var i=this.data;if(v&&(e instanceof _||e instanceof v)){for(var l="",s=new v(e),c=0,r=s.length;c<r;c++)l+=String.fromCharCode(s[c]);i.push(l)}else if("Blob"===t(e)||"File"===t(e)){if(!n)throw new o("NOT_READABLE_ERR");var d=new n;i.push(d.readAsBinaryString(e))}else e instanceof a?"base64"===e.encoding&&h?i.push(h(e.data)):"URI"===e.encoding?i.push(decodeURIComponent(e.data)):"raw"===e.encoding&&i.push(e.data):("string"!==typeof e&&(e+=""),i.push(unescape(encodeURIComponent(e))))},l.getBlob=function(e){return arguments.length||(e=null),new a(this.data.join(""),e,"raw")},l.toString=function(){return"[object BlobBuilder]"},s.slice=function(e,t,i){var l=arguments.length;return l<3&&(i=null),new a(this.data.slice(e,l>1?t:this.data.length),i,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=this.data.length=0},i}(e);e.Blob=function(e,i){var a=i&&i.type||"",l=new t;if(e)for(var s=0,n=e.length;s<n;s++)l.append(e[s]);return l.getBlob(a)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this)}}]);