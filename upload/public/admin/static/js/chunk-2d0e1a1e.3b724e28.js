(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1a1e"],{"7aec":function(e,t,s){"use strict";s.r(t);var l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"参数配置",lazy:!0}},[s("mailbase")],1)],1)],1)},a=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[!0===e.setting_secrecy?s("div",{staticClass:"no-promise"},[e._m(0)]):s("el-form",{ref:"form",staticClass:"common-form",attrs:{"v-loading":e.infoLoading,model:e.form,"label-width":"120px",rules:e.rules,"inline-message":!0}},[s("div",{staticClass:"spaceline"}),s("el-form-item",{attrs:{label:"默认发送方式"}},[s("el-radio-group",{model:{value:e.form.sendmail_type,callback:function(t){e.$set(e.form,"sendmail_type",t)},expression:"form.sendmail_type"}},[s("el-radio",{attrs:{label:"smtp"}},[e._v("SMTP")]),s("el-radio",{attrs:{label:"aliyundm"}},[e._v("阿里云邮件推送")]),s("el-radio",{attrs:{label:"sendcloud"}},[e._v("SendCloud")])],1)],1),"smtp"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"SMTP服务器"}},[s("el-input",{staticClass:"middle",model:{value:e.form.smtp.host,callback:function(t){e.$set(e.form.smtp,"host",t)},expression:"form.smtp.host"}})],1):e._e(),"smtp"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"SMTP端口"}},[s("el-input",{staticClass:"middle",model:{value:e.form.smtp.port,callback:function(t){e.$set(e.form.smtp,"port",t)},expression:"form.smtp.port"}})],1):e._e(),"smtp"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"SMTP用户名"}},[s("el-input",{staticClass:"middle",model:{value:e.form.smtp.username,callback:function(t){e.$set(e.form.smtp,"username",t)},expression:"form.smtp.username"}})],1):e._e(),"smtp"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"SMTP密码"}},[s("el-input",{staticClass:"middle",model:{value:e.form.smtp.password,callback:function(t){e.$set(e.form.smtp,"password",t)},expression:"form.smtp.password"}})],1):e._e(),"smtp"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"发送方地址"}},[s("el-input",{staticClass:"middle",model:{value:e.form.smtp.sender_address,callback:function(t){e.$set(e.form.smtp,"sender_address",t)},expression:"form.smtp.sender_address"}})],1):e._e(),"aliyundm"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"AccessKey"}},[s("el-input",{staticClass:"middle",model:{value:e.form.aliyundm.access_key,callback:function(t){e.$set(e.form.aliyundm,"access_key",t)},expression:"form.aliyundm.access_key"}})],1):e._e(),"aliyundm"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"AccessSecret"}},[s("el-input",{staticClass:"middle",model:{value:e.form.aliyundm.access_secret,callback:function(t){e.$set(e.form.aliyundm,"access_secret",t)},expression:"form.aliyundm.access_secret"}})],1):e._e(),"aliyundm"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"发送方地址"}},[s("el-input",{staticClass:"middle",model:{value:e.form.aliyundm.sender_address,callback:function(t){e.$set(e.form.aliyundm,"sender_address",t)},expression:"form.aliyundm.sender_address"}})],1):e._e(),"sendcloud"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{staticClass:"middle",model:{value:e.form.sendcloud.api_user,callback:function(t){e.$set(e.form.sendcloud,"api_user",t)},expression:"form.sendcloud.api_user"}})],1):e._e(),"sendcloud"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"Key"}},[s("el-input",{staticClass:"middle",model:{value:e.form.sendcloud.api_key,callback:function(t){e.$set(e.form.sendcloud,"api_key",t)},expression:"form.sendcloud.api_key"}})],1):e._e(),"sendcloud"==e.form.sendmail_type?s("el-form-item",{attrs:{label:"发送方地址"}},[s("el-input",{staticClass:"middle",model:{value:e.form.sendcloud.sender_address,callback:function(t){e.$set(e.form.sendcloud,"sender_address",t)},expression:"form.sendcloud.sender_address"}})],1):e._e(),s("el-form-item",{attrs:{label:""}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),s("el-button",{on:{click:function(t){return e.onTestDialog()}}},[e._v("测试")])],1)],1),e.dialogFormVisible?s("el-dialog",{attrs:{title:"发送测试邮件",visible:e.dialogFormVisible,width:"35%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[s("el-form",{ref:"testform",staticClass:"common-form",attrs:{model:e.testform,"label-width":"150px",rules:e.testrules,"inline-message":!0}},[s("el-form-item",{attrs:{label:"接收邮箱",prop:"email"}},[s("el-input",{staticStyle:{width:"300px"},model:{value:e.testform.email,callback:function(t){e.$set(e.testform,"email",t)},expression:"testform.email"}})],1),s("el-form-item",{attrs:{label:" "}},[s("el-button",{attrs:{type:"primary",loading:e.testLoading},on:{click:function(t){return e.onTest("testform")}}},[e._v(" 发送测试邮件 ")]),s("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1)],1):e._e()],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"notice-div"},[s("p",{staticClass:"notice-p"},[e._v("暂无查看权限，请联系网站负责人")])])}],n=s("ade3"),r=s("5530"),m=s("1063"),d={data:function(){return{infoLoading:!0,testLoading:!1,dialogFormVisible:!1,testform:{email:""},form:{sendmail_type:"smtp",smtp:{host:"",port:"",username:"",password:"",sender_address:""},sendcloud:{api_user:"",api_key:"",sender_address:""},aliyundm:{access_key:"",access_secret:"",sender_address:""}},rules:{},testrules:{email:[{required:!0,message:"请输入接收邮箱",trigger:"blur"}]},setting_secrecy:!1}},mounted:function(){},created:function(){this.setting_secrecy=!!window.global.SettingSecrecy&&window.global.SettingSecrecy,this.fetchInfo()},methods:{fetchInfo:function(){var e=this;this.infoLoading=!0;var t={};Object(m["n"])(t,"get").then((function(t){var s=t.data,l=s.sendmail_type,a=s.account_smtp,o=s.account_sendcloud,i=s.account_aliyundm;e.form.sendmail_type=l,e.form.smtp=a,e.form.sendcloud=o,e.form.aliyundm=i,e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var t=this,s=this,l=Object(n["a"])({sendmail_type:s.form.sendmail_type},"account_"+s.form.sendmail_type,Object(r["a"])({},s.form[s.form.sendmail_type]));this.$refs[e].validate((function(e){if(!e)return!1;Object(m["n"])(l).then((function(e){return t.$store.dispatch("config/getConfigInfo"),t.$message.success(e.message),!0})).catch((function(){}))}))},onTestDialog:function(){this.testLoading=!1,this.dialogFormVisible=!0},closeDialog:function(){this.testLoading=!1,this.dialogFormVisible=!1},onTest:function(e){var t=this,s={email:t.testform.email,type:t.form.sendmail_type,account:Object(r["a"])({},t.form[t.form.sendmail_type])};t.$refs[e].validate((function(e){if(!e)return!1;t.testLoading=!0,Object(m["l"])(s).then((function(e){return t.dialogFormVisible=!1,t.$message.success(e.message),!0})).catch((function(e){t.testLoading=!1}))}))}}},c=d,u=s("2877"),f=Object(u["a"])(c,o,i,!1,null,null,null),p=f.exports,_={components:{mailbase:p}},b=_,y=Object(u["a"])(b,l,a,!1,null,null,null);t["default"]=y.exports}}]);