(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b33c0"],{2804:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"spaceline"}),o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.infoLoading,expression:"infoLoading"}],ref:"form",staticClass:"common-form",attrs:{model:t.form,"label-width":"120px",rules:t.rules,"inline-message":!0}},[o("el-form-item",{attrs:{label:"标题",prop:"title"}},[o("el-input",{staticClass:"middle",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"企业数基数",prop:"total_company"}},[o("el-input",{staticClass:"middle",nativeOn:{keyup:function(e){return t.keyup()}},model:{value:t.form.total_company,callback:function(e){t.$set(t.form,"total_company",e)},expression:"form.total_company"}})],1),o("el-form-item",{attrs:{label:"岗位数基数",prop:"total_job"}},[o("el-input",{staticClass:"middle",nativeOn:{keyup:function(e){return t.keyup()}},model:{value:t.form.total_job,callback:function(e){t.$set(t.form,"total_job",e)},expression:"form.total_job"}})],1),o("el-form-item",{attrs:{label:"岗位需求数基数",prop:"total_job_amount"}},[o("el-input",{staticClass:"middle",nativeOn:{keyup:function(e){return t.keyup()}},model:{value:t.form.total_job_amount,callback:function(e){t.$set(t.form,"total_job_amount",e)},expression:"form.total_job_amount"}})],1),o("el-form-item",{attrs:{label:"简历数基数",prop:"total_resume"}},[o("el-input",{staticClass:"middle",nativeOn:{keyup:function(e){return t.keyup()}},model:{value:t.form.total_resume,callback:function(e){t.$set(t.form,"total_resume",e)},expression:"form.total_resume"}})],1),o("el-form-item",{attrs:{label:"预览地址"}},[t._v(" "+t._s(t.previewUrl)+" "),o("el-button",{attrs:{type:"text"},on:{click:t.onReset}},[t._v("[重置]")])],1),o("el-form-item",{attrs:{label:""}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v(" 保存 ")]),o("el-button",{on:{click:function(e){return t.onPreview()}}},[t._v(" 预览 ")]),o("el-button",{attrs:{type:"warning"},on:{click:function(e){return t.onCopy()}}},[t._v(" 复制链接 ")])],1)],1)],1)},i=[],a=o("5530"),r=(o("ac1f"),o("1276"),o("a15b"),o("1063"));function s(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",o=e.length,n="",i=0;i<t;i++)n+=e.charAt(Math.floor(Math.random()*o));return n}var l={data:function(){return{infoLoading:!0,form:{title:"",total_company:0,total_job:0,total_job_amount:0,total_resume:0},screen_token:"",sitedomain:"",sitedir:"",linkurl:"",rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}]}}},computed:{previewUrl:function(){return this.sitedomain+this.sitedir+"index/screen/index?token="+this.screen_token}},mounted:function(){},created:function(){this.fetchInfo()},methods:{fetchInfo:function(){var t=this;this.infoLoading=!0;var e={};Object(r["n"])(e,"get").then((function(e){var o=Object(a["a"])({},e.data),n=o.sitedomain,i=o.sitedir,r=o.screen_token,s=o.screen_base,l=o.screen_title,c=s.split(",");t.sitedomain=n,t.sitedir=i,t.screen_token=r,t.form={title:l,total_company:c[0],total_job:c[1],total_job_amount:c[2],total_resume:c[3]},t.infoLoading=!1})).catch((function(){}))},onReset:function(){var t=this;this.$confirm("重置后之前的预览地址都将失效，确定重置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.screen_token=s(16),Object(r["n"])({screen_token:t.screen_token}).then((function(e){t.$store.dispatch("config/getConfigInfo"),t.$message.success("重置成功")})).catch((function(){}))})).catch((function(){}))},onPreview:function(){window.open(this.previewUrl)},onCopy:function(){var t=this,e=this.previewUrl;this.$copyText(e).then((function(e){t.$message.success("链接已复制到剪切板！")}),(function(e){t.$message.error("抱歉，复制失败！")}))},onSubmit:function(t){var e=this,o={screen_title:this.form.title,screen_base:[""==this.form.total_company?0:this.form.total_company,""==this.form.total_job?0:this.form.total_job,""==this.form.total_job_amount?0:this.form.total_job_amount,""==this.form.total_resume?0:this.form.total_resume].join(",")};this.$refs[t].validate((function(t){if(!t)return!1;Object(r["n"])(o).then((function(t){return e.$store.dispatch("config/getConfigInfo"),e.$message.success(t.message),!0})).catch((function(){}))}))},keyup:function(){""==this.form.total_company&&(this.form.total_company=0),""==this.form.total_job&&(this.form.total_job=0),""==this.form.total_job_amount&&(this.form.total_job_amount=0),""==this.form.total_resume&&(this.form.total_resume=0)}}},c=l,m=o("2877"),u=Object(m["a"])(c,n,i,!1,null,null,null);e["default"]=u.exports}}]);