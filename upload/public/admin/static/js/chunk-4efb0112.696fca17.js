(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4efb0112"],{2782:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return l}));var a=n("b775"),r=n("d722");function i(e){return Object(a["a"])({url:r["a"].quickmsgList,method:"post",data:e})}function c(e){return Object(a["a"])({url:r["a"].quickmsgAdd,method:"post",data:e})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==t?Object(a["a"])({url:r["a"].quickmsgEdit,method:t,data:e}):Object(a["a"])({url:r["a"].quickmsgEdit,method:t,params:e})}function o(e){return Object(a["a"])({url:r["a"].quickmsgDelete,method:"post",data:e})}function l(e){return Object(a["a"])({url:r["a"].syncImTokenBatch,method:"get",params:e})}},"3d44":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"app-container",attrs:{"element-loading-text":e.fullscreenLoadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("基本配置")])]),n("div",{staticClass:"tip"},[n("p",[e._v(" 74IM是国内首家专业的即时通讯云服务提供商，专注为互联网、移动互联网开发者提供即时通讯基础能力和云端服务 "),n("a",{staticStyle:{color:"rgb(30, 136, 229)"},attrs:{href:"http://imcenter.74cms.com/",target:"_blank"}},[e._v(" 马上申请 ")])]),n("p",[e._v("如果您的会员无法正常使用即时聊天功能或您已更换app_key等信息，请使用下方同步数据功能")])]),n("el-form",{ref:"form",staticClass:"common-form",attrs:{model:e.form,"label-width":"120px",rules:e.rules,"inline-message":!0}},[n("el-form-item",{attrs:{label:"app_key"}},[n("el-input",{model:{value:e.form.app_key,callback:function(t){e.$set(e.form,"app_key",t)},expression:"form.app_key"}})],1),n("el-form-item",{attrs:{label:"app_secret"}},[n("el-input",{model:{value:e.form.app_secret,callback:function(t){e.$set(e.form,"app_secret",t)},expression:"form.app_secret"}})],1),n("el-form-item",{attrs:{label:"接口地址"}},[n("el-input",{model:{value:e.im_server,callback:function(t){e.im_server=t},expression:"im_server"}})],1),n("el-form-item",{attrs:{label:"websocket地址"}},[n("el-input",{model:{value:e.im_websocket,callback:function(t){e.im_websocket=t},expression:"im_websocket"}})],1),n("el-form-item",{attrs:{label:""}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v(" 保存 ")]),n("el-button",{on:{click:e.confirmSync}},[e._v(" 同步数据 ")])],1)],1)],1)],1)},r=[],i=n("7e2d"),c=n("1063"),s=n("2782"),o={data:function(){return{fullscreenLoading:!1,fullscreenLoadingText:"正在同步数据...",infoLoading:!1,form:{app_key:"",app_secret:""},im_server:"",im_websocket:"",rules:{}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.infoLoading=!0;var t={};Object(c["j"])(t,"get").then((function(t){var n=Object(i["a"])({},t.data),a=n.account_im,r=n.im_server,c=n.im_websocket;e.form=a,e.im_server=r,e.im_websocket=c,e.infoLoading=!1})).catch((function(){}))},onSubmit:function(e){var t=this,n={account_im:Object(i["a"])({},this.form),im_server:this.im_server,im_websocket:this.im_websocket};this.$refs[e].validate((function(e){if(!e)return!1;Object(c["j"])(n).then((function(e){return t.$message.success(e.message),!0})).catch((function(){}))}))},confirmSync:function(){var e=this;this.$confirm("同步数据会先清空用户token数据，中途无法取消，请不要中途刷新页面，否则将引发不可预估的错误。<br>确定同步吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){e.sync(1)})).catch((function(){}))},sync:function(e){var t=this,n={};n.page=e,n.pagesize=10,t.fullscreenLoading=!0,t.fullscreenLoadingText="正在同步数据...（已完成 "+(e-1)*n.pagesize+" 条）",Object(s["e"])(n).then((function(n){if(0!==n.data.finish)return t.fullscreenLoading=!1,t.$message({type:"success",message:"同步成功"}),!0;e+=1,t.sync(e)})).catch((function(){}))}}},l=o,u=n("5d22"),m=Object(u["a"])(l,a,r,!1,null,null,null);t["default"]=m.exports}}]);