(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16f1ab7d"],{"02bd":function(t,e,i){"use strict";i("c3be")},3854:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"list-search"},[i("el-select",{staticClass:"list-options",attrs:{placeholder:"审核状态"},on:{change:t.funSearch},model:{value:t.form.audit,callback:function(e){t.$set(t.form,"audit",e)},expression:"form.audit"}},[i("el-option",{attrs:{label:"不限审核状态",value:"0"}}),i("el-option",{attrs:{label:"未审核",value:"1"}}),i("el-option",{attrs:{label:"已审核",value:"2"}}),i("el-option",{attrs:{label:"未通过",value:"3"}})],1),i("el-select",{staticClass:"list-options",attrs:{placeholder:"展示状态"},on:{change:t.funSearch},model:{value:t.form.is_public,callback:function(e){t.$set(t.form,"is_public",e)},expression:"form.is_public"}},[i("el-option",{attrs:{label:"不限展示状态",value:"0"}}),i("el-option",{attrs:{label:"不展示",value:"1"}}),i("el-option",{attrs:{label:"展示中",value:"2"}})],1),i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容"},model:{value:t.form.keyword,callback:function(e){t.$set(t.form,"keyword",e)},expression:"form.keyword"}},[i("el-select",{staticClass:"input-sel",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.form.key_type,callback:function(e){t.$set(t.form,"key_type",e)},expression:"form.key_type"}},[i("el-option",{attrs:{label:"标题",value:"1"}}),i("el-option",{attrs:{label:"UID",value:"2"}})],1),i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.funSearchKeyword},slot:"append"})],1)],1),i("div",{staticClass:"spaceline"}),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"42"}}),1==t.vtype?i("el-table-column",{attrs:{label:"公司名称",prop:"companyname","show-overflow-tooltip":"",width:"200"}}):t._e(),2==t.vtype?i("el-table-column",{attrs:{label:"姓名",prop:"fullname","show-overflow-tooltip":"",width:"200"}}):t._e(),i("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":"",width:"200"}}),i("el-table-column",{attrs:{align:"center",label:"视频预览",prop:"video_src","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"more",attrs:{slot:"reference"},on:{click:function(i){return t.preview(e.row)}},slot:"reference"},[t._v("[预览]")])]}}])}),i("el-table-column",{attrs:{label:"浏览量",align:"center","show-overflow-tooltip":"",prop:"view_count"}}),i("el-table-column",{attrs:{label:"文件大小",align:"center","show-overflow-tooltip":"",prop:"filesize"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{domProps:{innerHTML:t._s(t.fmtSize(e.row.filesize))}})]}}])}),i("el-table-column",{attrs:{align:"center",label:"审核状态",prop:"status","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.audit?i("el-tag",{attrs:{type:"warning"},domProps:{innerHTML:t._s(t.auditFmt(e.row))}}):t._e(),2==e.row.audit?i("el-tag",{attrs:{type:"success"},domProps:{innerHTML:t._s(t.auditFmt(e.row))}}):t._e(),3==e.row.audit?i("el-tag",{attrs:{type:"danger"},domProps:{innerHTML:t._s(t.auditFmt(e.row))}}):t._e()]}}])}),i("el-table-column",{attrs:{label:"公开状态",align:"center","show-overflow-tooltip":"",prop:"is_public"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.is_public?i("span",[t._v("关闭")]):t._e(),2==e.row.is_public?i("span",[t._v("开启")]):t._e()]}}])}),i("el-table-column",{attrs:{align:"center",label:"发布日期",prop:"addtime",width:"150","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{align:"center",label:"操作",prop:"title",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(i){return t.doCheckOne(e.row)}}},[t._v("审核")]),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(i){return t.doDel(e.row)}}},[t._v("删除")])]}}])})],1),i("div",{staticClass:"spaceline"}),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.doCheck}},[t._v(" 审核 ")]),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:t.doDel}},[t._v(" 删除所选 ")])],1),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:16}},[i("el-pagination",{attrs:{"current-page":t.form.page,"page-size":t.form.pagesize,"page-sizes":[10,15,20,30,40],total:t.total,background:"",layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)],1),i("el-dialog",{attrs:{visible:t.dialogFormVisible,title:"将所选信息设置为",width:"25%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{staticClass:"common-form",attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:"审核状态"}},[i("el-radio-group",{model:{value:t.setAuditVal,callback:function(e){t.setAuditVal=t._n(e)},expression:"setAuditVal"}},t._l(t.options_audit,(function(e,o){return i("el-radio",{key:o,attrs:{label:parseInt(o)}},[t._v(" "+t._s(e)+" ")])})),1)],1),3==t.setAuditVal?i("el-form-item",{attrs:{label:"原因"}},[i("el-input",{attrs:{rows:"3",type:"textarea"},model:{value:t.setAuditReason,callback:function(e){t.setAuditReason=e},expression:"setAuditReason"}})],1):t._e()],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.doSetAuth}},[t._v(" 确 定 ")])],1)],1),i("el-dialog",{attrs:{visible:t.previewShow,width:"354px"},on:{"update:visible":function(e){t.previewShow=e}}},[i("div",{staticStyle:{"margin-right":"20px"},attrs:{slot:"title"},domProps:{innerHTML:t._s(t.previewCur.title)},slot:"title"}),i("video",{staticStyle:{width:"314px","max-height":"551px"},attrs:{autoplay:"",src:t.previewCur.video_src,controls:""}})])],1)},n=[],a=i("30d5"),r=(i("20a5"),i("52b5"),i("ed08")),s=i("8e35"),l=i("fcace"),c={components:{Template:l["a"]},props:["vtype"],data:function(){return{form:{audit:"0",is_public:"0",type:1,key_type:"1",keyword:"",page:1,pagesize:15},previewShow:!1,previewCur:{},total:0,list:[],listLoading:!1,tableIdarr:[],options_audit:{1:"未审核",2:"已审核",3:"审核未通过"},setAuditVal:0,setAuditReason:"",dialogFormVisible:!1,curId:"",auditSubmitLoading:!1,topSubmitLoading:!1}},mounted:function(){this.getList()},methods:{preview:function(t){this.previewShow=!0,this.previewCur=t},fmtSize:function(t){var e=t/1024/1024;return e=e.toFixed(2),e+"M"},doCheck:function(){if(0==this.tableIdarr.length)return this.$message.error("请选择信息");this.curId=!1,this.setAuditVal=1,this.dialogFormVisible=!0},doCheckOne:function(t){this.dialogFormVisible=!0,this.curId=t.id,this.setAuditVal=2},doSetAuth:function(){var t=this;if(1==this.auditSubmitLoading)return!1;this.auditSubmitLoading=!0;var e={id:this.curId?[this.curId]:this.tableIdarr,type:this.vtype,audit:this.setAuditVal,reason:this.setAuditReason};Object(s["l"])(e,"post").then((function(e){return 200==e.code?(t.$message.success(e.message),t.auditSubmitLoading=!1,t.getList(),t.dialogFormVisible=!1,!0):(t.auditSubmitLoading=!1,t.$message.error(e.message),!1)}))},doDel:function(t){var e=this;t&&(this.curId=t.id);var i=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:i.curId?[i.curId]:i.tableIdarr,type:e.vtype};Object(s["m"])(t).then((function(t){return i.$message.success(t.message),i.getList(),!0}))})).catch((function(){}))},handleSizeChange:function(t){this.form.pagesize=t,this.getList()},handleCurrentChange:function(t){this.form.page=t,this.getList()},dateFmt:function(t){return t>0?this.timeFilter(t):"-"},auditFmt:function(t){return this.options_audit[t.audit]},timeFilter:function(t){return Object(r["a"])(t,"{y}-{m}-{d}")},getList:function(){var t=this;this.form.type=this.vtype,this.listLoading=!0;var e=Object.assign({},this.form);Object(s["n"])(e).then((function(e){t.list=e.data.list,t.listLoading=!1,t.page=e.data.page,t.pagesize=e.data.pagesize,t.total=e.data.total}))},funSearch:function(){this.getList()},funSearchKeyword:function(){this.currentPage=1,this.getList()},handleSelectionChange:function(t){if(this.tableIdarr=[],t.length>0){var e,i=Object(a["a"])(t);try{for(i.s();!(e=i.n()).done;){var o=e.value;this.tableIdarr.push(o.id)}}catch(n){i.e(n)}finally{i.f()}}}}},u=c,d=(i("bf3a"),i("5d22")),f=Object(d["a"])(u,o,n,!1,null,"4b294aa9",null);e["a"]=f.exports},"52b5":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var o=i("b775"),n=i("d722");function a(t){return Object(o["a"])({url:n["a"].getClassify,method:"get",params:t})}},"8e35":function(t,e,i){"use strict";i.d(e,"n",(function(){return n})),i.d(e,"l",(function(){return a})),i.d(e,"m",(function(){return r})),i.d(e,"f",(function(){return s})),i.d(e,"a",(function(){return l})),i.d(e,"d",(function(){return c})),i.d(e,"c",(function(){return u})),i.d(e,"e",(function(){return d})),i.d(e,"k",(function(){return f})),i.d(e,"h",(function(){return p})),i.d(e,"j",(function(){return h})),i.d(e,"i",(function(){return m})),i.d(e,"g",(function(){return b})),i.d(e,"b",(function(){return g}));var o=i("b775");i("d722");function n(t){return Object(o["a"])({url:"/shortvideo/lists",method:"get",params:t})}function a(t){return Object(o["a"])({url:"/shortvideo/audit",method:"post",data:t})}function r(t){return Object(o["a"])({url:"/shortvideo/del",method:"post",data:t})}function s(t){return Object(o["a"])({url:"/shortvideo/ad_list",method:"get",params:t})}function l(t){return Object(o["a"])({url:"/shortvideo/ad_add",method:"post",data:t})}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==e?Object(o["a"])({url:"/shortvideo/ad_edit",method:e,data:t}):Object(o["a"])({url:"/shortvideo/ad_edit",method:e,params:t})}function u(t){return Object(o["a"])({url:"/shortvideo/ad_del",method:"post",data:t})}function d(t){return Object(o["a"])({url:"/shortvideo/innerLinkOptions",method:"get",params:t})}function f(t){return Object(o["a"])({url:"/shortvideo/ad_cat_list",method:"get",params:t})}function p(t){return Object(o["a"])({url:"/shortvideo/ad_cat_add",method:"post",data:t})}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==e?Object(o["a"])({url:"/shortvideo/ad_cat_edit",method:e,data:t}):Object(o["a"])({url:"/shortvideo/ad_cat_edit",method:e,params:t})}function m(t){return Object(o["a"])({url:"/shortvideo/ad_cat_del",method:"post",data:t})}function b(t){return Object(o["a"])({url:"/shortvideo/ad_cat_platform",method:"get",params:t})}function g(t){return Object(o["a"])({url:"/shortvideo/ad_cat_tree",method:"get",params:t})}},bf3a:function(t,e,i){"use strict";i("ffc1")},c3be:function(t,e,i){},ed08:function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),i.d(e,"b",(function(){return s}));var o=i("206e"),n=(i("e18c"),i("1c2e"),i("e35a"),i("5e9f"),i("898e"),i("0d7a"),i("8c92")),a=i.n(n);function r(t,e){if(0===arguments.length)return null;var i,n=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(o["a"])(t)?i=t:("string"===typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"===typeof t&&10===t.toString().length&&(t*=1e3),i=new Date(t));var a={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},r=n.replace(/{([ymdhisa])+}/g,(function(t,e){var i=a[e];return"a"===e?["日","一","二","三","四","五","六"][i]:i.toString().padStart(2,"0")}));return r}function s(t){var e={utype:t.utype,token:t.token,mobile:t.mobile,userIminfo:t.user_iminfo};a.a.set("qscms_visitor",JSON.stringify(e),{expires:7})}},fcace:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[t._l(t.list,(function(e,o){return i("el-tag",{key:o,attrs:{closable:"",effect:t.form.id==e.id?"dark":"plain"},on:{click:function(i){return t.changeItem(e)},close:function(i){return t.handleClose(e)}}},[t._v(" "+t._s(e.title)+" ")])})),i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.funAdd}},[t._v("+ 添加模板")]),i("div",{staticClass:"spaceline"}),t.showForm?i("el-form",{ref:"form",staticClass:"common-form",attrs:{model:t.form,"label-width":"80px",rules:t.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"模板名称",prop:"title"}},[i("el-input",{staticClass:"middle",model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"内容",prop:"content"}},[i("el-input",{attrs:{type:"textarea",rows:8,placeholder:"请输入内容"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存")])],1)],1):t._e()],2)},n=[],a=i("2b26"),r=i("7e2d"),s=i("b775"),l=i("d722");function c(t){return Object(s["a"])({url:l["a"].categoryJobTemplateList,method:"get",params:t})}function u(t){return Object(s["a"])({url:l["a"].categoryJobTemplateAdd,method:"post",data:t})}function d(t){return Object(s["a"])({url:l["a"].categoryJobTemplateEdit,method:"post",data:t})}function f(t){return Object(s["a"])({url:l["a"].categoryJobTemplateDelete,method:"post",data:t})}var p=["id"],h={props:["pid"],data:function(){return{showForm:!1,list:[],form:{id:0,pid:0,title:"",content:""},rules:{title:[{required:!0,message:"请输入模板名称",trigger:"blur"},{max:30,message:"长度在 1 到 30 个字符",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}},mounted:function(){},created:function(){this.form.pid=this.pid,this.fetchInfo()},methods:{fetchInfo:function(){var t=this;c({pid:this.pid},"get").then((function(e){t.list=e.data})).catch((function(){}))},funAdd:function(){this.form={id:0,pid:this.pid,title:"",content:""},this.showForm=!0},addSave:function(t,e){var i=this;this.$refs[e].validate((function(e){if(!e)return!1;u(t).then((function(t){return i.$message.success(t.message),i.form={id:0,pid:i.pid,title:"",content:""},i.showForm=!1,i.fetchInfo(),!0})).catch((function(){}))}))},editSave:function(t,e){var i=this;this.$refs[e].validate((function(e){if(!e)return!1;d(t).then((function(t){return i.$message.success(t.message),i.form={id:0,pid:i.pid,title:"",content:""},i.showForm=!1,i.fetchInfo(),!0})).catch((function(){}))}))},onSubmit:function(t){var e=Object(r["a"])({},this.form);if(parseInt(e.id)>0)this.editSave(e,t);else{var i=e.id,o=Object(a["a"])(e,p);console.log(i),this.addSave(o,t)}},changeItem:function(t){this.form={id:t.id,pid:t.pid,title:t.title,content:t.content},this.showForm=!0},handleClose:function(t){var e=this;this.$confirm("确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(i){f({id:t.id}).then((function(t){return e.$message.success(t.message),e.form={id:0,pid:e.pid,title:"",content:""},e.showForm=!1,e.fetchInfo(),!0})).catch((function(){}))})).catch((function(t){}))}}},m=h,b=(i("02bd"),i("5d22")),g=Object(b["a"])(m,o,n,!1,null,"f4214ad4",null);e["a"]=g.exports},ffc1:function(t,e,i){}}]);