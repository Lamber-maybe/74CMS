(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9525298e"],{"0ccb":function(e,t,o){var r=o("50c4"),a=o("1148"),n=o("1d80"),i=Math.ceil,s=function(e){return function(t,o,s){var l,c,u=String(n(t)),d=u.length,p=void 0===s?" ":String(s),m=r(o);return m<=d||""==p?u:(l=m-d,c=a.call(p,i(l/p.length)),c.length>l&&(c=c.slice(0,l)),e?u+c:c+u)}};e.exports={start:s(!1),end:s(!0)}},"122f":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"app-container"},[o("el-form",{ref:"form",attrs:{size:"medium",model:e.form,"label-width":"160px"}},[o("el-card",{attrs:{"body-style":{padding:"0 20px 20px"}}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("span",[e._v("基础信息")])]),o("el-card",{attrs:{"body-style":{padding:"20px 20px 0"},shadow:"never"}},[o("el-form-item",{staticClass:"flex",attrs:{label:"账户名称：",prop:"name"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),o("el-button",{staticClass:"edit",attrs:{type:"text"},on:{click:function(t){return e.editUsername(e.form.username)}}},[e._v("修改")])],1),o("el-form-item",{attrs:{label:"个人头像："}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:e.apiUpload,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.avatar?o("div",{staticClass:"avatar"},[o("img",{attrs:{src:e.form.avatar}}),o("span",{staticClass:"words"},[e._v("修改")])]):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),o("el-card",{staticClass:"top10",attrs:{"body-style":{padding:"20px 20px 0"},shadow:"never"}},[o("el-form-item",{attrs:{label:"最近登录时间：",prop:"name"}},[o("span",[e._v(e._s(e.parseTime(e.form.last_login_time,"{y}-{m}-{d} {h}:{i}")))])])],1),o("div",{staticClass:"padding20"},[o("span",[e._v("安全设置")])]),o("el-card",{attrs:{"body-style":{padding:"20px 20px 0"},shadow:"never"}},[o("el-form-item",{staticClass:"flex",attrs:{label:"登录密码：",prop:"name"}},[o("el-input",{attrs:{disabled:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),o("el-button",{staticClass:"edit",attrs:{type:"text"},on:{click:e.editPassword}},[e._v("修改")])],1)],1),o("el-card",{staticClass:"top10",attrs:{"body-style":{padding:"20px 20px 0"},shadow:"never"}},[o("el-form-item",{staticClass:"flex",attrs:{label:"绑定手机：",prop:"name"}},[o("el-input",{attrs:{disabled:""},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}}),o("el-button",{staticClass:"edit",attrs:{type:"text"},on:{click:e.editPhone}},[e._v("修改")])],1)],1),o("el-card",{staticClass:"top10",attrs:{"body-style":{padding:"20px 20px 0"},shadow:"never"}},[o("el-form-item",{attrs:{label:"绑定微信：",prop:"name"}},[""==e.form.openid?o("span",[o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.funBind()}}},[e._v("点击绑定")])],1):o("span",[e._v("已绑定"),o("el-button",{attrs:{type:"text"},on:{click:function(t){return e.funBindCancel()}}},[e._v("解绑")])],1),o("span",[e._v("（扫码绑定微信，创建完成后请用此微信，登录管理后台）")])])],1)],1)],1),o("el-dialog",{attrs:{title:"修改密码",visible:e.pwDialogVisible,width:"40%"},on:{"update:visible":function(t){e.pwDialogVisible=t}}},[o("el-form",{ref:"pwRuleForm",attrs:{model:e.pwRuleForm,rules:e.pwRules,"status-icon":"","label-width":"100px"}},[o("el-form-item",{attrs:{label:"旧密码",prop:"old_password"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.pwRuleForm.old_password,callback:function(t){e.$set(e.pwRuleForm,"old_password",t)},expression:"pwRuleForm.old_password"}})],1),o("el-form-item",{attrs:{label:"新密码",prop:"password"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.pwRuleForm.password,callback:function(t){e.$set(e.pwRuleForm,"password",t)},expression:"pwRuleForm.password"}})],1),o("el-form-item",{attrs:{label:"确认密码",prop:"password_confirm"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.pwRuleForm.password_confirm,callback:function(t){e.$set(e.pwRuleForm,"password_confirm",t)},expression:"pwRuleForm.password_confirm"}})],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.pwDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.pwSubmitForm("pwRuleForm")}}},[e._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"修改手机号",visible:e.phoneDialogVisible,width:"40%"},on:{"update:visible":function(t){e.phoneDialogVisible=t}}},[o("el-form",{ref:"phoneRuleForm",attrs:{model:e.phoneRuleForm,rules:e.phoneRules,"status-icon":"","label-width":"100px"}},[o("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.phoneRuleForm.mobile,callback:function(t){e.$set(e.phoneRuleForm,"mobile",t)},expression:"phoneRuleForm.mobile"}})],1),o("el-form-item",{attrs:{label:"验证码",prop:"code"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.phoneRuleForm.code,callback:function(t){e.$set(e.phoneRuleForm,"code",t)},expression:"phoneRuleForm.code"}},[o("template",{slot:"append"},[o("el-button",{attrs:{type:"primary"},on:{click:e.handlerSendCode}},[e._v(e._s(e.codeFlag?"发送验证码":e.timeNumber+"秒后重试"))])],1)],2)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.phoneDialogVisible=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.phoneSubmitForm("phoneRuleForm")}}},[e._v("确 定")])],1)],1),e.showQrcode?o("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"扫码绑定",visible:e.showQrcode,width:"15%","close-on-click-modal":!1},on:{"update:visible":function(t){e.showQrcode=t},close:function(t){e.showQrcode=!1}}},[o("div",{staticStyle:{"margin-bottom":"10px"}},[o("img",{attrs:{src:e.qrcodeSrc,width:"200",height:"200"}})])]):e._e()],1)},a=[],n=(o("ac1f"),o("1276"),o("caad"),o("2532"),o("00b4"),o("b775")),i=o("d722");function s(e){return Object(n["a"])({url:i["a"].personalIndex,method:"post",data:e})}function l(e){return Object(n["a"])({url:i["a"].personalAvatar,method:"post",data:e})}function c(e){return Object(n["a"])({url:i["a"].personalUsername,method:"post",data:e})}function u(e){return Object(n["a"])({url:i["a"].personalPassword,method:"post",data:e})}function d(e){return Object(n["a"])({url:i["a"].personalBindingCode,method:"post",data:e})}function p(e){return Object(n["a"])({url:i["a"].personalBindingMobile,method:"post",data:e})}function m(e){return Object(n["a"])({url:i["a"].authorizeCode,method:"post",data:e})}var f=o("ed08"),h=o("5f87"),b=o("50fc3"),g={name:"Customer",data:function(){var e=this,t=function(t,o,r){""!==o&&o?o.length<6?r(new Error("密码长度不能低于6位")):(""!==e.pwRuleForm.password_confirm&&e.$refs.pwRuleForm.validateField("password_confirm"),r()):r(new Error("请输入密码"))},o=function(t,o,r){""!==o&&o?o.length<6?r(new Error("密码长度不能低于6位")):o!==e.pwRuleForm.password?r(new Error("两次输入密码不一致")):r():r(new Error("请再次输入密码"))};return{form:"",headers:{admintoken:Object(h["e"])()},fileupload_size:"",fileupload_ext:"",apiUpload:window.global.RequestBaseUrl+i["a"].upload,password:"*********",pwDialogVisible:!1,pwRuleForm:{},pwRules:{old_password:[{required:!0,message:"请输入旧密码",trigger:"blur"}],password:[{required:!0,validator:t,trigger:"blur"}],password_confirm:[{required:!0,validator:o,trigger:"blur"}]},phoneDialogVisible:!1,phoneRuleForm:{},phoneRules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},isClick:!0,codeFlag:!0,timeNumber:60,qrcodeSrc:"",showQrcode:!1,wxLogin:""}},computed:{config:function(){return this.$store.state.config}},created:function(){this.fileupload_size=this.config.fileupload_size,this.fileupload_ext="png,gif,jpeg,jpg",this.getData()},mounted:function(){},methods:{parseTime:f["b"],getData:function(){var e=this;s().then((function(t){var o=t.code,r=t.message,a=t.data;"200"==o?e.form=a:e.$message.error(r)}))},editUsername:function(){var e=this;this.$prompt("请输入账户名称","修改",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,inputValidator:function(e){return!(""==e||!e)||"账户名称不能为空"}}).then((function(t){var o=t.value;c({username:o}).then((function(t){var o=t.code,r=t.message;"200"==o?(e.$message.success("修改成功！"),e.getData()):e.$message.error(r)}))})).catch((function(){}))},handleAvatarSuccess:function(e,t){var o=this,r=e.code,a=e.data,n=e.message;if("200"!=r)return this.$message.error(n),!1;this.form.avatar=a.file_url,l({avatar:a.file_url}).then((function(e){"200"==e.code?(o.$message.success("修改成功！"),o.getData()):o.$message.error(e.message)}))},beforeAvatarUpload:function(e){var t=e.type.split("/"),o=t[1],r=this.fileupload_ext.split(",");return r.includes(o)?!(e.size/1024>this.fileupload_size)||(this.$message.error("上传文件最大为".concat(this.fileupload_size,"kb")),!1):(this.$message.error("请上传png,gif,jpeg,jpg的图片格式"),!1)},editPassword:function(){this.pwDialogVisible=!0,this.pwRuleForm={}},pwSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;u(t.pwRuleForm).then((function(e){var o=e.code,r=e.message;"200"==o?(t.$message.success("修改成功！"),t.pwDialogVisible=!1,t.getData()):t.$message.error(r)}))}))},editPhone:function(){this.phoneDialogVisible=!0,this.phoneRuleForm={},this.isClick=!0,this.codeFlag=!0,this.timeNumber=60},handlerSendCode:function(){var e=this;if(this.isClick){if(this.isClick=!1,!this.phoneRuleForm.mobile)return this.$message.error("请填写手机号"),void(this.isClick=!0);if(!/^1[3|4|5|6|7|8|9][0-9]\d{4,8}$/.test(this.phoneRuleForm.mobile))return this.$message.error("手机号填写有误"),void(this.isClick=!0);if(!this.codeFlag)return void(this.isClick=!0);var t={mobile:this.phoneRuleForm.mobile};d(t).then((function(t){e.isClick=!0;var o=t.code,r=t.message;"200"==o?e.$message.success("验证码发送成功，请查收短信"):e.$message.error(r);var a=function t(){e.codeFlag=!1,e.timeNumber--,0===e.timeNumber?(e.codeFlag=!0,e.timeNumber=60):setTimeout((function(){t()}),1e3)};a()}))}else this.isClick=!0},phoneSubmitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;p(t.phoneRuleForm).then((function(e){var o=e.code,r=e.message;"200"==o?(t.$message.success("修改成功！"),t.phoneDialogVisible=!1,t.getData()):t.$message.error(r)}))}))},funBind:function(){var e=this;Object(b["b"])({id:this.form.id}).then((function(t){e.qrcodeSrc=t.data,e.showQrcode=!0}))},funBindCancel:function(){var e=this,t=this;t.$confirm("确定解绑吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(b["c"])({id:e.form.id}).then((function(e){t.$message.success(e.message),t.fetchData()}))})).catch((function(){}))},corpwechatClick:function(){var e=this,t=this;m().then((function(o){var r=o.code,a=o.data,n=o.message;if("200"==r)var i=680,s=680,l=(window.screen.availHeight-30-i)/2,c=(window.screen.availWidth-10-s)/2,u=window.open(a,"_blank","height="+i+",innerHeight="+i+",width="+s+",innerWidth="+s+",top="+l+",left="+c+",status=no,toolbar=no,menubar=no,location=no,resizable=no,scrollbars=0,titlebar=no"),d=setInterval((function(){u.closed&&(clearInterval(d),t.getData(),t.$message.info("操作完成！"))}),1e3);else e.$message.error(n)}))}}},v=g,w=(o("6b5a"),o("2877")),y=Object(w["a"])(v,r,a,!1,null,"77a97cfa",null);t["default"]=y.exports},"4d90":function(e,t,o){"use strict";var r=o("23e7"),a=o("0ccb").start,n=o("9a0c");r({target:"String",proto:!0,forced:n},{padStart:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},"50fc3":function(e,t,o){"use strict";o.d(t,"h",(function(){return n})),o.d(t,"e",(function(){return i})),o.d(t,"g",(function(){return s})),o.d(t,"f",(function(){return l})),o.d(t,"i",(function(){return c})),o.d(t,"d",(function(){return u})),o.d(t,"a",(function(){return d})),o.d(t,"b",(function(){return p})),o.d(t,"c",(function(){return m}));var r=o("b775"),a=o("d722");function n(e){return Object(r["a"])({url:a["a"].adminList,method:"get",params:e})}function i(e){return Object(r["a"])({url:a["a"].adminAdd,method:"post",data:e})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==t?Object(r["a"])({url:a["a"].adminEdit,method:t,data:e}):Object(r["a"])({url:a["a"].adminEdit,method:t,params:e})}function l(e){return Object(r["a"])({url:a["a"].adminDelete,method:"post",data:e})}function c(e){return Object(r["a"])({url:a["a"].adminRoleOptions,method:"get",params:e})}function u(e){return Object(r["a"])({url:a["a"].adminLogList,method:"get",params:e})}function d(e){return Object(r["a"])({url:a["a"].adminAllList,method:"get",params:e})}function p(e){return Object(r["a"])({url:a["a"].adminBindQrcode,method:"get",params:e})}function m(e){return Object(r["a"])({url:a["a"].adminBindQrcodeCancel,method:"post",data:e})}},"53ca":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));o("a4d3"),o("e01a"),o("d3b7"),o("d28b"),o("3ca3"),o("ddb0");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}},"6b5a":function(e,t,o){"use strict";o("daf0")},"9a0c":function(e,t,o){var r=o("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},daf0:function(e,t,o){},ed08:function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return s})),o.d(t,"c",(function(){return l}));var r=o("53ca"),a=(o("ac1f"),o("00b4"),o("d3b7"),o("25f0"),o("5319"),o("4d90"),o("1276"),o("e9c4"),o("a78e")),n=o.n(a);function i(e,t){if(0===arguments.length)return null;var o,a=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(r["a"])(e)?o=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&e.toString().length<=10&&(e*=1e3),o=new Date(e));var n={y:o.getFullYear(),m:o.getMonth()+1,d:o.getDate(),h:o.getHours(),i:o.getMinutes(),s:o.getSeconds(),a:o.getDay()},i=a.replace(/{([ymdhisa])+}/g,(function(e,t){var o=n[t];return"a"===t?["日","一","二","三","四","五","六"][o]:o.toString().padStart(2,"0")}));return i}function s(e,t){e=(""+e).length<=10?1e3*parseInt(e):+e;var o=new Date(e),r=Date.now(),a=(r-o)/1e3;return a<30?"刚刚":a<3600?Math.ceil(a/60)+"分钟前":a<86400?Math.ceil(a/3600)+"小时前":a<172800?"1天前":t?i(e,t):o.getMonth()+1+"月"+o.getDate()+"日"+o.getHours()+"时"+o.getMinutes()+"分"}function l(e){var t={utype:e.utype,token:e.token,mobile:e.mobile,userIminfo:e.user_iminfo};n.a.set("qscms_visitor",JSON.stringify(t),{expires:7})}}}]);