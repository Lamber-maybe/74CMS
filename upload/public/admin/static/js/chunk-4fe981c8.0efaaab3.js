(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fe981c8"],{"27f7":function(e,t,a){"use strict";a("2f72")},"2f72":function(e,t,a){},"49cd":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("CRM设置")])]),a("div",{staticClass:"box"},[a("div",{staticClass:"button"},[a("div",{class:"grade"==e.type?"selectButton":"",on:{click:function(t){return e.switchTemplate("grade")}}},[e._v("客户等级（生命周期）")]),a("div",{class:"configure"==e.type?"selectButton":"",on:{click:function(t){return e.switchTemplate("configure")}}},[e._v("客户配置")]),a("div",{class:"clue"==e.type?"selectButton":"",on:{click:function(t){return e.switchTemplate("clue")}}},[e._v("线索设置")]),a("div",{class:"label"==e.type?"selectButton":"",on:{click:function(t){return e.switchTemplate("label")}}},[e._v("标签设置")])])]),"grade"==e.type?a("div",{staticClass:"bottoms"},[a("p",{staticClass:"title1"},[e._v("当前客户生命周期："+e._s(e.open_count)+"个阶段")]),a("p",{staticClass:"title2"},[e._v("至多设置6个阶段，用于标记客户生命周期状态，首尾两个阶段不可编辑")]),a("div",{staticClass:"step"},[a("div",{staticClass:"step_box"},[a("div",{staticClass:"step_num"},[e._v("1")]),a("div",{staticClass:"step_input1"},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.step_name1,callback:function(t){e.step_name1=t},expression:"step_name1"}})],1)]),a("div",{staticClass:"step_box"},[a("div",{staticClass:"step_num"},[e._v("2")]),a("div",{class:e.step1_button?"step_input_button":"step_input_button1"},[a("div",{staticClass:"step_input"},[1==e.step1_button?a("el-input",{attrs:{readonly:""},model:{value:e.step_name2.name,callback:function(t){e.$set(e.step_name2,"name",t)},expression:"step_name2.name"}}):e._e(),0==e.step1_button?a("el-input",{attrs:{maxlength:"6","show-word-limit":""},model:{value:e.step_name2.name,callback:function(t){e.$set(e.step_name2,"name",t)},expression:"step_name2.name"}}):e._e()],1),1==e.step1_button?a("div",{staticClass:"step_button"},[a("span",{on:{click:function(t){e.step1_button=!1}}},[e._v("编辑")]),a("el-switch",{staticStyle:{"margin-left":"10px"},on:{change:function(t){return e.switchBut(e.step_name2)}},model:{value:e.step_name2.is_open,callback:function(t){e.$set(e.step_name2,"is_open",t)},expression:"step_name2.is_open"}})],1):e._e(),0==e.step1_button?a("div",{staticClass:"step_button"},[a("span",{on:{click:function(t){e.step1_button=!0}}},[e._v("取消")]),a("span",{staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.preservation(e.step_name2,"step1_button")}}},[e._v("保存")])]):e._e()])]),a("div",{staticClass:"step_box"},[a("div",{staticClass:"step_num"},[e._v("3")]),a("div",{class:e.step2_button?"step_input_button":"step_input_button1"},[a("div",{staticClass:"step_input"},[1==e.step2_button?a("el-input",{attrs:{readonly:""},model:{value:e.step_name3.name,callback:function(t){e.$set(e.step_name3,"name",t)},expression:"step_name3.name"}}):e._e(),0==e.step2_button?a("el-input",{attrs:{maxlength:"6","show-word-limit":""},model:{value:e.step_name3.name,callback:function(t){e.$set(e.step_name3,"name",t)},expression:"step_name3.name"}}):e._e()],1),1==e.step2_button?a("div",{staticClass:"step_button"},[a("span",{on:{click:function(t){e.step2_button=!1}}},[e._v("编辑")]),a("el-switch",{staticStyle:{"margin-left":"10px"},on:{change:function(t){return e.switchBut(e.step_name3)}},model:{value:e.step_name3.is_open,callback:function(t){e.$set(e.step_name3,"is_open",t)},expression:"step_name3.is_open"}})],1):e._e(),0==e.step2_button?a("div",{staticClass:"step_button"},[a("span",{on:{click:function(t){e.step2_button=!0}}},[e._v("取消")]),a("span",{staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.preservation(e.step_name3,"step2_button")}}},[e._v("保存")])]):e._e()])]),a("div",{staticClass:"step_box"},[a("div",{staticClass:"step_num"},[e._v("4")]),a("div",{class:e.step3_button?"step_input_button":"step_input_button1"},[a("div",{staticClass:"step_input"},[1==e.step3_button?a("el-input",{attrs:{readonly:""},model:{value:e.step_name4.name,callback:function(t){e.$set(e.step_name4,"name",t)},expression:"step_name4.name"}}):e._e(),0==e.step3_button?a("el-input",{attrs:{maxlength:"6","show-word-limit":""},model:{value:e.step_name4.name,callback:function(t){e.$set(e.step_name4,"name",t)},expression:"step_name4.name"}}):e._e()],1),1==e.step3_button?a("div",{staticClass:"step_button"},[a("span",{on:{click:function(t){e.step3_button=!1}}},[e._v("编辑")]),a("el-switch",{staticStyle:{"margin-left":"10px"},on:{change:function(t){return e.switchBut(e.step_name4)}},model:{value:e.step_name4.is_open,callback:function(t){e.$set(e.step_name4,"is_open",t)},expression:"step_name4.is_open"}})],1):e._e(),0==e.step3_button?a("div",{staticClass:"step_button"},[a("span",{on:{click:function(t){e.step3_button=!0}}},[e._v("取消")]),a("span",{staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.preservation(e.step_name4,"step3_button")}}},[e._v("保存")])]):e._e()])]),a("div",{staticClass:"step_box"},[a("div",{staticClass:"step_num"},[e._v("5")]),a("div",{class:e.step4_button?"step_input_button":"step_input_button1"},[a("div",{staticClass:"step_input"},[1==e.step4_button?a("el-input",{attrs:{readonly:""},model:{value:e.step_name5.name,callback:function(t){e.$set(e.step_name5,"name",t)},expression:"step_name5.name"}}):e._e(),0==e.step4_button?a("el-input",{attrs:{maxlength:"6","show-word-limit":""},model:{value:e.step_name5.name,callback:function(t){e.$set(e.step_name5,"name",t)},expression:"step_name5.name"}}):e._e()],1),1==e.step4_button?a("div",{staticClass:"step_button"},[a("span",{on:{click:function(t){e.step4_button=!1}}},[e._v("编辑")]),a("el-switch",{staticStyle:{"margin-left":"10px"},on:{change:function(t){return e.switchBut(e.step_name5)}},model:{value:e.step_name5.is_open,callback:function(t){e.$set(e.step_name5,"is_open",t)},expression:"step_name5.is_open"}})],1):e._e(),0==e.step4_button?a("div",{staticClass:"step_button"},[a("span",{on:{click:function(t){e.step4_button=!0}}},[e._v("取消")]),a("span",{staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.preservation(e.step_name5,"step4_button")}}},[e._v("保存")])]):e._e()])]),a("div",{staticClass:"step_box"},[a("div",{staticClass:"step_num"},[e._v("6")]),a("div",{staticClass:"step_input1"},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:e.step_name6,callback:function(t){e.step_name6=t},expression:"step_name6"}})],1)])])]):e._e(),"configure"==e.type?a("div",{staticClass:"bottoms_two"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"主动领取客户限制/天"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.configureData.customer_receive_limit.value,callback:function(t){e.$set(e.configureData.customer_receive_limit,"value",t)},expression:"configureData.customer_receive_limit.value"}}),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示销售当天能主动领取客户的限制数，0为不允许领取。 ")])],1),a("el-form-item",{attrs:{label:"未跟进掉入公海"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.configureData.customer_fall_seas.value,callback:function(t){e.$set(e.configureData.customer_fall_seas,"value",t)},expression:"configureData.customer_fall_seas.value"}}),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示销售未跟进自己的客户达到设置的天数后，客户会自动掉入公共客户中，0为不掉入。 ")])],1),a("el-form-item",{attrs:{label:"禁止领取期限(销售)"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.configureData.customer_forbidden_sale.value,callback:function(t){e.$set(e.configureData.customer_forbidden_sale,"value",t)},expression:"configureData.customer_forbidden_sale.value"}}),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示销售将客户丢入公客后多长时间不能再领取该客户，0为不允许领取。 ")])],1),a("el-form-item",{attrs:{label:"禁止领取期限(系统)"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.configureData.customer_forbidden_sys.value,callback:function(t){e.$set(e.configureData.customer_forbidden_sys,"value",t)},expression:"configureData.customer_forbidden_sys.value"}}),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示系统自动掉公客的客户掉入公客后多长时间不能再领取该客户，0为不允许领取。 ")])],1),a("el-form-item",{attrs:{label:"客户分配销售规则"}},[a("el-radio-group",{model:{value:e.configureData.customer_allocation_rule.value,callback:function(t){e.$set(e.configureData.customer_allocation_rule,"value",t)},expression:"configureData.customer_allocation_rule.value"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不分配")]),a("el-radio",{attrs:{label:"1"}},[e._v("自动分配")])],1)],1),1==e.configureData.customer_allocation_rule.value?a("el-form-item",{attrs:{label:"选择销售"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择销售"},model:{value:e.configureData.admin_id,callback:function(t){e.$set(e.configureData,"admin_id",t)},expression:"configureData.admin_id"}},e._l(e.customer_service,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.configureSubmit}},[e._v("保存")])],1)],1)],1):e._e(),"clue"==e.type?a("div",{staticClass:"bottoms_two"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"160px"}},[a("el-form-item",{attrs:{label:"主动领取线索限制/天"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.threadeData.thread_receive_limit.value,callback:function(t){e.$set(e.threadeData.thread_receive_limit,"value",t)},expression:"threadeData.thread_receive_limit.value"}}),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示销售当天能主动领取线索的限制数，0为不允许领取。 ")])],1),a("el-form-item",{attrs:{label:"未跟进掉入线索池"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.threadeData.thread_fall_seas.value,callback:function(t){e.$set(e.threadeData.thread_fall_seas,"value",t)},expression:"threadeData.thread_fall_seas.value"}}),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示销售未跟进自己的客户达到设置的天数后，客户会自动掉入线索池中，0为不掉入。 ")])],1),a("el-form-item",{attrs:{label:"禁止领取期限(销售)"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.threadeData.thread_forbidden_sale.value,callback:function(t){e.$set(e.threadeData.thread_forbidden_sale,"value",t)},expression:"threadeData.thread_forbidden_sale.value"}}),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示销售将客户丢入公客后多长时间不能再领取该客户，0为不允许领取。 ")])],1),a("el-form-item",{attrs:{label:"禁止领取期限(系统)"}},[a("el-input-number",{attrs:{min:0,max:9999},model:{value:e.threadeData.thread_forbidden_sys.value,callback:function(t){e.$set(e.threadeData.thread_forbidden_sys,"value",t)},expression:"threadeData.thread_forbidden_sys.value"}}),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示系统自动掉公客的客户掉入公客后多长时间不能再领取该客户，0为不允许领取。 ")])],1),a("el-form-item",{attrs:{label:"是否允许线索名称重复"}},[a("el-radio-group",{model:{value:e.threadeData.thread_duplicate_name.value,callback:function(t){e.$set(e.threadeData.thread_duplicate_name,"value",t)},expression:"threadeData.thread_duplicate_name.value"}},[a("el-radio",{attrs:{label:"0"}},[e._v("否")]),a("el-radio",{attrs:{label:"1"}},[e._v("是")])],1),a("span",{staticClass:"smalltip"},[a("i",{staticClass:"el-icon-info"}),e._v(" 表示录入线索时，线索名称是否可以重复 ")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.configureSubmit}},[e._v("保存")])],1)],1)],1):e._e(),"label"==e.type?a("div",{staticClass:"bottoms_two"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.labelTableData}},[a("el-table-column",{attrs:{label:"分类名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}],null,!1,2020036417)}),a("el-table-column",{attrs:{label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.order))])]}}],null,!1,244556328)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v("删除")])]}}],null,!1,2089099172)})],1),a("div",{staticClass:"bortton-page"},[a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.funAuditBatch}},[e._v(" 添加 ")])],1)],1)],1):e._e()]),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"标签名称:",prop:"name"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"排序:"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"number",min:0},model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1),a("el-form-item",["edit"==e.dialog_type?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]):e._e(),"add"==e.dialog_type?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onAdd("form")}}},[e._v("保存")]):e._e(),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},n=[],i=a("5530"),l=(a("b0c0"),a("d3b7"),a("25f0"),a("39f6")),o={name:"Config",data:function(){return{rules:{name:[{required:!0,message:"请输入标签名称",trigger:"blur"},{max:10,message:"长度在 0 到 10 个字符",trigger:"blur"}]},title:"添加",dialog_type:"add",dialogVisible:!1,configureData:[],labelTableData:[],threadeData:[],step1_button:!0,step2_button:!0,step3_button:!0,step4_button:!0,input:"",form:{id:0,name:"",order:0},type:"grade",value1:!0,loading:!1,step_name1:"新客户",step_name2:"",step_name3:"",step_name4:"",step_name5:"",step_name6:"完成 | 可选状态：流失客户/成交客户",customer_service:[],open_count:0}},created:function(){this.lifeCycleAll(),this.adminlists()},methods:{adminlists:function(){var e=this;Object(l["f"])().then((function(t){e.customer_service=t.data}))},lifeCycleAll:function(){var e=this;this.loading=!0,Object(l["Q"])().then((function(t){e.open_count=t.data.open_count,e.step_name1=t.data.res[0].name;var a=null;a=1==t.data.res[1].is_open,e.step_name2={name:t.data.res[1].name,id:t.data.res[1].id,is_open:a};var s=null;s=1==t.data.res[2].is_open,e.step_name3={name:t.data.res[2].name,id:t.data.res[2].id,is_open:s};var n=null;n=1==t.data.res[3].is_open,e.step_name4={name:t.data.res[3].name,id:t.data.res[3].id,is_open:n};var i=null;i=1==t.data.res[4].is_open,e.step_name5={name:t.data.res[4].name,id:t.data.res[4].id,is_open:i},e.loading=!1}))},switchBut:function(e){var t=this,a="";a=e.is_open?1:0,Object(l["S"])({id:e.id,is_open:a}).then((function(e){200==e.code&&(t.$message({type:"success",message:e.message}),t.lifeCycleAll())})).catch((function(e){t.lifeCycleAll()}))},preservation:function(e,t){var a=this;this.$confirm("保存后将更新所有客户的该状态名称，是否确认保存","提示",{confirmButtonText:"确定",cancelButtonText:"取消",title:"修改客户状态",type:"warning"}).then((function(){Object(l["R"])(e).then((function(e){200==e.code?(a.$message({type:"success",message:e.message}),a.lifeCycleAll(),a[t]=!0):a.$message({type:"error",message:e.message})}))})).catch((function(){}))},switchTemplate:function(e){var t=this;this.type=e,"configure"==this.type&&(this.loading=!0,Object(l["L"])({category:"customer"}).then((function(e){t.configureData=e.data,t.configureData.customer_allocation_rule.value=t.configureData.customer_allocation_rule.value.toString(),t.loading=!1}))),"clue"==this.type&&(this.loading=!0,Object(l["L"])({category:"thread"}).then((function(e){t.threadeData=e.data,t.threadeData.thread_duplicate_name.value=t.threadeData.thread_duplicate_name.value.toString(),t.threadeData.thread_allocation_rule.value=t.threadeData.thread_allocation_rule.value.toString(),t.loading=!1}))),"label"==this.type&&(this.loading=!0,Object(l["K"])().then((function(e){t.labelTableData=e.data,t.loading=!1})))},configureSubmit:function(){var e=this,t="";"configure"==this.type&&(t=this.configureData),"clue"==this.type&&(t=this.threadeData),Object(l["G"])(t).then((function(t){200==t.code?e.$message({type:"success",message:t.message}):e.$message({type:"error",message:t.message})}))},funAuditBatch:function(){this.form.id=0,this.form.name="",this.form.order=0,this.dialog_type="add",this.title="添加",this.dialogVisible=!0},handleEdit:function(e){this.form.id=e.id,this.form.name=e.name,this.form.order=e.order,this.dialog_type="edit",this.title="编辑",this.dialogVisible=!0},onAdd:function(e){var t=this,a=Object(i["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;Object(l["b"])(a).then((function(e){200==e.code?(t.$message({type:"success",message:e.message}),t.switchTemplate(t.type),t.dialogVisible=!1):t.$message({type:"error",message:e.message})}))}))},onSubmit:function(e){var t=this,a=Object(i["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;Object(l["I"])(a).then((function(e){200==e.code?(t.$message({type:"success",message:e.message}),t.switchTemplate(t.type),t.dialogVisible=!1):t.$message({type:"error",message:e.message})}))}))},handleDelete:function(e){var t=this;this.$confirm("是否确定删除此标签?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["D"])({id:e}).then((function(e){200==e.code?(t.$message({type:"success",message:e.message}),t.switchTemplate(t.type),t.dialogVisible=!1):t.$message({type:"error",message:e.message})}))})).catch((function(){}))},editConfig:function(){}}},c=o,r=(a("27f7"),a("2877")),u=Object(r["a"])(c,s,n,!1,null,"7d350795",null);t["default"]=u.exports}}]);