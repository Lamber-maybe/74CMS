(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9e0feb06"],{"3bdc":function(t,e,r){"use strict";r("ac65")},"52b5":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var i=r("b775"),a=r("d722");function o(t){return Object(i["a"])({url:a["a"].getClassify,method:"get",params:t})}},a8c9:function(t,e,r){"use strict";r.d(e,"d",(function(){return o})),r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return n})),r.d(e,"b",(function(){return l}));var i=r("b775"),a=r("d722");function o(t){return Object(i["a"])({url:a["a"].subsiteList,method:"get",params:t})}function s(t){return Object(i["a"])({url:a["a"].subsiteAdd,method:"post",data:t})}function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==e?Object(i["a"])({url:a["a"].subsiteEdit,method:e,data:t}):Object(i["a"])({url:a["a"].subsiteEdit,method:e,params:t})}function l(t){return Object(i["a"])({url:a["a"].subsiteDelete,method:"post",data:t})}},ac65:function(t,e,r){},beed:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("编辑分站")]),r("el-button",{staticStyle:{float:"right",padding:"0","margin-left":"14px"},attrs:{type:"text"},on:{click:function(e){return t.goto("/subsite/index")}}},[t._v(" 返回 ")]),r("el-button",{staticStyle:{float:"right",padding:"0"},attrs:{type:"text",disabled:t.issubmit},on:{click:function(e){return t.onSubmit("form")}}},[t._v(" 保存 ")])],1),r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",staticClass:"common-form",attrs:{model:t.form,"label-width":"120px","inline-message":!0,rules:t.rules}},[r("el-form-item",{attrs:{label:"分站名称",prop:"sitename"}},[r("el-input",{model:{value:t.form.sitename,callback:function(e){t.$set(t.form,"sitename",e)},expression:"form.sitename"}})],1),r("el-form-item",{attrs:{label:"绑定地区",prop:"citycategory_arr"}},[r("el-cascader",{attrs:{filterable:"",props:{checkStrictly:!0},"popper-class":"cancelRadio",options:t.options_citycategory,"show-all-levels":!1},model:{value:t.form.citycategory_arr,callback:function(e){t.$set(t.form,"citycategory_arr",e)},expression:"form.citycategory_arr"}})],1),r("el-form-item",{attrs:{label:"seo标题",prop:"title"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"seo关键词",prop:"keywords"}},[r("el-input",{model:{value:t.form.keywords,callback:function(e){t.$set(t.form,"keywords",e)},expression:"form.keywords"}})],1),r("el-form-item",{attrs:{label:"seo描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),r("el-form-item",{attrs:{label:"模板",prop:"tpl"}},[r("el-select",{attrs:{placeholder:"请选择模板"},model:{value:t.form.tpl,callback:function(e){t.$set(t.form,"tpl",e)},expression:"form.tpl"}},t._l(t.options_tpl,(function(t,e){return r("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"是否显示",prop:"is_display"}},[r("el-radio-group",{model:{value:t.form.is_display,callback:function(e){t.$set(t.form,"is_display",e)},expression:"form.is_display"}},[r("el-radio",{attrs:{label:1}},[t._v("显示")]),r("el-radio",{attrs:{label:0}},[t._v("不显示")])],1)],1),r("el-form-item",{attrs:{label:"排序",prop:"sort_id"}},[r("el-input",{model:{value:t.form.sort_id,callback:function(e){t.$set(t.form,"sort_id",e)},expression:"form.sort_id"}})],1),r("el-form-item",{attrs:{label:""}},[r("el-button",{attrs:{type:"primary",disabled:t.issubmit},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存")]),r("el-button",{on:{click:function(e){return t.goto("/subsite/index")}}},[t._v("返回")])],1)],1)],1)],1)},a=[],o=r("5530"),s=r("2909"),n=(r("d81d"),r("e9c4"),r("a8c9")),l=r("52b5"),c={data:function(){return{issubmit:!1,loading:!0,form:{sitename:"",district1:0,district2:0,district3:0,citycategory_arr:[],tpl:"",title:"",keywords:"",description:"",is_display:1,sort_id:0},options_citycategory:[],options_tpl:[],rules:{sitename:[{required:!0,message:"请输入分站名称",trigger:"blur"}],citycategory_arr:[{required:!0,message:"请选择绑定地区",trigger:"change"}],tpl:[{required:!0,message:"请选择模板",trigger:"change"}]}}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;this.loading=!0,Object(l["a"])({type:"citycategory,tplOfIndex"}).then((function(e){return t.options_tpl=Object(s["a"])(e.data.tplOfIndex),t.options_citycategory=Object(s["a"])(e.data.citycategory),t.options_citycategory=t.options_citycategory.map((function(t){if(t.children.length){var e=t.children;return e=e.map((function(t){return t.children.length?{label:t.label,value:t.value,children:t.children}:{label:t.label,value:t.value}})),{value:t.value,label:t.label,children:e}}return{value:t.value,label:t.label}})),Object(n["c"])({id:t.$route.query.id},"get")})).then((function(e){t.form=Object(o["a"])({},e.data.info),t.form.citycategory_arr=[],0!=e.data.info.district1&&t.form.citycategory_arr.push(e.data.info.district1),0!=e.data.info.district2&&t.form.citycategory_arr.push(e.data.info.district2),0!=e.data.info.district3&&t.form.citycategory_arr.push(e.data.info.district3),t.loading=!1})).catch((function(){t.loading=!1}))},onSubmit:function(t){var e=this,r=this;r.issubmit=!0,this.$refs[t].validate((function(t){if(!t)return r.issubmit=!1,!1;var i=JSON.parse(JSON.stringify(e.form)),a=i.citycategory_arr;i.district1=a[0],i.district2=void 0!==a[1]?a[1]:0,i.district3=void 0!==a[2]?a[2]:0,Object(n["c"])(i).then((function(t){return e.$message.success(t.message),setTimeout((function(){r.$router.push("/subsite/index")}),1500),!0})).catch((function(){return r.issubmit=!1,!1}))}))},goto:function(t){this.$router.push(t)}}},u=c,d=(r("3bdc"),r("2877")),f=Object(d["a"])(u,i,a,!1,null,"a35e129a",null);e["default"]=f.exports}}]);