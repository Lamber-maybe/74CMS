(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1751ecf9"],{"091d":function(t,e,r){},2341:function(t,e,r){"use strict";var o=r("b9b3"),a=r.n(o);a.a},"52b5":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var o=r("b775"),a=r("d722");function i(t){return Object(o["a"])({url:a["a"].getClassify,method:"get",params:t})}},"5e75":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("发布网络招聘会")]),r("el-button",{staticStyle:{float:"right",padding:"0","margin-left":"14px"},attrs:{type:"text"},on:{click:function(e){return t.goto("/jobfairol/list")}}},[t._v(" 返回 ")]),r("el-button",{staticStyle:{float:"right",padding:"0"},attrs:{type:"text"},on:{click:function(e){return t.onSubmit("form")}}},[t._v(" 保存 ")])],1),r("el-form",{ref:"form",staticClass:"common-form",attrs:{model:t.form,"label-width":"120px",rules:t.rules,"inline-message":!0}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),r("span",{staticClass:"smalltip"},[r("i",{staticClass:"el-icon-info"}),t._v(" (如：2017年5月1日医药行业主题招聘会) ")])],1),r("el-form-item",{attrs:{label:"举办日期",prop:"holddate"}},[r("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.holddate,callback:function(e){t.$set(t.form,"holddate",e)},expression:"form.holddate"}})],1),r("el-form-item",{attrs:{required:"",label:"缩略图",prop:"thumb"}},[r("el-upload",{staticClass:"thumb-uploader",attrs:{action:t.apiUpload,headers:t.headers,"show-file-list":!1,"on-success":t.handleThumbSuccess,"before-upload":t.beforeThumbUpload}},[t.form.thumb?r("img",{staticClass:"thumb",attrs:{src:t.thumbUrl}}):r("i",{staticClass:"el-icon-plus thumb-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"招聘会介绍",required:"",prop:"content"}},[r("div",{staticStyle:{border:"1px solid #ccc"}},[r("Toolbar",{staticStyle:{"border-bottom":"1px solid #ccc"},attrs:{editor:t.editor,defaultConfig:t.toolbarConfig}}),r("Editor",{staticStyle:{height:"400px","overflow-y":"hidden"},on:{onCreated:t.onCreated},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)]),r("el-form-item",{attrs:{required:"",label:"允许报名套餐",prop:"enable_setmeal_id"}},[r("el-checkbox-group",{model:{value:t.form.enable_setmeal_id,callback:function(e){t.$set(t.form,"enable_setmeal_id",e)},expression:"form.enable_setmeal_id"}},t._l(t.options_setmeal,(function(e,o){return r("el-checkbox",{key:o,attrs:{label:e.id}},[t._v(t._s(e.name))])})),1)],1),r("el-form-item",{attrs:{label:"仅认证企业报名"}},[r("el-switch",{model:{value:t.form.must_company_audit,callback:function(e){t.$set(t.form,"must_company_audit",e)},expression:"form.must_company_audit"}})],1),r("el-form-item",{attrs:{label:"要求简历完整度"}},[r("el-input",{attrs:{type:"number"},model:{value:t.form.min_complete_percent,callback:function(e){t.$set(t.form,"min_complete_percent",e)},expression:"form.min_complete_percent"}})],1),r("el-form-item",{attrs:{required:"",label:"联系客服",prop:"qrcode"}},[r("el-upload",{staticClass:"thumb-uploader",attrs:{action:t.apiUpload,headers:t.headers,"show-file-list":!1,"on-success":t.handleQrSuccess,"before-upload":t.beforeThumbUpload}},[t.form.qrcode?r("img",{staticClass:"thumb",attrs:{src:t.qrcodeUrl}}):r("i",{staticClass:"el-icon-plus thumb-uploader-icon"})])],1),r("el-form-item",{attrs:{label:""}},[r("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v("保存")]),r("el-button",{on:{click:function(e){return t.goto("/jobfairol/list")}}},[t._v("返回")])],1)],1)],1)],1)},a=[],i=(r("caad"),r("a15b"),r("d81d"),r("af93"),r("d3b7"),r("ac1f"),r("2532"),r("3ca3"),r("1276"),r("ddb0"),r("2b3d"),r("2909")),n=r("5f87"),s=r("97eb"),l=r("d722"),u=r("52b5"),d=(r("560e"),r("4e15")),c={components:{Editor:d["a"],Toolbar:d["b"]},data:function(){var t=this,e=function(e,r,o){r=t.editor.getText(),""===r?o(new Error("请输入招聘会介绍")):o()},r=function(e,r,o){r=t.form.thumb,""===r?o(new Error("请上传缩略图")):o()},o=function(e,r,o){r=t.form.qrcode,""===r?o(new Error("请上传客服二维码")):o()};return{editor:null,toolbarConfig:{excludeKeys:["fullScreen"]},thumbUrl:"",qrcodeUrl:"",apiUpload:window.global.RequestBaseUrl+l["a"].upload,headers:{admintoken:Object(n["e"])()},fileupload_size:"",fileupload_ext:"",options_setmeal:[],form:{id:"",title:"",thumb:"",holddate:"",content:"",enable_setmeal_id:[],must_company_audit:!1,min_complete_percent:"",qrcode:""},rules:{title:[{required:!0,message:"请填写标题",trigger:"blur"},{max:200,message:"长度在 1 到 200 个字符",trigger:"blur"}],holddate:[{required:!0,message:"请选择举办日期",trigger:"blur"}],content:[{validator:e,trigger:"blur"}],thumb:[{validator:r}],enable_setmeal_id:[{required:!0,message:"请选择允许报名套餐",trigger:"blur"}],qrcode:[{validator:o}]}}},computed:{config:function(){return this.$store.state.config}},mounted:function(){this.getSetmeal(),this.getJobfairOnline(),this.form.id=this.$route.query.id},beforeDestroy:function(){var t=this.editor;null!=t&&t.destroy()},created:function(){this.fileupload_size=this.config.fileupload_size,this.fileupload_ext=this.config.fileupload_ext},methods:{onCreated:function(t){this.editor=Object.seal(t),this.editor.getMenuConfig("uploadImage").headers={admintoken:Object(n["e"])()},this.editor.getMenuConfig("uploadImage").withCredentials=!0,this.editor.getMenuConfig("uploadImage").server=window.global.RequestBaseUrl+l["a"].uploadEditor,this.editor.getMenuConfig("uploadVideo").headers={admintoken:Object(n["e"])()},this.editor.getMenuConfig("uploadVideo").withCredentials=!0,this.editor.getMenuConfig("uploadVideo").server=window.global.RequestBaseUrl+l["a"].uploadEditorVideo},getJobfairOnline:function(){var t=this;this.infoLoading=!0;var e={id:this.$route.query.id};Object(s["h"])(e,"get").then((function(e){t.form=Object.assign(t.form,e.data.info),t.form.holddate=[1e3*t.form.starttime,1e3*t.form.endtime],t.form.enable_setmeal_id=t.form.enable_setmeal_id.split(","),t.form.enable_setmeal_id=t.form.enable_setmeal_id.map((function(t){return parseInt(t)})),t.form.must_company_audit=1===parseInt(t.form.must_company_audit),t.thumbUrl=e.data.thumbUrl,t.qrcodeUrl=e.data.qrcodeUrl,t.infoLoading=!1})).catch((function(){}))},handleThumbSuccess:function(t,e){if(200!==t.code)return this.$message.error(t.message),!1;this.thumbUrl=URL.createObjectURL(e.raw),this.form.thumb=t.data.file_id},handleQrSuccess:function(t,e){if(200!==t.code)return this.$message.error(t.message),!1;this.qrcodeUrl=URL.createObjectURL(e.raw),this.form.qrcode=t.data.file_id},beforeThumbUpload:function(t){var e=t.type.split("/"),r=e[1],o=this.fileupload_ext.split(",");return o.includes(r)?!(t.size/1024>this.fileupload_size)||(this.$message.error("上传文件最大为".concat(this.fileupload_size,"kb")),!1):(this.$message.error("上传文件格式不允许"),!1)},onSubmit:function(t){var e=this,r=this;this.form.content=this.editor.getHtml();var o=Object.assign({},this.form);this.$refs[t].validate((function(t){if(!t)return!1;o["starttime"]=new Date(o.holddate[0]).getTime()/1e3,o["endtime"]=new Date(o.holddate[1]).getTime()/1e3,o["must_company_audit"]=!0===o.must_company_audit?1:0,o["enable_setmeal_id"]=o.enable_setmeal_id.join(","),Object(s["h"])(o).then((function(t){return e.$message.success(t.message),setTimeout((function(){r.$router.push("/jobfairol/list")}),1500),!0})).catch((function(){}))}))},goto:function(t){this.$router.push(t)},getSetmeal:function(){var t=this;Object(u["a"])({type:"setmealList"}).then((function(e){t.options_setmeal=Object(i["a"])(e.data)})).catch((function(){}))}}},m=c,f=(r("6622"),r("2341"),r("2877")),b=Object(f["a"])(m,o,a,!1,null,"63258810",null);e["default"]=b.exports},6622:function(t,e,r){"use strict";var o=r("091d"),a=r.n(o);a.a},"97eb":function(t,e,r){"use strict";r.d(e,"i",(function(){return i})),r.d(e,"g",(function(){return n})),r.d(e,"f",(function(){return s})),r.d(e,"h",(function(){return l})),r.d(e,"b",(function(){return u})),r.d(e,"n",(function(){return d})),r.d(e,"e",(function(){return c})),r.d(e,"c",(function(){return m})),r.d(e,"j",(function(){return f})),r.d(e,"d",(function(){return b})),r.d(e,"o",(function(){return p})),r.d(e,"l",(function(){return h})),r.d(e,"k",(function(){return g})),r.d(e,"p",(function(){return _})),r.d(e,"a",(function(){return j})),r.d(e,"m",(function(){return O}));var o=r("b775"),a=r("d722");function i(t){return Object(o["a"])({url:a["a"].jobFairListOl,method:"get",params:t})}function n(t){return Object(o["a"])({url:a["a"].jobFairListOlDelete,method:"post",data:t})}function s(t){return Object(o["a"])({url:a["a"].jobFairListOlAdd,method:"post",data:t})}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==e?Object(o["a"])({url:a["a"].jobFairListOlEdit,method:e,data:t}):Object(o["a"])({url:a["a"].jobFairListOlEdit,method:e,params:t})}function u(t){return Object(o["a"])({url:a["a"].jobFairListOlCompanyList,method:"get",params:t})}function d(t){return Object(o["a"])({url:a["a"].jobFairListOlPersonalList,method:"get",params:t})}function c(t){return Object(o["a"])({url:a["a"].jobFairListOlSticky,method:"post",data:t})}function m(t){return Object(o["a"])({url:a["a"].jobFairListOlQrcode,method:"post",data:t})}function f(t){return Object(o["a"])({url:a["a"].jobFairListOlParAdd,method:"post",data:t})}function b(t){return Object(o["a"])({url:a["a"].jobFairListOlCompanySearch,method:"get",params:t})}function p(t){return Object(o["a"])({url:a["a"].jobFairListOlPersonalSearch,method:"get",params:t})}function h(t){return Object(o["a"])({url:a["a"].jobFairListOlStatus,method:"post",data:t})}function g(t){return Object(o["a"])({url:a["a"].jobFairListOlParticipateDelete,method:"post",data:t})}function _(t){return Object(o["a"])({url:a["a"].jobFairListOlQrService,method:"post",data:t})}function j(t){return Object(o["a"])({url:a["a"].jobFairListOlComBatchAdd,method:"post",data:t})}function O(t){return Object(o["a"])({url:a["a"].jobFairListOlPerBatchAdd,method:"post",data:t})}},b9b3:function(t,e,r){}}]);