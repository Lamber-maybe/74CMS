(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-081c7794"],{"17ea":function(t,e,s){t.exports=s.p+"static/img/5.99bf6490.jpg"},2017:function(t,e,s){"use strict";s("70ad")},"397a":function(t,e,s){"use strict";s("5bda")},"55cf":function(t,e,s){t.exports=s.p+"static/img/2.3d4f6d41.jpg"},"5bda":function(t,e,s){},"6ba6":function(t,e,s){var a={"./1.jpg":"ceb6","./2.jpg":"55cf","./3.jpg":"bcb2","./4.jpg":"a94a","./5.jpg":"17ea"};function n(t){var e=o(t);return s(e)}function o(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=o,t.exports=n,n.id="6ba6"},"70ad":function(t,e,s){},"9ed6":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login-container",style:t.serviceBg},[s("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:t.loginForm,rules:t.loginRules,"auto-complete":"on","label-position":"left"}},[s("div",{staticClass:"title-container"},[s("div",{staticClass:"t_wel"},[t._v("欢迎登录")]),s("div",{staticClass:"t_site"},[t._v(t._s(t.$store.state.config.sitename)+"管理中心")])]),1==t.$store.state.config.wechat_open?s("div",{staticClass:"tab_btn"},[s("div",{staticClass:"tab_text"},[t._v(" "+t._s(t.isTabLogin?"切换扫码登录":"切换账户登录")+" ")]),s("div",{class:t.isTabLogin?"btn_img":"btn_img active_login_img",on:{click:t.changeTabLogin}})]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isTabLogin,expression:"isTabLogin"}]},[s("el-form-item",{attrs:{prop:"username"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"user"}})],1),s("el-input",{ref:"username",attrs:{placeholder:"请输入用户名",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("span",{staticClass:"svg-container"},[s("svg-icon",{attrs:{"icon-class":"password"}})],1),s("el-input",{key:t.passwordType,ref:"password",attrs:{type:t.passwordType,placeholder:"请输入密码",name:"password",tabindex:"2","auto-complete":"on"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),s("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[s("svg-icon",{attrs:{"icon-class":"password"===t.passwordType?"eye":"eye-open"}})],1)],1),s("el-form-item",{attrs:{prop:"code"}},[s("el-input",{staticStyle:{float:"left",width:"58%"},attrs:{placeholder:"请输入验证码",name:"code","auto-complete":"off"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleLogin(e)}},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}}),s("img",{staticClass:"cap_img",attrs:{src:t.captchaSrc,alt:"点击刷新"},on:{click:t.refreshCaptcha}})],1),s("el-button",{attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v(" 立即登录 ")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isTabLogin,expression:"!isTabLogin"}],staticClass:"code_login"},[s("div",{staticClass:"code_img"},[""!=t.qrcode?s("img",{attrs:{src:t.qrcode}}):t._e()]),s("p",{staticClass:"tips_text"},[t._v(" 请使用"),s("span",{staticClass:"wx_text"},[t._v("微信扫描")]),t._v("二维码登录 ")])]),s("p",{staticClass:"bt_link"},[s("a",{attrs:{href:t.mobileUrl}},[t._v("使用移动端管理后台")])])]),s("div",{staticClass:"login_copyright"},[t._v(t._s(t.$store.state.config.bottom_other))])],1)},n=[],o=s("c24f");function i(t){t=t||32;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",s=e.length,a="",n=0;n<t;n++)a+=e.charAt(Math.floor(Math.random()*s));return a}var r={name:"Login",data:function(){var t=function(t,e,s){e.length<1?s(new Error("请输入密码")):s()};return{captchaSrc:"",loginForm:{username:"",password:"",code:"",secret_str:""},loginRules:{username:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",validator:t}],code:[{required:!0,trigger:"blur",message:"请输入验证码"}]},loading:!1,passwordType:"password",redirect:void 0,serviceBg:{backgroundImage:"url("+s("6ba6")("./"+this.getRandomInt(1,5)+".jpg")+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%",backgroundPosition:"center center"},mobileUrl:"",isTabLogin:!0,qrcode:"",scan_token:"",timer:""}},watch:{$route:{handler:function(t){this.redirect=t.query&&t.query.redirect},immediate:!0}},created:function(){this.refreshCaptcha(),this.mobileUrl=this.$store.state.config.sitedomain+this.$store.state.config.sitedir+"adminm"},beforeDestroy:function(){clearInterval(this.timer)},methods:{getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},refreshCaptcha:function(){var t=this;Object(o["a"])().then((function(e){t.loginForm.secret_str=e.data.secret_str,t.captchaSrc=e.data.src,t.loginForm.code=e.data.code})).catch((function(){}))},showPwd:function(){var t=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){t.$refs.password.focus()}))},handleLogin:function(){var t=this;this.$refs.loginForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.$store.dispatch("user/login",t.loginForm).then((function(){t.$router.push({path:t.redirect||"/"}),t.loading=!1})).catch((function(){t.refreshCaptcha(),t.loading=!1}))}))},changeTabLogin:function(){var t=this;this.isTabLogin=!this.isTabLogin,this.isTabLogin?clearInterval(this.timer):(this.scan_token=i(),Object(o["d"])({scan_token:this.scan_token}).then((function(e){t.qrcode=e.data,t.timer=setInterval(t.funScan,5e3)})).catch((function(){})))},funScan:function(){var t=this;this.$store.dispatch("user/scan",this.scan_token).then((function(){t.$router.push({path:t.redirect||"/"})})).catch((function(){}))}}},c=r,l=(s("2017"),s("397a"),s("5d22")),d=Object(l["a"])(c,a,n,!1,null,"b8165a64",null);e["default"]=d.exports},a94a:function(t,e,s){t.exports=s.p+"static/img/4.bc5c9a4c.jpg"},bcb2:function(t,e,s){t.exports=s.p+"static/img/3.46ce6a13.jpg"},ceb6:function(t,e,s){t.exports=s.p+"static/img/1.8fe91190.jpg"}}]);