(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11f27232"],{"4e6b":function(t,e,i){"use strict";i("ee3c")},c745:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("URL推送")])]),i("div",{staticClass:"tip"},[i("p",[t._v(" 全部数据将以历史数据新增，建议首次使用完整的提交1次。 ")]),i("p",[t._v(" 当天数据将以实时数据新增，不包括更新数据，只包含当天新增加的数据。 ")]),i("p",[t._v(" 断点会记录在浏览器本地缓存中，更新浏览器缓存后断点将消失。 ")])]),!1===t.submit_loading?i("el-form",{ref:"form",staticClass:"common-form",attrs:{model:t.form,"label-width":"120px",rules:t.rules,"inline-message":!0}},[i("el-form-item",{attrs:{label:"准入密钥"}},[i("el-input",{model:{value:t.form.linksubmit_token,callback:function(e){t.$set(t.form,"linksubmit_token",e)},expression:"form.linksubmit_token"}})],1),i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit("form")}}},[t._v(" 保存 ")])],1)],1):t._e(),!1===t.submit_loading?i("el-divider",{attrs:{"content-position":"left"}},[t._v(" 推送数据 ")]):t._e(),!1===t.submit_loading?i("div",t._l(t.list,(function(e,a){return i("div",{key:a,staticStyle:{"margin-bottom":"20px","margin-left":"20px"}},[i("el-button",{on:{click:function(i){return t.linkSubmit("today",e.type,1,0)}}},[t._v(" 当天"+t._s(e.type_name)+" ")]),i("el-button",{on:{click:function(i){return t.linkSubmit("all",e.type,1,0)}}},[t._v(" 全部"+t._s(e.type_name)+" ")])],1)})),0):t._e(),!1===t.submit_loading&&t.has_cache?i("el-button",{staticStyle:{"margin-bottom":"20px","margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.linkSubmit(t.cache_info.range,t.cache_info.type,t.cache_info.current_page,t.cache_info.success)}}},[t._v(" 断点推送 ")]):t._e(),!0===t.submit_loading?i("div",{staticClass:"submiting-block"},[i("el-progress",{attrs:{type:"circle",percentage:t.percentage,"stroke-width":18,width:220}}),"100"==t.percentage?i("p",{staticStyle:{"font-weight":"bold","font-size":"20px","text-align":"center","margin-bottom":"50px",color:"#333"}},[t._v(" 已将 "+t._s(t.tmp_tit)+" 推送到百度 ")]):i("p",{staticStyle:{"font-weight":"bold","font-size":"20px","text-align":"center","margin-bottom":"50px",color:"#333"}},[t._v(" 正在推送 "+t._s(t.tmp_tit)+" 到百度 ")]),i("p",[t._v(" 数据总量："+t._s(t.submit_info.total)+" 已经推送 "+t._s(t.submit_info.success)+" 条 ")]),i("p",[t._v(" 今日还可以推送 "+t._s(t.submit_info.remain)+" 条 ")])],1):t._e()],1)],1)},n=[],s=i("5530"),o=(i("a9e3"),i("b680"),i("1063")),c=i("b775"),r=i("d722");function l(t){return Object(c["a"])({url:r["a"].linksubmit,method:"get",params:t})}var m={data:function(){return{tmp_tit:"",has_cache:!1,cache_info:null,submit_loading:!1,submit_info:{max:0,total:0,success:0,remain:0},percentage:0,infoLoading:!1,form:{linksubmit_token:""},rules:{},list:[{type_name:"职位",type:"job"},{type_name:"企业",type:"company"},{type_name:"资讯",type:"article"}]}},created:function(){this.fetchData();var t=localStorage.getItem("linksubmit_success"),e=localStorage.getItem("linksubmit_current_page"),i=localStorage.getItem("linksubmit_range"),a=localStorage.getItem("linksubmit_type");t&&e&&i&&a&&(this.has_cache=!0,this.cache_info={success:t,current_page:e,range:i,type:a})},methods:{fetchData:function(){var t=this;this.infoLoading=!0;var e={};Object(o["j"])(e,"get").then((function(e){var i=Object(s["a"])({},e.data),a=i.linksubmit_token;t.form.linksubmit_token=a,t.infoLoading=!1})).catch((function(){}))},onSubmit:function(t){var e=this,i=Object(s["a"])({},this.form);this.$refs[t].validate((function(t){if(!t)return!1;Object(o["j"])(i).then((function(t){return e.$message.success(t.message),!0})).catch((function(){}))}))},linkSubmit:function(t,e,i,a){var n=this;this.tmp_tit="",this.tmp_tit+="today"==t?"今日":"全部",this.tmp_tit+="job"==e?"职位":"company"==e?"企业":"资讯";var s={type:e,range:t,page:i};l(s).then((function(s){1==s.data.status?(n.submit_loading=!0,n.submit_info.max=s.data.data.max,n.submit_info.total=s.data.data.total,n.submit_info.success=parseInt(a)+parseInt(s.data.data.success),n.submit_info.remain=s.data.data.remain,i++,n.percentage=Number(n.submit_info.success)/Number(n.submit_info.total)*100,n.percentage=n.percentage.toFixed(2),n.percentage=Number(n.percentage),localStorage.setItem("linksubmit_current_page",i),localStorage.setItem("linksubmit_range",t),localStorage.setItem("linksubmit_type",e),localStorage.setItem("linksubmit_success",n.submit_info.success),n.linkSubmit(t,e,i,n.submit_info.success)):2==s.data.status?0==n.submit_loading?n.$message.error(s.message):n.$message.success("已完成推送"):n.$alert(s.message,"提示",{confirmButtonText:"确定"})})).catch((function(){}))}}},u=m,_=(i("4e6b"),i("2877")),b=Object(_["a"])(u,a,n,!1,null,"78a46821",null);e["default"]=b.exports},ee3c:function(t,e,i){}}]);