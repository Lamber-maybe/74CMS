(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08c4fb86","chunk-91140928"],{"068e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDYuMC1jMDAyIDc5LjE2NDM2MCwgMjAyMC8wMi8xMy0wMTowNzoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY4NURGRDQ1M0ZEQzExRURBMEMyOTlDMDI0QzFERTIwIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY4NURGRDQ2M0ZEQzExRURBMEMyOTlDMDI0QzFERTIwIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Njg1REZENDMzRkRDMTFFREEwQzI5OUMwMjRDMURFMjAiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Njg1REZENDQzRkRDMTFFREEwQzI5OUMwMjRDMURFMjAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6RwHVIAAABRklEQVR42mL8Hy/IQA3ABKU9gfgZEP8nET+D6gXygC4C4mf/z2//TzIA6QHpBZoBc5Ekg4EH6f6B6JFE9hrVwoh48PohA0NPMAPD++cUGHTnNANDozMDw5X9DAy3T6JIsRBtyOMrDAy9oQwM3z8xMMjpMjB8fkvAoP/AWL13loFB2QQh9uk1A0NfOAMDM1B59nwGBlN/IsJoVgYDQydQ4dsnEP6/vwwMUxIYGLgFGBjq92I1BLtBLmlAm1kZGFbUQPhb+hgYvn1kYCjfyMAgKk9CrCkbMzDkLWZgOLedgWHrBAaGAwsZGIpWMTDwiuANQuyBrWnLwOBTyMCwvgPiEiEpgnGBO9Y8c4Dhws/AoGpOYYLk4GFgcMskOWU/Z7iwk/R8AdHzAkQwQssjLyCeC8QSJBr1FIiB0cywDRZG22C5mFwAEGAAlsWN73B8zvUAAAAASUVORK5CYII="},"0e2b":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"followup_wrapper"},[a("el-row",[a("el-col",{staticClass:"write",attrs:{span:12}},[a("div",{staticClass:"info"},[a("el-form",{ref:"followUp",attrs:{"label-width":"100px",rules:e.rules,model:e.followUp}},[a("el-form-item",{staticClass:"label_title",attrs:{label:"跟进方式：",prop:"mode"}},[a("el-select",{attrs:{disabled:e.disabled_state},model:{value:e.followUp.mode,callback:function(t){e.$set(e.followUp,"mode",t)},expression:"followUp.mode"}},e._l(e.visitStatusList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"联系人："}},["allClient"==e.currentNav||"myClient"==e.currentNav||"pubilceClient"==e.currentNav?a("el-select",{attrs:{placeholder:"请选择",disabled:e.disabled_state},model:{value:e.followUp.contacts,callback:function(t){e.$set(e.followUp,"contacts",t)},expression:"followUp.contacts"}},e._l(e.contactsData,(function(t){return a("el-option",{key:t.value,attrs:{label:t.name,value:t.value},nativeOn:{click:function(a){return e.contactsClick(t)}}})})),1):a("el-input",{attrs:{value:e.followUp.link_man+" | "+e.followUp.link_mobile,placeholder:"请输入内容",disabled:!0}})],1),a("el-form-item",{attrs:{label:"下次跟进："}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.disabled_state,"picker-options":e.pickerOptions,type:"datetime",placeholder:"选择日期时间"},model:{value:e.followUp.next_time,callback:function(t){e.$set(e.followUp,"next_time",t)},expression:"followUp.next_time"}})],1),a("el-form-item",{attrs:{label:"跟进结果：",prop:"result"}},[a("el-input",{attrs:{rows:9,type:"textarea",disabled:e.disabled_state},model:{value:e.followUp.result,callback:function(t){e.$set(e.followUp,"result",t)},expression:"followUp.result"}})],1),a("el-form-item",{attrs:{label:"添加图片："}},[a("el-upload",{ref:"uploadFile",staticClass:"upload-demo",attrs:{disabled:e.disabled_state,headers:e.headerObj,"on-remove":function(t,a){e.removeImg(t,a)},drag:"",action:e.upload_url,multiple:"","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将图片拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__text"},[e._v("图片上传仅支持jpg/png格式")])])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.disabled_state},nativeOn:{click:function(t){return e.conserveVisitLog("followUp")}}},[e._v("保存跟进记录")])],1)],1)],1)]),a("el-col",{staticClass:"history",attrs:{span:12}},[a("div",{staticClass:"title"},[a("span",{staticClass:"text"},[e._v("历史跟进")]),a("div",{staticClass:"total"},[e._v(" 共有 "),a("span",{staticClass:"sum"},[e._v(e._s(e.total)+"条")]),e._v(" 跟进 ")])]),a("div",{staticClass:"history_list"},e._l(e.record,(function(t){return a("div",{staticClass:"history_item"},[a("div",{staticClass:"user"},[e._v(e._s(t.username))]),a("div",{staticClass:"info"},[a("div",{staticClass:"followup"},[a("div",{staticClass:"text"},[a("span",{staticClass:"color"},[e._v(e._s(t.username))]),e._v(" "+e._s(t.mode)+" "),a("span",{staticClass:"color"},[e._v(e._s(t.name))])]),a("div",{staticClass:"text_right"},[a("span",{staticClass:"time"},[e._v(e._s(t.create_time))])])]),a("div",{staticClass:"content"},[e._v(" "+e._s(t.result)+" "),""!=t.enclosure&&t.enclosure.length>0?a("div",e._l(t.enclosure,(function(e){return a("div",{staticClass:"img"},[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{cover:"",src:e,"preview-src-list":[e]}})],1)})),0):e._e()])])])})),0),e.listParams.total>=10?a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":e.listParams.page,"page-sizes":[10,15,20,30,40],layout:"total, sizes, prev, pager, next, jumper","page-size":e.listParams.page_size,total:e.total},on:{"size-change":e.handlePageSize,"current-change":e.handleCurrentSize}})],1):e._e()])],1)],1)},l=[],s=a("5530"),n=(a("b0c0"),a("ac1f"),a("1276"),a("a15b"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("39f6")),o=a("5f87"),r={name:"FollowUpRecord",props:["uid","clue_id","contacts","mobile"],data:function(){return{loading:!1,disabled_state:!1,listParams:{page:1,page_size:10,total:0},pickerOptions:{selectableRange:function(){return"00:00:00 - 23:59:59"}(),disabledDate:function(e){return e.getTime()<Date.now()-864e5}},contactsData:[],rules:{mode:[{required:!0,message:"请选择跟进方式",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"}],result:[{required:!0,message:"请输入跟进结果",trigger:"blur"}]},followUp:{utype:0,type:"",contacts:"",link_man:"",link_mobile:"",mode:"",next_time:"",result:"",enclosure:[]},visitStatusList:[{label:"当面拜访",value:"1"},{label:"电话拜访",value:"2"},{label:"网络拜访",value:"3"},{label:"其它拜访",value:"0"}],addParams:{id:"",result:""},addListId:"",record:[],total:0,upload_url:"",headerObj:"",currentNav:"",clue_ids:0,user_id:0}},watch:{contacts:function(e){this.followUp.link_man=e},mobile:function(e){this.followUp.link_mobile=e},uid:function(e){"allClient"==this.currentNav&&"myClient"==this.currentNav&&"pubilceClient"==this.currentNav||(this.contactList(e),this.followUpList(e)),this.user_id=e},clue_id:function(e){this.clue_ids=e}},created:function(){this.currentNav=this.$route.name,"wholeClue"!=this.currentNav&&"wholeInternationalWaters"!=this.currentNav&&"allClient"!=this.currentNav&&"pubilceClient"!=this.currentNav||(this.disabled_state=!0),"wholeClue"==this.currentNav||"wholeMy"==this.currentNav||"wholeInternationalWaters"==this.currentNav?(this.followUpList(),this.followUp.type=1):(this.followUp.type=2,this.followUp.utype=1),this.upload_url=window.global.RequestBaseUrl+"/upload/index",this.headerObj={admintoken:Object(o["e"])()}},methods:{handlePageSize:function(e){this.listParams.page_size=e,this.followUpList()},handleCurrentSize:function(e){this.listParams.page=e,this.followUpList()},contactsClick:function(e){var t=e.name.split(" | ");this.followUp.link_man=t[0],this.followUp.link_mobile=t[1]},contactList:function(e){var t=this;Object(n["w"])({uid:e}).then((function(e){if(e.data.length>0)for(var a=0;a<=e.data.length-1;a++)t.contactsData.push({name:e.data[a].contact+" | "+e.data[a].mobile,value:e.data[a].id})})).catch((function(){}))},followUpList:function(e){var t=this,a="";a="allClient"==this.currentNav||"myClient"==this.currentNav||"pubilceClient"==this.currentNav?0!=this.clue_id?{clue_id:this.clue_ids,uid:e,page:this.listParams.page,pagesize:this.listParams.page_size}:{uid:e,page:this.listParams.page,pagesize:this.listParams.page_size}:{clue_id:this.clue_id,page:this.listParams.page,pagesize:this.listParams.page_size},this.loading=!0,Object(n["J"])(a).then((function(e){if(e.data.items.length>0){t.record=e.data.items;for(var a=0;a<=t.record.length-1;a++)t.record[a].enclosure=t.record[a].enclosure.split(",");t.total=e.data.pages.record_num,t.listParams.total=e.data.pages.record_num,t.listParams.page=e.data.pages.now_page}t.loading=!1})).catch((function(){t.loading=!1}))},conserveVisitLog:function(e){var t=this;if(!0===this.submitLoading)return!1;this.submitLoading=!0;var a=Object(s["a"])({},this.followUp);this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;"allClient"==t.currentNav||"myClient"==t.currentNav||"pubilceClient"==t.currentNav?(a.clue_id=t.clue_ids,a.uid=t.user_id):a.clue_id=t.clue_id,""!=a.enclosure?a.enclosure=a.enclosure.join(","):a.enclosure="",a.next_time=new Date(a.next_time).getTime()/1e3,Object(n["c"])(a).then((function(e){200==e.code?(t.$message.success(e.message),"allClient"==t.currentNav||"myClient"==t.currentNav||"pubilceClient"==t.currentNav?(t.followUpList(t.user_id),t.$emit("companyDetails")):(t.followUpList(),t.$emit("clueDetails"))):t.$message.error(e.message),t.followUp.mode="",t.followUp.next_time="",t.followUp.result="",t.followUp.enclosure=[],t.$refs.uploadFile.clearFiles(),t.submitLoading=!1})).catch((function(){t.submitLoading=!1}))}))},handleAvatarSuccess:function(e,t){URL.createObjectURL(t.raw),e.data&&this.followUp.enclosure.push(e.data.file_url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,i=e.size/1024/1024<2;return this.followUp.enclosure.length>=6?(this.$message.error("图片最多可以上传6张"),!1):(t||a||this.$message.error("上传图片只能是 JPG / PNG 格式!"),i||this.$message.error("上传图片大小不能超过 2MB!"),t&&i||a)},removeImg:function(e,t){for(var a=this.followUp.enclosure,i=0;i<=a.length-1;i++)a[i]==e.response.data.file_url&&this.$delete(a,i);this.followUp.enclosure=a}}},c=r,u=(a("7f45"),a("2877")),d=Object(u["a"])(c,i,l,!1,null,"7ced14a6",null);t["a"]=d.exports},"2de5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAMCAYAAAC9QufkAAAAvklEQVQokYWRMQoCMRBFX8TSwgvsFazsdHuvoIV29tp4AxGEbcVym20FO7FcEW0srF3FO9hHAgnENTv7IJBh8mfC/0prjWE0mTeADdAHTsAqS5MXAmo4nrnuFph6Tz9AB6gcYLblgHbC9XJB3Ouaawt42l7o5M3ytN3+yKN4S791KCOObREB9/Pl1rb1ARiIameYNS2yw65ZmhS1q31xmboEfLdDiAn4boeOlMC/2yEqEvhxO4SYgGiYoTIB4Atfl1UFq1kTBwAAAABJRU5ErkJggg=="},"39a0":function(e,t,a){"use strict";a.r(t),a.d(t,"export_table_to_excel",(function(){return r})),a.d(t,"export_json_to_excel",(function(){return c}));a("d3b7"),a("c19f"),a("ace4"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7");function i(e){for(var t=[],a=e.querySelectorAll("tr"),i=[],l=0;l<a.length;++l){for(var s=[],n=a[l],o=n.querySelectorAll("td"),r=0;r<o.length;++r){var c=o[r],u=c.getAttribute("colspan"),d=c.getAttribute("rowspan"),p=c.innerText;if(""!==p&&p==+p&&(p=+p),i.forEach((function(e){if(l>=e.s.r&&l<=e.e.r&&s.length>=e.s.c&&s.length<=e.e.c)for(var t=0;t<=e.e.c-e.s.c;++t)s.push(null)})),(d||u)&&(d=d||1,u=u||1,i.push({s:{r:l,c:s.length},e:{r:l+d-1,c:s.length+u-1}})),s.push(""!==p?p:null),u)for(var f=0;f<u-1;++f)s.push(null)}t.push(s)}return[t,i]}function l(e,t){t&&(e+=1462);var a=Date.parse(e);return(a-new Date(Date.UTC(1899,11,30)))/864e5}function s(e,t){for(var a={},i={s:{c:1e7,r:1e7},e:{c:0,r:0}},s=0;s!=e.length;++s)for(var n=0;n!=e[s].length;++n){i.s.r>s&&(i.s.r=s),i.s.c>n&&(i.s.c=n),i.e.r<s&&(i.e.r=s),i.e.c<n&&(i.e.c=n);var o={v:e[s][n]};if(null!=o.v){var r=XLSX.utils.encode_cell({c:n,r:s});"number"===typeof o.v?o.t="n":"boolean"===typeof o.v?o.t="b":o.v instanceof Date?(o.t="n",o.z=XLSX.SSF._table[14],o.v=l(o.v)):o.t="s",a[r]=o}}return i.s.c<1e7&&(a["!ref"]=XLSX.utils.encode_range(i)),a}function n(){if(!(this instanceof n))return new n;this.SheetNames=[],this.Sheets={}}function o(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),i=0;i!=e.length;++i)a[i]=255&e.charCodeAt(i);return t}function r(e){var t=document.getElementById(e);console.log("a");var a=i(t),l=a[1],r=a[0],c="SheetJS";console.log(r);var u=new n,d=s(r);d["!merges"]=l,u.SheetNames.push(c),u.Sheets[c]=d;var p=XLSX.write(u,{bookType:"xlsx",bookSST:!1,type:"binary"});saveAs(new Blob([o(p)],{type:"application/octet-stream"}),"test.xlsx")}function c(e,t,a){var i=t;i.unshift(e);var l="SheetJS",r=new n,c=s(i);r.SheetNames.push(l),r.Sheets[l]=c;var u=XLSX.write(r,{bookType:"xlsx",bookSST:!1,type:"binary"}),d=a||"列表";saveAs(new Blob([o(u)],{type:"application/octet-stream"}),d+".xlsx")}a("0fd4"),a("df1a"),a("1447")},"4e94":function(e,t,a){e.exports=a.p+"static/img/renew.4d34b632.png"},"5ab5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAMCAYAAAC9QufkAAAAcElEQVQokWP4//8/DDP9//9/5v///69CaUUkOawYWRCkARl8JmQAiDj8nzxwmImBfMCI7AzZ////v0dyww5CfmYEux0BZBkYGGwZGBhOMjAw3CXoJgKm440BQprxxsDgCG1sGG8MoIc2NoA9BhgYGACzIKLIwi8QQAAAAABJRU5ErkJggg=="},6797:function(e,t,a){},"7f45":function(e,t,a){"use strict";a("6797")},df1a:function(e,t,a){a("ac1f"),a("466d"),a("d3b7"),a("b0c0"),a("1276"),a("a15b"),a("25f0"),a("fb6a"),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(a){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},a=function(){this.data=[]},i=function(e,t,a){this.data=e,this.size=e.length,this.type=t,this.encoding=a},l=a.prototype,s=i.prototype,n=e.FileReaderSync,o=function(e){this.code=this[this.name=e]},r="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=r.length,u=e.URL||e.webkitURL||e,d=u.createObjectURL,p=u.revokeObjectURL,f=u,h=e.btoa,g=e.atob,m=e.ArrayBuffer,b=e.Uint8Array;i.fake=s.fake=!0;while(c--)o.prototype[r[c]]=c+1;return u.createObjectURL||(f=e.URL={}),f.createObjectURL=function(e){var t,a=e.type;return null===a&&(a="application/octet-stream"),e instanceof i?(t="data:"+a,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):d?d.call(u,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(u,e)},l.append=function(e){var a=this.data;if(b&&(e instanceof m||e instanceof b)){for(var l="",s=new b(e),r=0,c=s.length;r<c;r++)l+=String.fromCharCode(s[r]);a.push(l)}else if("Blob"===t(e)||"File"===t(e)){if(!n)throw new o("NOT_READABLE_ERR");var u=new n;a.push(u.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&g?a.push(g(e.data)):"URI"===e.encoding?a.push(decodeURIComponent(e.data)):"raw"===e.encoding&&a.push(e.data):("string"!==typeof e&&(e+=""),a.push(unescape(encodeURIComponent(e))))},l.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},l.toString=function(){return"[object BlobBuilder]"},s.slice=function(e,t,a){var l=arguments.length;return l<3&&(a=null),new i(this.data.slice(e,l>1?t:this.data.length),a,this.encoding)},s.toString=function(){return"[object Blob]"},s.close=function(){this.size=this.data.length=0},a}(e);e.Blob=function(e,a){var i=a&&a.type||"",l=new t;if(e)for(var s=0,n=e.length;s<n;s++)l.append(e[s]);return l.getBlob(i)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this)}}]);