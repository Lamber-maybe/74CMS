(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fae8c722"],{"21ed":function(e,t,i){},"23a7":function(e,t,i){"use strict";i("649a")},"36e4":function(e,t,i){},"49ac":function(e,t,i){"use strict";i("c923")},"649a":function(e,t,i){},"7db0":function(e,t,i){"use strict";var a=i("23e7"),s=i("b727").find,l=i("44d2"),n=i("ae40"),c="find",o=!0,r=n(c);c in[]&&Array(1)[c]((function(){o=!1})),a({target:"Array",proto:!0,forced:o||!r},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),l(c)},"9ff4":function(e,t,i){"use strict";i("36e4")},b6a7:function(e,t,i){"use strict";i.d(t,"e",(function(){return l})),i.d(t,"l",(function(){return n})),i.d(t,"f",(function(){return c})),i.d(t,"g",(function(){return o})),i.d(t,"i",(function(){return r})),i.d(t,"d",(function(){return d})),i.d(t,"h",(function(){return u})),i.d(t,"m",(function(){return m})),i.d(t,"a",(function(){return f})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return p})),i.d(t,"n",(function(){return v})),i.d(t,"p",(function(){return _})),i.d(t,"o",(function(){return b})),i.d(t,"j",(function(){return g})),i.d(t,"k",(function(){return C}));var a=i("b775"),s=i("d722");function l(e){return Object(a["a"])({url:s["a"].baseConfig,method:"get",params:e})}function n(e){return Object(a["a"])({url:s["a"].baseConfig,method:"post",data:e})}function c(e){return Object(a["a"])({url:s["a"].getCompanyClueList,method:"post",data:e})}function o(e){return Object(a["a"])({url:s["a"].getConsumeRecordList,method:"post",data:e})}function r(e){return Object(a["a"])({url:s["a"].importClue,method:"post",data:e})}function d(e){return Object(a["a"])({url:s["a"].getAccountBalance,method:"get",params:e})}function u(e){return Object(a["a"])({url:s["a"].getContactList,method:"get",params:e})}function m(e){return Object(a["a"])({url:s["a"].setAsMainContact,method:"post",data:e})}function f(e){return Object(a["a"])({url:s["a"].clueAddContact,method:"post",data:e})}function h(e){return Object(a["a"])({url:s["a"].clueEditContact,method:"post",data:e})}function p(e){return Object(a["a"])({url:s["a"].deleteContact,method:"post",data:e})}function v(e){return Object(a["a"])({url:s["a"].verifyRepeatClueName,method:"get",params:e})}function _(e){return Object(a["a"])({url:s["a"].verifyRepeatMobile,method:"get",params:e})}function b(e){return Object(a["a"])({url:s["a"].verifyRepeatCompany,method:"get",params:e})}function g(e){return Object(a["a"])({url:s["a"].mergeClueToCompany,method:"post",data:e})}function C(e){return Object(a["a"])({url:s["a"].queryCacheIsExists,method:"post",data:e})}},beb9:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.title))])]),a("div",{staticClass:"list-search"},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"440px"},attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.funSearchKeyword.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-select",{staticClass:"input-sel",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.key_type,callback:function(t){e.key_type=t},expression:"key_type"}},[a("el-option",{attrs:{label:"线索名称",value:"1"}}),a("el-option",{attrs:{label:"手机号码",value:"2"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.funSearchKeyword},slot:"append"})],1),a("div",{staticStyle:{float:"right","z-index":"1",position:"relative"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.goto("/user/company/crm/wholeAdd")}}},[e._v(" 新增线索 ")])],1)],1),""!=e.saleFilter||""!=e.industryFilter||""!=e.regionFilter||""!=e.createdByFilter||""!=e.collectionFilter||""!=e.followCountFilter?a("div",{staticClass:"filterCriteria"},[a("div",{staticStyle:{float:"left",display:"inline-block","margin-top":"6px"}},[e._v("已选条件：")]),a("div",{staticStyle:{float:"left",display:"inline-block",width:"80%"}},[""!=e.saleFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("所属销售："+e._s(e.saleFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.saleFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.industryFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("客户行业："+e._s(e.industryFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.industryFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.regionFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("所在地区："+e._s(e.regionFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.regionFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.createdByFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("创建人："+e._s(e.createdByFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.createdByFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.collectionFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("领取时间："+e._s(e.collectionFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.collectionFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e(),""!=e.followCountFilter?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("跟进次数："+e._s(e.followCountFilter.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.followCountFilter.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e()]),a("div",{staticStyle:{float:"right",display:"inline-block","margin-top":"6px",color:"#409eff","font-size":"13px"},on:{click:function(t){return e.reset("all")}}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 清空条件 ")]),a("div",{staticStyle:{clear:"both"}})]):e._e(),a("div",{staticStyle:{position:"relative","padding-top":"15px"}},[a("span",{staticClass:"checkboxName"},[e._v("ID")]),a("div",{class:""!=e.saleFilter||""!=e.industryFilter||""!=e.regionFilter||""!=e.createdByFilter||""!=e.collectionFilter||""!=e.followCountFilter?"setField_s":"setField"},[a("el-popover",{attrs:{placement:"bottom-start",width:"220",trigger:"manual"},model:{value:e.visiblepop,callback:function(t){e.visiblepop=t},expression:"visiblepop"}},[a("div",{staticClass:"setField_h"},e._l(e.fieldData,(function(t){return a("div",{staticClass:"setFields"},[1==t.select?a("input",{attrs:{type:"checkbox",name:t.name,checked:""},domProps:{value:t.field},on:{change:function(i){return e.select(t.field)}}}):e._e(),0==t.select?a("input",{attrs:{type:"checkbox",name:t.name},domProps:{value:t.field},on:{change:function(i){return e.select(t.field)}}}):e._e(),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name))])])})),0),a("el-button",{class:"menu"==e.menu_icon?"field_s":"field_s_select",attrs:{slot:"reference"},on:{click:e.menu},slot:"reference"},["menu"==e.menu_icon?a("img",{attrs:{src:i("2de5"),alt:""}}):e._e(),"menu_select"==e.menu_icon?a("img",{attrs:{src:i("5ab5"),alt:""}}):e._e()]),a("div",{staticStyle:{"margin-top":"10px","margin-right":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.setFieldClose()}}},[e._v("关闭")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.setFieldConfirm()}}},[e._v("确认")])],1)],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"v-loading":e.loading,data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#f9f9f9","border-right":"1px solid #e4e6eb"},border:"",stripe:"",height:e.tabelHeight},on:{"sort-change":e.sortTable,"selection-change":e.handleSelectionChange,"cell-mouse-enter":e.cellEnter,"cell-mouse-leave":e.cellLeave,"select-all":e.cellEnter}},[a("el-table-column",{attrs:{type:"selection",width:"80",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row,s=t.$index;return[e.columnCheckedId==i.id||e.checkedList[s]?a("div",{on:{click:function(e){e.stopPropagation()}}},[a("el-checkbox",{on:{change:function(t){return e.cellCheckbox(i,s)}},model:{value:e.checkedList[s],callback:function(t){e.$set(e.checkedList,s,t)},expression:"checkedList[$index]"}})],1):a("span",[e._v(e._s(i.id))])]}}])}),a("el-table-column",{attrs:{fixed:"",type:"text",width:"200",label:"线索名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[""==t.row.name?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(t.row.name)+" ")]),""!=t.row.tripartite_id?a("span",{staticClass:"mlLabel"},[e._v("名录")]):e._e()])]}}])}),e._l(e.fieldData,(function(t){return 1==t.is_locking&&1==t.select?a("el-table-column",{attrs:{fixed:"",sortable:t.is_sortable,prop:t.field,width:t.width},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{class:"custom"==t.is_sortable?"sotrTime":"",on:{mouseenter:function(i){return e.locks(t.field)},mouseleave:function(i){return e.locks(t.field)}}},[a("span",[e._v(e._s(t.name))]),a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},["admin_username"==t.field?a("div",[a("el-checkbox-group",{staticStyle:{height:"250px"}},e._l(e.saleScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.saleScreen,callback:function(t){e.saleScreen=t},expression:"saleScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"trade"==t.field?a("div",[a("el-checkbox-group",e._l(e.industryScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.industryScreen,callback:function(t){e.industryScreen=t},expression:"industryScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"district"==t.field?a("div",[a("el-cascader-panel",{attrs:{props:e.props,clearable:"",options:e.regionScreenData},model:{value:e.regionScreen,callback:function(t){e.regionScreen=t},expression:"regionScreen"}})],1):e._e(),"collection_time"==t.field?a("div",[a("el-checkbox-group",e._l(e.collectionScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.collectionScreen,callback:function(t){e.collectionScreen=t},expression:"collectionScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"follow_count"==t.field?a("div",[a("el-checkbox-group",e._l(e.followCountScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.followCountScreen,callback:function(t){e.followCountScreen=t},expression:"followCountScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"creat_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.createdByScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.createdByScreen,callback:function(t){e.createdByScreen=t},expression:"createdByScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.reset(t.field)}}},[e._v("重置 ")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1),"admin_username"==t.field||"trade"==t.field||"district"==t.field||"creat_username"==t.field||"collection_time"==t.field||"follow_count"==t.field?a("div",{staticClass:"drop_down",attrs:{slot:"reference"},slot:"reference"}):e._e()]),1==t.is_lock_display?a("div",{staticClass:"unlock_display",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e(),0==t.is_lock_display?a("div",{staticClass:"unlock",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e()],1)]}},{key:"default",fn:function(i){return["admin_username"==t.field?a("div",[""==i.row.admin_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.admin_username)+" ")])]):e._e(),"contacts"==t.field?a("div",[""==i.row.contacts?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.contacts)+" ")])]):e._e(),"mobile"==t.field?a("div",[""==i.row.mobile||null==i.row.mobile?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.mobile)+" "),a("div",{staticClass:"dial",attrs:{title:"拨打联系人手机号"}},[a("div",{staticClass:"disal_img",on:{click:function(t){return e.clickDial(i.row.mobile,i.row.name)}}})])])]):e._e(),"weixin"==t.field?a("div",[""==i.row.weixin?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.weixin)+" ")])]):e._e(),"collection_time"==t.field?a("div",[""==i.row.collection_time?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.collection_time)+" ")])]):e._e(),"trade"==t.field?a("div",[""==i.row.trade?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.trade)+" ")])]):e._e(),"district"==t.field?a("div",[""==i.row.district?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.district)+" ")])]):e._e(),"address"==t.field?a("div",[""==i.row.address?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.address)+" ")])]):e._e(),"updatetime"==t.field?a("div",[""==i.row.updatetime?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.updatetime)+" ")])]):e._e(),"follow_count"==t.field?a("div",[""==i.row.follow_count?a("span",[e._v(" 0 ")]):a("span",[e._v(" "+e._s(i.row.follow_count)+" ")])]):e._e(),"creat_username"==t.field?a("div",[""==i.row.creat_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.creat_username)+" ")])]):e._e(),"remark"==t.field?a("div",[""==i.row.remark?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.remark)+" ")])]):e._e()]}}],null,!0)}):e._e()})),e._l(e.fieldData,(function(t){return 0==t.is_locking&&1==t.select?a("el-table-column",{attrs:{prop:t.field,sortable:t.is_sortable,width:t.width},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{class:"custom"==t.is_sortable?"sotrTime":"",on:{mouseenter:function(i){return e.locks(t.field)},mouseleave:function(i){return e.locks(t.field)}}},[a("span",[e._v(e._s(t.name))]),a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},["admin_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.saleScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.saleScreen,callback:function(t){e.saleScreen=t},expression:"saleScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"trade"==t.field?a("div",[a("el-checkbox-group",e._l(e.industryScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.industryScreen,callback:function(t){e.industryScreen=t},expression:"industryScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"district"==t.field?a("div",[a("el-cascader-panel",{attrs:{props:e.props,clearable:"",options:e.regionScreenData},model:{value:e.regionScreen,callback:function(t){e.regionScreen=t},expression:"regionScreen"}})],1):e._e(),"creat_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.createdByScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.createdByScreen,callback:function(t){e.createdByScreen=t},expression:"createdByScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"collection_time"==t.field?a("div",[a("el-checkbox-group",e._l(e.collectionScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.collectionScreen,callback:function(t){e.collectionScreen=t},expression:"collectionScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"follow_count"==t.field?a("div",[a("el-checkbox-group",e._l(e.followCountScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.followCountScreen,callback:function(t){e.followCountScreen=t},expression:"followCountScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.reset(t.field)}}},[e._v("重置 ")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1),"creat_username"==t.field||"admin_username"==t.field||"trade"==t.field||"district"==t.field||"collection_time"==t.field||"follow_count"==t.field?a("div",{staticClass:"drop_down",attrs:{slot:"reference"},slot:"reference"}):e._e()]),1==t.is_lock_display?a("div",{staticClass:"lock_display",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e(),0==t.is_lock_display?a("div",{staticClass:"lock",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e()],1)]}},{key:"default",fn:function(i){return["admin_username"==t.field?a("div",[""==i.row.admin_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.admin_username)+" ")])]):e._e(),"contacts"==t.field?a("div",[""==i.row.contacts?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.contacts)+" ")])]):e._e(),"mobile"==t.field?a("div",[""!=i.row.mobile&&null!=i.row.mobile||""!=i.row.telephone&&null!=i.row.telephone?""!=i.row.mobile?a("span",[e._v(" "+e._s(i.row.mobile)+" "),a("div",{staticClass:"dial",attrs:{title:"拨打联系人手机号"}},[a("div",{staticClass:"disal_img",on:{click:function(t){return e.clickDial(i.row.mobile,i.row.name)}}})])]):a("span",[e._v(" "+e._s(i.row.telephone)+" "),a("div",{staticClass:"dial",attrs:{title:"拨打联系人手机号"}},[a("div",{staticClass:"disal_img",on:{click:function(t){return e.clickDial(i.row.telephone,i.row.name)}}})])]):a("span",[e._v(" - ")])]):e._e(),"weixin"==t.field?a("div",[""==i.row.weixin?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.weixin)+" ")])]):e._e(),"collection_time"==t.field?a("div",[""==i.row.collection_time?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.collection_time)+" ")])]):e._e(),"trade"==t.field?a("div",[""==i.row.trade?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.trade)+" ")])]):e._e(),"district"==t.field?a("div",[""==i.row.district?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.district)+" ")])]):e._e(),"address"==t.field?a("div",[""==i.row.address?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.address)+" ")])]):e._e(),"updatetime"==t.field?a("div",[""==i.row.updatetime?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.updatetime)+" ")])]):e._e(),"follow_count"==t.field?a("div",[""==i.row.follow_count?a("span",[e._v(" 0 ")]):a("span",[e._v(" "+e._s(i.row.follow_count)+" ")])]):e._e(),"creat_username"==t.field?a("div",[""==i.row.creat_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.creat_username)+" ")])]):e._e(),"remark"==t.field?a("div",[""==i.row.remark?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.remark)+" ")])]):e._e()]}}],null,!0)}):e._e()})),a("el-table-column",{attrs:{label:"操作",width:"140",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.see(t.row.id)}}},[e._v("查看")]),2==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.release(t.row.id)}}},[e._v("释放")]):e._e(),2==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.see(t.row.id)}}},[e._v("跟进 ")]):e._e(),1==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.funAuditBatch("single",t.row.id)}}},[e._v("领取")]):e._e(),1==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.wholeDel("single",t.row.id)}}},[e._v("删除")]):e._e()]}}])})],2)],1),a("div",{staticClass:"bortton-page"},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.choose}},[e._v(" 全选/反选 ")]),1==e.list_type?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.funAuditBatch("all")}}},[e._v(" 领取 ")]):e._e(),1==e.list_type?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.wholeDel("all")}}},[e._v(" 删除 ")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.funExport}},[e._v(" 导出 ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-pagination",{attrs:{background:"","destroy-on-close":"","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e.drawer?a("el-drawer",{attrs:{size:"75%","show-close":!1,"with-header":!1,"wrapper-closable":!1,visible:e.drawer,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[a("show",{attrs:{"row-id":e.rowId},on:{hideDetail:e.hideDetail}}),a("div",{staticClass:"close",on:{click:e.handleClose}},[a("i",{staticClass:"el-icon-close"})])],1):e._e(),a("div",{staticClass:"call"},[a("el-dialog",{attrs:{visible:e.callDialogVisible,width:"30%","before-close":e.callHandleClose},on:{"update:visible":function(t){e.callDialogVisible=t}}},[a("div",{staticClass:"box-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title1"},[e._v("您还尚未开通云呼叫服务")]),a("div",{staticClass:"title2"},[e._v("扫码添加客服")]),a("div",{staticClass:"title3"},[e._v("快速开通呼叫业务")])]),a("div",{staticClass:"code"},[a("img",{attrs:{src:i("4e94"),alt:""}})]),a("div",{staticStyle:{clear:"both"}}),a("div",{staticClass:"slogan"},[e._v("一键发起云呼叫，自动录音，助力提升沟通效率！")]),a("div",{staticClass:"advantage"},[a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("免硬件设备")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("录音清晰无杂音")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("外显销售手机号")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("招聘行业专用线路")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("稳定性更高")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("防封强、接通率高")])])])])])],1),a("div",{staticClass:"meet"},[a("el-dialog",{attrs:{visible:e.meetDialogVisible,width:"30%","before-close":e.meetHandleClose},on:{"update:visible":function(t){e.meetDialogVisible=t}}},[a("div",{staticClass:"box-content"},[a("div",{staticClass:"img",attrs:{id:"animation"}}),a("div",{staticClass:"hu"},[e._v("正在呼叫客户")]),a("div",{staticClass:"telephone"},[e._v(e._s(e.dialPhone))]),a("div",{staticClass:"company"},[e._v(e._s(e.dialName))]),a("div",{staticClass:"tips"},[e._v("请您留意手机来电接听")])])])],1)],1)},s=[],l=(i("ac1f"),i("1276"),i("7db0"),i("d3b7"),i("b0c0"),i("4e82"),i("e9c4"),i("d81d"),i("159b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"popup_box"},[i("div",{staticClass:"base"},[i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[i("div",{staticClass:"name"},[e._v(" "+e._s(e.details.name?e.details.name:"-")+" ")]),i("div",{staticClass:"user"},[e._v(" （"),i("span",[e._v("线索ID： "+e._s(e.details.id?e.details.id:"-")+"； ")]),i("span",{staticClass:"logoin",on:{click:e.conversion}},[e._v("转化为客户")]),e._v("） ")]),i("div",{staticClass:"users",staticStyle:{"margin-left":"30px"}},[e._v(" 转为客户将自动注册企业会员 ")])]),i("div",{staticClass:"details"},[i("el-row",{staticClass:"line"},[i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("所属销售：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.admin_username?e.details.admin_username:"-")+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("跟进记录：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.visit_count)+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("最后跟进：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.last_visit_time?e.details.last_visit_time:"-")+" ")])])],1),i("el-row",{staticClass:"line"},[i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("所在地区：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.district_text)+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("创建人：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.creat_username?e.details.creat_username:"-")+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("创建时间：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.createtime?e.details.createtime:"-")+" ")])])],1)],1)])]),i("div",{staticClass:"tab_box"},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"跟进记录",name:"first"}},["first"==e.activeName?i("followUpRecord",{attrs:{clue_id:e.rowId,contacts:e.details.contacts,mobile:e.details.mobile},on:{clueDetails:e.clueDetails}}):e._e()],1),i("el-tab-pane",{attrs:{label:"线索详情",name:"second"}},["second"==e.activeName?i("clueDetailsEdit",{attrs:{clue_id:e.rowId,"same-client-visible":e.sameClientVisible,"componey-list":e.componeyList,"com-id":e.comId,details:e.details},on:{changeSameClient:e.changeSameClient,clueDetails:e.clueDetails,conversion:e.conversion,hideDetail:e.hideDetail}}):e._e()],1),i("el-tab-pane",{attrs:{label:"联系人",name:"third"}},["third"==e.activeName?i("clueContact",{attrs:{clue_id:e.rowId,details:e.details},on:{clueDetails:e.clueDetails,conversion:e.conversion}}):e._e()],1)],1)],1)])])}),n=[],c=i("0e2b"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"box"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[i("el-form-item",{attrs:{label:"线索名称：",prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"联系人：",prop:"contacts"}},[i("el-input",{model:{value:e.form.contacts,callback:function(t){e.$set(e.form,"contacts",t)},expression:"form.contacts"}})],1),i("el-form-item",{attrs:{label:"联系手机：",prop:"mobile"}},[i("el-input",{attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),i("el-form-item",{attrs:{label:"座机：",prop:"telephone"}},[i("el-input",{model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1),i("el-form-item",{attrs:{label:"联系微信："}},[i("el-input",{model:{value:e.form.weixin,callback:function(t){e.$set(e.form,"weixin",t)},expression:"form.weixin"}})],1),i("el-form-item",{attrs:{label:"公司规模："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.scale,callback:function(t){e.$set(e.form,"scale",t)},expression:"form.scale"}},e._l(e.scaleData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"所属行业："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.trade,callback:function(t){e.$set(e.form,"trade",t)},expression:"form.trade"}},e._l(e.industryScreenData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"所在地区",prop:"citycategory_arr"}},[i("el-cascader",{attrs:{options:e.options_citycategory,"show-all-levels":!1},model:{value:e.form.district,callback:function(t){e.$set(e.form,"district",t)},expression:"form.district"}})],1),i("el-form-item",{attrs:{label:"详细地址："}},[i("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),i("el-form-item",{attrs:{label:"备注："}},[i("el-input",{staticStyle:{width:"558px"},attrs:{rows:3,type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),i("el-form-item",{staticClass:"e_button"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),i("el-button",{attrs:{type:"primary"},on:{click:e.conversion}},[e._v("转化为客户")])],1)],1)],1),i("el-dialog",{attrs:{visible:e.sameClientVisibleChild,"append-to-body":"",title:e.sameClientTitle,fullscreen:!1,width:"650px"},on:{"update:visible":function(t){e.sameClientVisibleChild=t},close:e.closeSameClientVisible}},[i("div",{staticClass:"sameLists"},[i("div",{staticClass:"sameListTitle"},[e._v("您可以选择将本线索的跟进记录、联系人合并到以下客户：")]),i("div",{class:e.list.length>3?"sameItemList sameItemListScroll":"sameItemList"},e._l(e.list,(function(t,a){return i("div",{key:a,class:t.select?"sameItem sameItemActive":"sameItem",on:{click:function(i){return e.selectItem(t)}}},[1==t.type?i("div",{staticClass:"labelBox"},[e._v("已存在相同手机的客户")]):e._e(),2==t.type?i("div",{staticClass:"labelBox"},[e._v("已存在相同名称的客户")]):e._e(),i("div",{staticClass:"labelSelect"}),i("div",{class:2==t.type?"selectComName company_name":"company_name"},[e._v(e._s(t.name)+" "),i("span",{staticClass:"contentTxt"},[e._v("（ID："+e._s(t.id)+"）")])]),i("div",{staticClass:"register_time first"},[i("span",{staticClass:"time"},[e._v("注册时间："+e._s(t.addtime)+"("+e._s(t.platform)+")")]),i("span",{staticClass:"time"},[e._v("所属销售："+e._s(t.username))])]),i("div",{staticClass:"register_time"},[i("span",{staticClass:"time"},[e._v("企业手机："),i("span",{class:t.company_mobile==e.form.mobile?"selectTel":""},[e._v(e._s(t.company_mobile))])]),i("span",{staticClass:"time"},[e._v("会员手机："),i("span",{class:t.member_mobile==e.form.mobile?"selectTel":""},[e._v(e._s(t.member_mobile))]),""!=t.company_contact?i("span",[e._v("("+e._s(t.company_contact)+")")]):e._e()])])])})),0)]),i("div",{staticClass:"btnLists"},[i("el-button",{attrs:{size:"small"},on:{click:e.toConversion}},[e._v("不合并，继续转化")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.toMerge}},[e._v("合并到已选客户")])],1)])],1)},r=[],d=i("5530"),u=i("2909"),m=i("39f6"),f=(i("61f7"),i("b6a7")),h={name:"ClueDetails",props:["clue_id","details","sameClientVisible","componeyList","comId"],data:function(){var e=this,t=function(t,i,a){var s={name:i,id:e.clue_id};Object(m["T"])(s).then((function(e){0==e.data.sys_configs&&e.data.clue_count>0?a(new Error("线索名称已重复")):a()}))};return{rules:{name:[{required:!0,message:"请输入线索名称",trigger:"blur"},{max:20,message:"长度在 0 到 20 个字符",trigger:"blur"},{validator:t,trigger:"blur"}],contacts:[{required:!0,message:"请输入联系人",trigger:"blur"},{max:6,message:"长度在 1 到 6 个汉字",trigger:"blur"}]},form:{name:"",contacts:"",mobile:"",weixin:"",scale:"",industry:"",region:"",address:"",trade:"",remark:"",district:[],telephone:""},submitLoading:!1,scaleData:[],options_citycategory:[],industryScreenData:[],sameClientTitle:"检测到已存在相似的客户",list:this.componeyList,sameClientVisibleChild:this.sameClientVisible,company_id:""}},watch:{sameClientVisible:function(e){this.sameClientVisibleChild=e},componeyList:function(e){this.list=e,this.company_id=this.list[0].id},details:function(e){for(var t in e)this.form[t]=e[t]}},created:function(){this.classify(),this.company_id=this.comId},methods:{classify:function(){var e=this;Object(m["e"])({type:"citycategory,trade,companyScale"}).then((function(t){e.options_citycategory=Object(u["a"])(t.data.citycategory),e.options_citycategory=e.options_citycategory.map((function(e){if(e.children.length){var t=e.children;return t=t.map((function(e){return e.children.length?{label:e.label,value:e.value,children:e.children}:{label:e.label,value:e.value}})),{value:e.value,label:e.label,children:t}}return{value:e.value,label:e.label}})),e.industryScreenData=t.data.trade,e.scaleData=t.data.companyScale})).catch((function(){}))},getVerifyRepeatCompany:function(){var e=this;Object(f["o"])({clue_id:this.clue_id}).then((function(t){if(""==t.data)e.$router.push("/user/company/add?id="+e.details.id);else{for(var i in e.list=t.data,e.list)e.list[i].select=!1;e.list[0].select=!0,e.company_id=e.list[0].id,e.list.length>0&&(e.sameClientVisibleChild=!0)}}))},conversion:function(){this.getVerifyRepeatCompany()},toConversion:function(){this.sameClientVisibleChild=!1,this.$router.push("/user/company/add?id="+this.details.id)},toMerge:function(){var e=this;""==this.company_id?this.$message.error("请选择要合并的客户!"):Object(f["j"])({clue_id:this.clue_id,company_id:this.company_id}).then((function(t){e.$message.success(t.message),e.sameClientVisibleChild=!1,e.$emit("hideDetail")}))},onSubmit:function(e){var t=this;if(!0===this.submitLoading)return!1;if(""==this.mobile&&""==this.telephone)return this.$message.error("请填写联系手机或座机二选一"),!1;this.submitLoading=!0;var i=this,a=Object(d["a"])({},this.form);a.clue_id=this.clue_id,0==a.district.length&&(a.district1=0,a.district2=0,a.district3=0,a.district=0),1==a.district.length&&(a.district1=a.district[0],a.district=a.district[0],a.district2=0,a.district3=0),2==a.district.length&&(a.district1=a.district[0],a.district2=a.district[1],a.district3=0,a.district=a.district[1]),3==a.district.length&&(a.district1=a.district[0],a.district2=a.district[1],a.district3=a.district[2],a.district=a.district[2]),this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;Object(m["k"])(a).then((function(e){200==e.code?(t.$message.success(e.message),t.$emit("clueDetails")):t.$message.error(e.message),i.submitLoading=!1})).catch((function(){i.submitLoading=!1}))}))},selectItem:function(e){for(var t in this.list)if(this.list[t].select=!1,e.unique_id==this.list[t].unique_id){var i=this.list[t];i.select=!0,this.company_id=this.list[t].id,this.$set(this.list,t,i)}},closeSameClientVisible:function(){this.sameClientVisibleChild=!1,this.$emit("changeSameClient",!1),this.company_id=""}}},p=h,v=(i("49ac"),i("2877")),_=Object(v["a"])(p,o,r,!1,null,"13749b2e",null),b=_.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"box"},[e._l(e.list,(function(t,i){return a("div",{key:i,staticClass:"box-item"},[a("div",{staticClass:"box-item-name"},[""!=t.contact?a("span",{staticClass:"name"},[e._v(e._s(t.contact))]):a("span",{staticClass:"name"},[e._v("未知联系人")]),1==t.is_main?a("span",{staticClass:"label"},[e._v("主要")]):e._e()]),a("div",{staticClass:"box-item-tel"},[a("span",{staticClass:"box-item-telnum"},[e._v(e._s(t.mobile||"-"))]),t.mobile?a("span",{staticClass:"box-item-tel-icon",attrs:{title:"拨打联系人号码"},on:{click:function(i){return e.clickDial(t.mobile,t.contact)}}}):e._e()]),a("div",{staticClass:"box-item-contact-other"},[a("div",[e._v("座机："+e._s(t.telephone))]),a("div",[e._v("QQ："+e._s(t.qq))]),a("div",[e._v("邮箱："+e._s(t.email))])]),a("div",{staticClass:"oprations-list"},[0==t.is_main?a("span",{staticClass:"opration1",on:{click:function(i){return e.doSomeThing("main",t)}}},[e._v("设为主要")]):a("span"),a("div",{staticClass:"opration2"},[a("span",{staticClass:"edit",on:{click:function(i){return e.edit("edit",t)}}},[e._v("修改")]),0==t.is_main?a("span",{staticClass:"del",on:{click:function(i){return e.doSomeThing("delete",t)}}},[e._v("删除")]):e._e()])])])})),a("div",{staticClass:"box-item",on:{click:function(t){return e.addContact("add")}}},[e._m(0)])],2),a("el-dialog",{attrs:{visible:e.addContactVisible,"append-to-body":"",title:e.title,fullscreen:!1,width:"45%"},on:{"update:visible":function(t){e.addContactVisible=t}}},[a("el-form",{ref:"form",staticClass:"form-box",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[a("el-form-item",{staticClass:"form-item",attrs:{label:"姓名：",prop:"contact"}},[a("el-input",{attrs:{placeholder:"请输入联系人姓名"},model:{value:e.form.contact,callback:function(t){e.$set(e.form,"contact",t)},expression:"form.contact"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:0,value:"0"}},[e._v("男")]),a("el-radio",{attrs:{label:1,value:"1"}},[e._v("女")])],1)],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"手机号：",prop:"mobile"}},[a("el-input",{attrs:{placeholder:"请输入联系人手机号",oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"公司座机：",prop:"telephone"}},[a("el-input",{attrs:{placeholder:"请输入联系人座机号"},model:{value:e.form.telephone,callback:function(t){e.$set(e.form,"telephone",t)},expression:"form.telephone"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入联系人邮箱"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("el-form-item",{staticClass:"form-item",attrs:{label:"QQ：",prop:"qq"}},[a("el-input",{attrs:{placeholder:"请输入联系人QQ"},model:{value:e.form.qq,callback:function(t){e.$set(e.form,"qq",t)},expression:"form.qq"}})],1),a("el-form-item",{staticClass:"e_button"},[a("el-button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1),a("el-dialog",{staticClass:"call",attrs:{visible:e.callDialogVisible,width:"30%","append-to-body":"","before-close":e.callHandleClose},on:{"update:visible":function(t){e.callDialogVisible=t}}},[a("div",{staticClass:"box-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"title1"},[e._v("您还尚未开通云呼叫服务")]),a("div",{staticClass:"title2"},[e._v("扫码添加客服")]),a("div",{staticClass:"title3"},[e._v("快速开通呼叫业务")])]),a("div",{staticClass:"code"},[a("img",{attrs:{src:i("4e94"),alt:""}})]),a("div",{staticStyle:{clear:"both"}}),a("div",{staticClass:"slogan"},[e._v("一键发起云呼叫，自动录音，助力提升沟通效率！")]),a("div",{staticClass:"advantage"},[a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("免硬件设备")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("录音清晰无杂音")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("外显销售手机号")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("招聘行业专用线路")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("稳定性更高")])]),a("div",{staticClass:"advantage-box"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:i("068e"),alt:""}})]),a("div",{staticClass:"title"},[e._v("防封强、接通率高")])])])])]),a("el-dialog",{staticClass:"meet",attrs:{visible:e.meetDialogVisible,width:"30%","append-to-body":"","before-close":e.meetHandleClose},on:{"update:visible":function(t){e.meetDialogVisible=t}}},[a("div",{staticClass:"box-content"},[a("div",{staticClass:"img",attrs:{id:"animation"}}),a("div",{staticClass:"hu"},[e._v("正在呼叫客户")]),a("div",{staticClass:"telephone"},[e._v(e._s(e.dialPhone))]),a("div",{staticClass:"company"},[e._v(e._s(e.dialName))]),a("div",{staticClass:"tips"},[e._v("请您留意手机来电接听")])])])],1)},C=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"add-btn"},[i("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"rgb(37, 177, 73)","margin-right":"3px"}}),i("span",{staticClass:"add-text"},[e._v("添加联系人")])])}],y=i("f09a"),S={name:"ClueDetails",props:["clue_id","details"],data:function(){return{rules:{contact:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}]},form:{contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""},submitLoading:!1,scaleData:[],options_citycategory:[],industryScreenData:[],list:[],addContactVisible:!1,title:"添加联系人",oprationVal:"add",callDialogVisible:!1,meetDialogVisible:!1,dialPhone:"",dialName:""}},created:function(){this.getContactList()},methods:{getContactList:function(){var e=this;Object(f["h"])({clue_id:this.clue_id}).then((function(t){200==t.code?(e.list=t.data,e.copyList=t.data):e.$message.error(t.message)}))},addContact:function(e){this.oprationVal=e,this.form={contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""},this.addContactVisible=!0},edit:function(e,t){this.oprationVal=e,this.form=t,this.addContactVisible=!0},doSomeThing:function(e,t){var i=this,a="main"==e?"确定将此联系人设为主要联系人吗？":"确定删除该联系人吗？",s="main"==e?"已取消设为主要":"已取消删除",l={clue_id:this.clue_id,contact_id:t.contact_id};this.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){"main"==e?Object(f["m"])(l).then((function(e){i.$message.success(e.message),i.getContactList()})).catch((function(){})):"delete"==e&&Object(f["c"])(l).then((function(e){i.$message.success(e.message),i.getContactList()})).catch((function(){}))})).catch((function(){i.$message({type:"info",message:s})}))},conversion:function(){this.$emit("conversion")},reset:function(){("add"==this.oprationVal||"edit"==this.oprationVal)&&(this.form={contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""})},onSubmit:function(e){var t=this,i=this.oprationVal;if(!0===this.submitLoading)return!1;if(!this.form.mobile&&!this.form.telephone)return this.$message.error("请填写手机号或公司座机二选一"),!1;this.submitLoading=!0;var a=Object(d["a"])({},this.form);this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;a.clue_id=t.clue_id,"add"==i?Object(f["a"])(a).then((function(e){200==e.code?(t.addContactVisible=!1,t.$message.success(e.message),t.form={contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""},t.getContactList()):t.$message.error(e.message),t.submitLoading=!1})).catch((function(){t.submitLoading=!1})):"edit"==i&&Object(f["b"])(a).then((function(e){200==e.code?(t.addContactVisible=!1,t.$message.success(e.message),t.form={contact:"",sex:"",mobile:"",telephone:"",email:"",qq:""},t.getContactList()):t.$message.error(e.message),t.submitLoading=!1})).catch((function(){t.submitLoading=!1}))}))},clickDial:function(e,t){var i=this,a="";a=""==t||null==t?"未完善线索资料":t,this.$confirm("是否对【"+a+"】"+e+" 发起呼叫？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(y["i"])({mobile:e}).then((function(a){200==a.code&&(i.meetDialogVisible=!0,i.dialPhone=e,i.dialName=t),4040==a.code&&(i.callDialogVisible=!0)})).catch((function(e){}))})).catch((function(){}))},callHandleClose:function(){this.callDialogVisible=!1},meetHandleClose:function(){this.meetDialogVisible=!1}}},w=S,k=(i("9ff4"),Object(v["a"])(w,g,C,!1,null,"a77ec834",null)),x=k.exports,D={name:"Show",components:{clueDetailsEdit:b,followUpRecord:c["a"],clueContact:x},props:{rowId:{default:""}},data:function(){return{details:[],activeName:"first",loading:!1,sameClientVisible:!1,componeyList:[],comId:0}},created:function(){this.clueDetails()},methods:{getVerifyRepeatCompany:function(){var e=this;Object(f["o"])({clue_id:this.rowId}).then((function(t){""==t.data?e.$router.push("/user/company/add?id="+e.details.id):(e.activeName="second",e.sameClientVisible=!0,e.componeyList=t.data,e.componeyList[0].select=!0,e.comId=e.componeyList[0].id)}))},conversion:function(){this.getVerifyRepeatCompany()},hideDetail:function(){this.$emit("hideDetail")},clueDetails:function(){var e=this;this.loading=!0,Object(m["j"])({clue_id:this.rowId}).then((function(t){e.details=t.data;var i=[];0!=t.data.district1&&i.push(t.data.district1),0!=t.data.district2&&i.push(t.data.district2),0!=t.data.district3&&i.push(t.data.district3),e.details.citycategory_arr=i,e.details.citycategory_arr=i,e.loading=!1})).catch((function(){}))},changeSameClient:function(e){this.sameClientVisible=!1},handleClick:function(){"first"!=this.activeName&&"second"!=this.activeName||this.clueDetails()}}},$=D,L=(i("c1e9"),Object(v["a"])($,l,n,!1,null,"0d1122d7",null)),F=L.exports,O=i("39a0"),V={name:"Whole",components:{show:F},data:function(){return{key_type:"1",loading:!1,props:{multiple:!1,checkStrictly:!0},visiblepop:!1,menu_icon:"menu",keyword:"",drawer:!1,fieldData:[],createdByScreen:"",createdByScreenData:[],regionScreen:"",regionScreenData:[],industryScreen:"",industryScreenData:[],saleScreen:"",saleScreenData:[],pagesize:10,total:0,currentPage:1,multipleSelection:[],exportData:[],tableData:[],columnCheckedId:"",multipleSelectionNew:[],checkedList:[],title:"",currentNav:"",list_type:0,rowId:0,draggableOption:{sort:!1,scroll:!0,disabled:!0},export_field:[],export_name:[],callDialogVisible:!1,meetDialogVisible:!1,dialPhone:"",dialName:"",sort_type:"",sort:"",saleFilter:"",industryFilter:"",regionFilter:"",createdByFilter:"",collectionScreenData:[{id:1,name:"今日新增"},{id:2,name:"本周新增"},{id:3,name:"本月新增"}],collectionScreen:"",collectionFilter:"",followCountScreenData:[{id:1,name:"跟进0次"},{id:2,name:"跟进1次"},{id:3,name:"跟进2次"},{id:4,name:"跟进3次及以上"}],followCountScreen:"",followCountFilter:"",tabelHeight:0}},computed:{clueTime:function(){var e=this.$route.query.time;return e}},watch:{clueTime:function(){var e=localStorage.getItem("clue_type"),t=localStorage.getItem("clue_id");""!=e&&"follow"==e&&(this.drawer=!0,this.rowId=t,localStorage.setItem("clue_type",""),localStorage.setItem("clue_id",""))}},updated:function(){var e=this;this.$nextTick((function(){e.$refs.multipleTable.doLayout(),e.loading||setTimeout((function(){var t=e.$refs.multipleTable.$el.className,i=t.split(" "),a=document.querySelectorAll(".el-table__fixed-right")[0],s=document.querySelectorAll(".el-table__empty-block")[0];void 0!=s&&(s.style.width="100%");var l=i.find((function(e,t,i){return"el-table--scrollable-y"==e}));a.style.right=l?"10px":"0px"}),100)}))},mounted:function(){var e=this;this.$nextTick((function(){var t=document.documentElement.clientHeight;e.tabelHeight=t-316-60}))},created:function(){this.currentNav=this.$route.name,"wholeClue"==this.currentNav?(this.title="全部线索",this.list_type=0):"wholeMy"==this.currentNav?(this.title="我的线索",this.list_type=2):"wholeInternationalWaters"==this.currentNav&&(this.title="线索公海",this.list_type=1),this.clueList(),this.crmCustomList(),this.clueAdminLists(),this.classify();var e=localStorage.getItem("clue_type"),t=localStorage.getItem("clue_id");""!=e&&"follow"==e&&(this.drawer=!0,this.rowId=t,localStorage.setItem("clue_type",""),localStorage.setItem("clue_id",""))},methods:{sortTable:function(e){var t=e.column,i=e.order;this.sortType="ascending"==i?"asc":"descending"==i?"desc":"",this.sort_type=t.property,this.sort=this.sortType,this.clueList()},classify:function(){var e=this;Object(m["e"])({type:"citycategory,trade,companyScale"}).then((function(t){e.regionScreenData=t.data.citycategory,e.industryScreenData=t.data.trade})).catch((function(){}))},clueAdminLists:function(){var e=this;Object(m["g"])().then((function(t){e.saleScreenData=t.data,e.createdByScreenData=t.data})).catch((function(){}))},clueList:function(){var e=this;if(this.loading=!0,localStorage.getItem("collectionScreen")){var t=localStorage.getItem("collectionScreen");this.collectionScreen=parseInt(t),this.collectionFilter={name:"1"==t?"今日新增":"2"==t?"本周新增":"本月新增",field:"collection_time"},localStorage.setItem("collectionScreen","")}if(localStorage.getItem("followCountScreen")){var i=localStorage.getItem("followCountScreen");this.followCountScreen=parseInt(i),this.followCountFilter={name:"1"==i?"跟进0次":"2"==i?"跟进1次的":"3"==i?"跟进2次":"跟进3次及以上",field:"follow_count"},localStorage.setItem("followCountScreen","")}Object(m["l"])({page:this.currentPage,pagesize:this.pagesize,list_type:this.list_type,key_type:this.key_type,keyword:this.keyword,trade:this.industryScreen,district:this.regionScreen,creat_id:this.createdByScreen,admin_id:this.saleScreen,sort_type:this.sort_type,sort:this.sort,collection:this.collectionScreen,follow_count:this.followCountScreen}).then((function(t){e.tableData=t.data.items,e.total=t.data.total,e.currentPage=t.data.current_page,e.loading=!1})).catch((function(){e.loading=!1}))},setFieldClose:function(){this.menu_icon="menu",this.visiblepop=!1},setFieldConfirm:function(){var e=this,t=this.list_type,i=0;0==t&&(i=1),1==t&&(i=2),2==t&&(i=3),Object(m["G"])({menu:i,type:1,value:JSON.stringify(this.fieldData)},"post").then((function(t){200==t.code?e.$message.success(t.message):e.$message.error(t.message)})).catch((function(){}))},crmCustomList:function(){var e=this,t=this.list_type,i=0;0==t&&(i=1),1==t&&(i=2),2==t&&(i=3),Object(m["F"])({menu:i,type:1}).then((function(t){e.fieldData=JSON.parse(t.data);for(var i=0;i<=e.fieldData.length-1;i++)"collection_time"==e.fieldData[i].field?e.fieldData[i].is_sortable="custom":e.fieldData[i].is_sortable=!1,e.export_name.push(e.fieldData[i].name),e.export_field.push(e.fieldData[i].field)})).catch((function(){}))},locking:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].is_locking?(this.fieldData[t].is_locking=!1,this.fieldData[t].is_lock_display=!1,this.fieldData[t].icon="el-icon-lock"):(this.fieldData[t].icon="el-icon-unlock",this.fieldData[t].is_locking=!0,this.fieldData[t].is_lock_display=!1));this.setFieldConfirm()},select:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].select?this.fieldData[t].select=!1:this.fieldData[t].select=!0)},menu:function(){"menu"==this.menu_icon?(this.visiblepop=!0,this.menu_icon="menu_select"):(this.visiblepop=!1,this.menu_icon="menu")},confirm:function(e){var t=this;if("reset"!=e&&(this.tabelHeight="calc(100vh - 446px)",this.$nextTick((function(){t.$refs.multipleTable.doLayout()}))),""!=this.saleScreen)for(var i=0;i<=this.saleScreenData.length-1;i++)this.saleScreen==this.saleScreenData[i].id&&(this.saleFilter={field:"admin_username",name:this.saleScreenData[i].name});else this.saleFilter="";if(""!=this.industryScreen)for(i=0;i<=this.industryScreenData.length-1;i++)this.industryScreen==this.industryScreenData[i].id&&(this.industryFilter={field:"trade",name:this.industryScreenData[i].name});else this.industryFilter="";if(""!=this.regionScreen){if(1==this.regionScreen.length)for(i=0;i<=this.regionScreenData.length-1;i++)this.regionScreen[0]==this.regionScreenData[i].value&&(this.regionFilter={field:"district",name:this.regionScreenData[i].label});if(2==this.regionScreen.length)for(i=0;i<=this.regionScreenData.length-1;i++)for(var a=0;a<=this.regionScreenData[i].children.length-1;a++)this.regionScreen[1]==this.regionScreenData[i].children[a].value&&(this.regionFilter={field:"district",name:this.regionScreenData[i].children[a].label});if(3==this.regionScreen.length)for(i=0;i<=this.regionScreenData.length-1;i++)for(a=0;a<=this.regionScreenData[i].children.length-1;a++)for(var s=0;s<=this.regionScreenData[i].children[a].children.length-1;s++)this.regionScreen[2]==this.regionScreenData[i].children[a].children[s].value&&(this.regionFilter={field:"district",name:this.regionScreenData[i].children[a].children[s].label})}else this.regionFilter="";if(""!=this.createdByScreen)for(i=0;i<=this.createdByScreenData.length-1;i++)this.createdByScreen==this.createdByScreenData[i].id&&(this.createdByFilter={field:"creat_username",name:this.createdByScreenData[i].name});else this.createdByFilter="";if(""!=this.collectionScreen)for(i=0;i<=this.collectionScreenData.length-1;i++)this.collectionScreen==this.collectionScreenData[i].id&&(this.collectionFilter={field:"collection_time",name:this.collectionScreenData[i].name});else this.collectionFilter="";if(""!=this.followCountScreen)for(i=0;i<=this.followCountScreenData.length-1;i++)this.followCountScreen==this.followCountScreenData[i].id&&(this.followCountFilter={field:"follow_count",name:this.followCountScreenData[i].name});else this.followCountFilter="";this.currentPage=1,this.clueList()},see:function(e){this.drawer=!0,this.rowId=e},handleClose:function(){this.clueList(),this.drawer=!1},hideDetail:function(){this.clueList(),this.drawer=!1},handleSizeChange:function(e){this.pagesize=e,this.clueList()},handleCurrentChange:function(e){this.currentPage=e,this.clueList()},release:function(e){var t=this;this.$confirm("您确认释放该线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["n"])({clue_id:e}).then((function(e){200==e.code?t.$message.success(e.message):t.$message.error(e.message),t.clueList()}))})).catch((function(){}))},funAuditBatch:function(e,t){var i=this;if("all"==e){var a=this;if(0==a.multipleSelection.length)return a.$message.error("请选择要领取的线索"),!1;var s=a.multipleSelection}else s=t;this.$confirm("您确认要领取此线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["m"])({clue_id:s}).then((function(e){200==e.code?i.$message.success(e.message):i.$message.error(e.message),i.clueList()}))})).catch((function(){}))},wholeDel:function(e,t){var i=this;if("all"==e){var a=this;if(0==a.multipleSelection.length)return a.$message.error("请选择要删除的线索"),!1;var s=a.multipleSelection}else s=t;this.$confirm("您确认要删除此线索?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(m["i"])({clue_id:s}).then((function(e){200==e.code?i.$message.success(e.message):i.$message.error(e.message),i.clueList()}))})).catch((function(){}))},funExport:function(){var e=this;return 0==e.$store.state.user.access_export?(e.$message.error("当前管理员没有导出权限"),!1):0==e.multipleSelection.length?(e.$message.error("请选择要导出的线索"),!1):void e.exportExcel(this.exportData)},exportExcel:function(e){var t=this;Promise.resolve().then(function(){var a=i("39a0"),s=(a.export_json_to_excel,t.export_name);s.unshift("线索名称");var l=t.export_field;l.unshift("name");var n=t.formatJson(l,e);Object(O["export_json_to_excel"])(s,n,"线索导出")}.bind(null,i)).catch(i.oe)},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},funSearchKeyword:function(){this.currentPage=1,this.clueList()},goto:function(e){this.$router.push(e)},locks:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].is_lock_display?this.fieldData[t].is_lock_display=!1:this.fieldData[t].is_lock_display=!0)},choose:function(){var e=this;this.tableData.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)}))},handleSelectionChange:function(e){var t=this,i=[];e.forEach((function(e){i.push(e.id)})),this.exportData=e,this.multipleSelection=i,this.multipleSelectionNew=e,this.multipleSelectionNew.length==this.tableData.length&&this.multipleSelectionNew.forEach((function(e,i){t.checkedList[i]=!0})),0==this.multipleSelectionNew.length&&(this.checkedList=[]),this.$forceUpdate(),this.$emit("selectList",this.multipleSelectionNew)},cellEnter:function(e,t,i,a){this.columnCheckedId=e.id},cellLeave:function(e,t,i,a){this.columnCheckedId=""},cellCheckbox:function(e,t){this.checkedList[t]?this.$refs.multipleTable.toggleRowSelection(e,!0):this.$refs.multipleTable.toggleRowSelection(e,!1)},reset:function(e){this.tabelHeight="calc(100vh - 372px)","all"==e&&(this.saleScreen=[],this.industryScreen=[],this.regionScreen=[],this.createdByScreen=[],this.key_type="1",this.keyword="",this.collectionScreen="",this.followCountScreen=""),"admin_username"==e&&(this.saleScreen=[]),"trade"==e&&(this.industryScreen=[]),"district"==e&&(this.regionScreen=[]),"creat_username"==e&&(this.createdByScreen=[]),"collection_time"==e&&(this.collectionScreen=""),"follow_count"==e&&(this.followCountScreen=""),this.confirm("reset")},clickDial:function(e,t){var i=this;this.$confirm("是否对【"+t+"】"+e+" 发起呼叫？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(y["i"])({mobile:e}).then((function(a){200==a.code&&(i.meetDialogVisible=!0,i.dialPhone=e,i.dialName=t),4040==a.code&&(i.callDialogVisible=!0)})).catch((function(e){}))})).catch((function(){}))},callHandleClose:function(){this.callDialogVisible=!1},meetHandleClose:function(){this.meetDialogVisible=!1}}},j=V,I=(i("23a7"),Object(v["a"])(j,a,s,!1,null,"260dc588",null));t["default"]=I.exports},c1e9:function(e,t,i){"use strict";i("21ed")},c923:function(e,t,i){}}]);