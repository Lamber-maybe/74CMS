(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d3f321e"],{"37a4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("企业备份资料")])]),a("div",{staticClass:"list-search"},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"440px",float:"left"},attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.funSearchKeyword.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-select",{staticClass:"input-sel",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.key_type,callback:function(t){e.key_type=t},expression:"key_type"}},[a("el-option",{attrs:{label:"公司名称",value:"1"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.funSearchKeyword},slot:"append"})],1)],1),""!=e.setmealName?a("div",{staticClass:"filterCriteria"},[a("div",{staticStyle:{float:"left",display:"inline-block","margin-top":"6px"}},[e._v("已选条件：")]),a("div",{staticStyle:{float:"left",display:"inline-block",width:"80%"}},[""!=e.setmealName?a("div",{staticClass:"selected"},[a("div",{staticClass:"name"},[e._v("企业套餐："+e._s(e.setmealName.name))]),a("div",{staticClass:"closes",on:{click:function(t){return e.reset(e.setmealName.field)}}},[a("i",{staticClass:"el-icon-close"})])]):e._e()]),a("div",{staticStyle:{float:"right",display:"inline-block","margin-top":"6px",color:"#409eff","font-size":"13px"},on:{click:function(t){return e.reset("all")}}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 清空条件 ")]),a("div",{staticStyle:{clear:"both"}})]):e._e(),a("div",{staticClass:"spaceline"}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",attrs:{data:e.list,border:"",stripe:"","element-loading-text":"Loading",fit:"","highlight-current-row":""},on:{"sort-change":e.sortTable,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"42"}}),e._l(e.fieldData,(function(t){return 1==t.is_locking&&1==t.select?a("el-table-column",{attrs:{fixed:"",width:t.width,prop:t.field,sortable:t.is_sortable},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{class:"custom"==t.is_sortable?"sotrTime":"",on:{mouseenter:function(a){return e.locks(t.field)},mouseleave:function(a){return e.locks(t.field)}}},[a("span",[e._v(e._s(t.name))]),a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},["setmeal_name"==t.field?a("div",{staticClass:"screen_s"},[a("el-checkbox-group",e._l(e.mealScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.setmeal,callback:function(t){e.setmeal=t},expression:"setmeal"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(a){return e.reset(t.field)}}},[e._v("重置")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1),"setmeal_name"==t.field?a("div",{staticClass:"drop_down",attrs:{slot:"reference"},slot:"reference"}):e._e()]),1==t.is_lock_display?a("div",{staticClass:"unlock_display",attrs:{slot:"reference"},on:{click:function(a){return e.locking(t.field)}},slot:"reference"}):e._e(),0==t.is_lock_display?a("div",{staticClass:"unlock",attrs:{slot:"reference"},on:{click:function(a){return e.locking(t.field)}},slot:"reference"}):e._e()],1)]}},{key:"default",fn:function(i){return["cid"==t.field?a("div",[""==i.row.cid?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.cid))])]):e._e(),"companyname"==t.field?a("div",[""==i.row.companyname?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.companyname))])]):e._e(),"contact"==t.field?a("div",[""==i.row.contact?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.contact))])]):e._e(),"contact_mobile"==t.field?a("div",[""==i.row.contact_mobile?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.contact_mobile))])]):e._e(),"mobile"==t.field?a("div",[""==i.row.mobile?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.mobile))])]):e._e(),"jobs_num"==t.field?a("div",[""==i.row.jobs_num?a("span",[e._v("0")]):a("span",[e._v(e._s(i.row.jobs_num))])]):e._e(),"job_apply_count"==t.field?a("div",[""==i.row.job_apply_count?a("span",[e._v("0")]):a("span",[e._v(e._s(i.row.job_apply_count))])]):e._e(),"download_resume_num"==t.field?a("div",[""==i.row.download_resume_num?a("span",[e._v("0")]):a("span",[e._v(e._s(i.row.download_resume_num))])]):e._e(),"setmeal_name"==t.field?a("div",[""==i.row.setmeal_name?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.setmeal_name))])]):e._e(),"reg_time"==t.field?a("div",[""==i.row.reg_time?a("span",[e._v("-")]):a("span",[e._v(e._s(e._f("timeFilter")(i.row.reg_time)))])]):e._e(),"cancel_apply_time"==t.field?a("div",[""==i.row.cancel_apply_time?a("span",[e._v("-")]):a("span",[e._v(e._s(e._f("timeFilter")(i.row.cancel_apply_time)))])]):e._e()]}}],null,!0)}):e._e()})),e._l(e.fieldData,(function(t){return 0==t.is_locking&&1==t.select?a("el-table-column",{attrs:{width:t.width,prop:t.field,sortable:t.is_sortable},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{class:"custom"==t.is_sortable?"sotrTime":"",on:{mouseenter:function(a){return e.locks(t.field)},mouseleave:function(a){return e.locks(t.field)}}},[a("span",[e._v(e._s(t.name))]),a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},["setmeal_name"==t.field?a("div",{staticClass:"screen_s"},[a("el-checkbox-group",e._l(e.mealScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.setmeal,callback:function(t){e.setmeal=t},expression:"setmeal"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(a){return e.reset(t.field)}}},[e._v("重置")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1),"setmeal_name"==t.field?a("div",{staticClass:"drop_down",attrs:{slot:"reference"},slot:"reference"}):e._e()]),1==t.is_lock_display?a("div",{staticClass:"lock_display",attrs:{slot:"reference"},on:{click:function(a){return e.locking(t.field)}},slot:"reference"}):e._e(),0==t.is_lock_display?a("div",{staticClass:"lock",attrs:{slot:"reference"},on:{click:function(a){return e.locking(t.field)}},slot:"reference"}):e._e()],1)]}},{key:"default",fn:function(i){return["cid"==t.field?a("div",[""==i.row.cid?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.cid))])]):e._e(),"companyname"==t.field?a("div",[""==i.row.companyname?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.companyname))])]):e._e(),"contact"==t.field?a("div",[""==i.row.contact?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.contact))])]):e._e(),"contact_mobile"==t.field?a("div",[""==i.row.contact_mobile?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.contact_mobile))])]):e._e(),"mobile"==t.field?a("div",[""==i.row.mobile?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.mobile))])]):e._e(),"jobs_num"==t.field?a("div",[""==i.row.jobs_num?a("span",[e._v("0")]):a("span",[e._v(e._s(i.row.jobs_num))])]):e._e(),"job_apply_count"==t.field?a("div",[""==i.row.job_apply_count?a("span",[e._v("0")]):a("span",[e._v(e._s(i.row.job_apply_count))])]):e._e(),"download_resume_num"==t.field?a("div",[""==i.row.download_resume_num?a("span",[e._v("0")]):a("span",[e._v(e._s(i.row.download_resume_num))])]):e._e(),"setmeal_name"==t.field?a("div",[""==i.row.setmeal_name?a("span",[e._v("-")]):a("span",[e._v(e._s(i.row.setmeal_name))])]):e._e(),"reg_time"==t.field?a("div",[""==i.row.reg_time?a("span",[e._v("-")]):a("span",[e._v(e._s(e._f("timeFilter")(i.row.reg_time)))])]):e._e(),"cancel_apply_time"==t.field?a("div",[""==i.row.cancel_apply_time?a("span",[e._v("-")]):a("span",[e._v(e._s(e._f("timeFilter")(i.row.cancel_apply_time)))])]):e._e()]}}],null,!0)}):e._e()}))],2),a("div",{staticClass:"spaceline"}),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.choose}},[e._v(" 全选/反选 ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.funExport}},[e._v(" 导出 ")]),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){return e.funDeleteBatch()}}},[e._v(" 删除 ")])],1),a("el-col",{attrs:{span:8}}),a("el-col",{staticStyle:{"text-align":"right"},attrs:{offset:8,span:16}},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)],1)},s=[],n=a("b85c"),l=(a("e9c4"),a("b0c0"),a("4e82"),a("a15b"),a("d81d"),a("d3b7"),a("159b"),a("f8b5")),o=a("ed08"),c=a("f09a"),r={name:"PersonCancelBackup",filters:{timeFilter:function(e){return Object(o["b"])(e,"{y}-{m}-{d} {h}:{i}")}},data:function(){return{list:null,listLoading:!0,total:0,currentPage:1,pagesize:10,key_type:"1",keyword:"",tableData:[],tableIdarr:[],fieldData:[{name:"企业id",field:"cid",select:!0,is_locking:!1,is_lock_display:!1,width:100,is_sortable:!1},{name:"企业名称",field:"companyname",select:!0,is_locking:!1,is_lock_display:!1,width:200,is_sortable:!1},{name:"联系人",field:"contact",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:!1},{name:"联系方式",field:"contact_mobile",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:!1},{name:"注册手机号",field:"mobile",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:!1},{name:"发布职位",field:"jobs_num",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:!1},{name:"收到简历",field:"job_apply_count",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:!1},{name:"下载简历",field:"download_resume_num",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:!1},{name:"企业套餐",field:"setmeal_name",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:!1},{name:"注册时间",field:"reg_time",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:"custom"},{name:"申请时间",field:"cancel_apply_time",select:!0,is_locking:!1,is_lock_display:!1,width:175,is_sortable:"custom"}],mealScreenData:[],setmeal:"",setmealName:"",sort_type:"",sort:""}},created:function(){this.fetchData(),this.getField(),this.classify()},methods:{classify:function(){var e=this;Object(l["c"])({type:"setmealList"}).then((function(t){e.mealScreenData=t.data})).catch((function(){}))},locking:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].is_locking?(this.fieldData[t].is_locking=!1,this.fieldData[t].is_lock_display=!1,this.fieldData[t].icon="el-icon-lock"):(this.fieldData[t].icon="el-icon-unlock",this.fieldData[t].is_lock_display=!1,this.fieldData[t].is_locking=!0));this.setFieldConfirm()},getField:function(){var e=this;Object(c["c"])({name:"companyCancelBackup"}).then((function(t){""!=t.data&&(e.fieldData=JSON.parse(t.data))})).catch((function(){}))},setFieldConfirm:function(){var e=this;Object(c["d"])({name:"companyCancelBackup",value:JSON.stringify(this.fieldData)}).then((function(t){200==t.code?e.$message.success(t.message):e.$message.error(t.message),e.visiblepop=!1,e.menu_icon="menu"})).catch((function(){}))},locks:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].is_lock_display?this.fieldData[t].is_lock_display=!1:this.fieldData[t].is_lock_display=!0)},reset:function(e){"all"==e&&(this.setmeal=""),"setmeal_name"==e&&(this.setmeal=""),this.confirm()},confirm:function(){if(this.currentPage=1,""!=this.setmeal)for(var e=0;e<=this.mealScreenData.length-1;e++)this.setmeal==this.mealScreenData[e].id&&(this.setmealName={field:"setmeal_name",name:this.mealScreenData[e].name});else this.setmealName="";this.backupsList()},sortTable:function(e){var t=e.column,a=e.order;this.sortType="ascending"==a?"asc":"descending"==a?"desc":"",this.sort_type=t.property,this.sort=this.sortType,this.backupsList()},backupsList:function(){var e=this;this.loading=!0,localStorage.getItem("resume_audit")&&"1"==localStorage.getItem("resume_audit")&&(this.setmeal="0",localStorage.setItem("resume_audit","")),Object(l["b"])({key_type:this.key_type,keyword:this.keyword,page:this.currentPage,pagesize:this.pagesize,utype:1,setmeal_id:this.setmeal,sort_type:this.sort_type,sort:this.sort}).then((function(t){e.tableData=t.data.items,e.list=t.data.items,e.listLoading=!1,e.total=t.data.total,e.currentPage=t.data.current_page,e.pagesize=t.data.pagesize})).catch((function(){e.loading=!1}))},goto:function(e){this.$router.push(e)},funExport:function(){var e=this;if(0==e.$store.state.user.access_export)return e.$message.error("当前管理员没有导出权限"),!1;if(0==e.tableIdarr.length)return e.$message.error("请选择要导出的数据"),!1;var t={utype:1,id:e.tableIdarr.join(",")};Object(l["d"])(t).then((function(t){return 200==t.code?e.exportExcel(t.data):(e.$message.error(t.message),e.waiting=!1),!0}))},exportExcel:function(e){var t=this;Promise.all([a.e("chunk-519483dc"),a.e("chunk-6114e0a1"),a.e("chunk-91140928")]).then(function(){var i=a("39a0"),s=i.export_json_to_excel,n=["企业ID","企业名称","企业简称","企业性质","所属行业","所在地区","企业规模","注册资金","联系人","联系手机","联系座机","联系人微信","联系人qq","联系人邮箱","审核状态","注册时间","刷新时间"],l=["id","companyname","short_name","nature","trade","district","scale","registered","contact","mobile","telephone","weixin","qq","email","audit","addtime","refreshtime"],o=t.formatJson(l,e);s(n,o,"企业注销备份导出")}.bind(null,a)).catch(a.oe)},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},handleSelectionChange:function(e){if(this.tableIdarr=[],e.length>0){var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.tableIdarr.push(i.id)}}catch(s){a.e(s)}finally{a.f()}}},funDeleteBatch:function(){if(0==this.tableIdarr.length)return this.$message.error("请选择要删除的数据"),!1;var e=this;e.$confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={id:e.tableIdarr,utype:1};Object(l["a"])(t).then((function(t){return e.$message.success(t.message),e.fetchData(),!0}))})).catch((function(){}))},choose:function(){var e=this;this.tableData.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)}))},fetchData:function(){var e=this;this.listLoading=!0;var t={key_type:this.key_type,keyword:this.keyword,page:this.currentPage,pagesize:this.pagesize,utype:1};Object(l["b"])(t).then((function(t){e.tableData=t.data.items,e.list=t.data.items,e.listLoading=!1,e.total=t.data.total,e.currentPage=t.data.current_page,e.pagesize=t.data.pagesize}))},handleSizeChange:function(e){this.pagesize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()},funSearch:function(){this.fetchData()},funSearchKeyword:function(){this.currentPage=1,this.fetchData()}}},d=r,_=(a("398e"),a("2877")),p=Object(_["a"])(d,i,s,!1,null,"7631c996",null);t["default"]=p.exports},"398e":function(e,t,a){"use strict";a("d76b")},d76b:function(e,t,a){}}]);