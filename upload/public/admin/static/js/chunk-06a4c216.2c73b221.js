(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-06a4c216","chunk-91140928"],{"0e2b":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"followup_wrapper"},[i("el-row",[i("el-col",{staticClass:"write",attrs:{span:12}},[i("div",{staticClass:"info"},[i("el-form",{ref:"followUp",attrs:{"label-width":"100px",rules:e.rules,model:e.followUp}},[i("el-form-item",{staticClass:"label_title",attrs:{label:"跟进方式：",prop:"mode"}},[i("el-select",{attrs:{disabled:e.disabled_state},model:{value:e.followUp.mode,callback:function(t){e.$set(e.followUp,"mode",t)},expression:"followUp.mode"}},e._l(e.visitStatusList,(function(e,t){return i("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),i("el-form-item",{attrs:{label:"联系人："}},["allClient"==e.currentNav||"myClient"==e.currentNav||"pubilceClient"==e.currentNav?i("el-select",{attrs:{placeholder:"请选择",disabled:e.disabled_state},model:{value:e.followUp.contacts,callback:function(t){e.$set(e.followUp,"contacts",t)},expression:"followUp.contacts"}},e._l(e.contactsData,(function(t){return i("el-option",{key:t.value,attrs:{label:t.name,value:t.value},nativeOn:{click:function(i){return e.contactsClick(t)}}})})),1):i("el-input",{attrs:{value:e.followUp.link_man+" | "+e.followUp.link_mobile,placeholder:"请输入内容",disabled:!0}})],1),i("el-form-item",{attrs:{label:"下次跟进："}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.disabled_state,"picker-options":e.pickerOptions,type:"datetime",placeholder:"选择日期时间"},model:{value:e.followUp.next_time,callback:function(t){e.$set(e.followUp,"next_time",t)},expression:"followUp.next_time"}})],1),i("el-form-item",{attrs:{label:"跟进结果：",prop:"result"}},[i("el-input",{attrs:{rows:9,type:"textarea",disabled:e.disabled_state},model:{value:e.followUp.result,callback:function(t){e.$set(e.followUp,"result",t)},expression:"followUp.result"}})],1),i("el-form-item",{attrs:{label:"添加图片："}},[i("el-upload",{ref:"uploadFile",staticClass:"upload-demo",attrs:{disabled:e.disabled_state,headers:e.headerObj,"on-remove":function(t,i){e.removeImg(t,i)},drag:"",action:e.upload_url,multiple:"","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[i("i",{staticClass:"el-icon-upload"}),i("div",{staticClass:"el-upload__text"},[e._v("将图片拖到此处，或"),i("em",[e._v("点击上传")])]),i("div",{staticClass:"el-upload__text"},[e._v("图片上传仅支持jpg/png格式")])])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary",disabled:e.disabled_state},nativeOn:{click:function(t){return e.conserveVisitLog("followUp")}}},[e._v("保存跟进记录")])],1)],1)],1)]),i("el-col",{staticClass:"history",attrs:{span:12}},[i("div",{staticClass:"title"},[i("span",{staticClass:"text"},[e._v("历史跟进")]),i("div",{staticClass:"total"},[e._v(" 共有 "),i("span",{staticClass:"sum"},[e._v(e._s(e.total)+"条")]),e._v(" 跟进 ")])]),i("div",{staticClass:"history_list"},e._l(e.record,(function(t){return i("div",{staticClass:"history_item"},[i("div",{staticClass:"user"},[e._v(e._s(t.username))]),i("div",{staticClass:"info"},[i("div",{staticClass:"followup"},[i("div",{staticClass:"text"},[i("span",{staticClass:"color"},[e._v(e._s(t.username))]),e._v(" "+e._s(t.mode)+" "),i("span",{staticClass:"color"},[e._v(e._s(t.name))])]),i("div",{staticClass:"text_right"},[i("span",{staticClass:"time"},[e._v(e._s(t.create_time))])])]),i("div",{staticClass:"content"},[e._v(" "+e._s(t.result)+" "),""!=t.enclosure&&t.enclosure.length>0?i("div",e._l(t.enclosure,(function(e){return i("div",{staticClass:"img"},[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{cover:"",src:e,"preview-src-list":[e]}})],1)})),0):e._e()])])])})),0),e.listParams.total>=10?i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"","current-page":e.listParams.page,"page-sizes":[10,15,20,30,40],layout:"total, sizes, prev, pager, next, jumper","page-size":e.listParams.page_size,total:e.total},on:{"size-change":e.handlePageSize,"current-change":e.handleCurrentSize}})],1):e._e()])],1)],1)},s=[],l=i("5530"),n=(i("b0c0"),i("ac1f"),i("1276"),i("a15b"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("39f6")),r=i("5f87"),o={name:"FollowUpRecord",props:["uid","clue_id","contacts","mobile"],data:function(){return{loading:!1,disabled_state:!1,listParams:{page:1,page_size:10,total:0},pickerOptions:{selectableRange:function(){return"00:00:00 - 23:59:59"}(),disabledDate:function(e){return e.getTime()<Date.now()-864e5}},contactsData:[],rules:{mode:[{required:!0,message:"请选择跟进方式",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"}],result:[{required:!0,message:"请输入跟进结果",trigger:"blur"}]},followUp:{utype:0,type:"",contacts:"",link_man:"",link_mobile:"",mode:"",next_time:"",result:"",enclosure:[]},visitStatusList:[{label:"当面拜访",value:"1"},{label:"电话拜访",value:"2"},{label:"网络拜访",value:"3"},{label:"其它拜访",value:"0"}],addParams:{id:"",result:""},addListId:"",record:[],total:0,upload_url:"",headerObj:"",currentNav:"",clue_ids:0,user_id:0}},watch:{contacts:function(e){this.followUp.link_man=e},mobile:function(e){this.followUp.link_mobile=e},uid:function(e){"allClient"==this.currentNav&&"myClient"==this.currentNav&&"pubilceClient"==this.currentNav||(this.contactList(e),this.followUpList(e)),this.user_id=e},clue_id:function(e){this.clue_ids=e}},created:function(){this.currentNav=this.$route.name,"wholeClue"!=this.currentNav&&"wholeInternationalWaters"!=this.currentNav&&"allClient"!=this.currentNav&&"pubilceClient"!=this.currentNav||(this.disabled_state=!0),"wholeClue"==this.currentNav||"wholeMy"==this.currentNav||"wholeInternationalWaters"==this.currentNav?(this.followUpList(),this.followUp.type=1):(this.followUp.type=2,this.followUp.utype=1),this.upload_url=window.global.RequestBaseUrl+"/upload/index",this.headerObj={admintoken:Object(r["e"])()}},methods:{handlePageSize:function(e){this.listParams.page_size=e,this.followUpList()},handleCurrentSize:function(e){this.listParams.page=e,this.followUpList()},contactsClick:function(e){var t=e.name.split(" | ");this.followUp.link_man=t[0],this.followUp.link_mobile=t[1]},contactList:function(e){var t=this;Object(n["w"])({uid:e}).then((function(e){if(e.data.length>0)for(var i=0;i<=e.data.length-1;i++)t.contactsData.push({name:e.data[i].contact+" | "+e.data[i].mobile,value:e.data[i].id})})).catch((function(){}))},followUpList:function(e){var t=this,i="";i="allClient"==this.currentNav||"myClient"==this.currentNav||"pubilceClient"==this.currentNav?0!=this.clue_id?{clue_id:this.clue_ids,uid:e,page:this.listParams.page,pagesize:this.listParams.page_size}:{uid:e,page:this.listParams.page,pagesize:this.listParams.page_size}:{clue_id:this.clue_id,page:this.listParams.page,pagesize:this.listParams.page_size},this.loading=!0,Object(n["J"])(i).then((function(e){if(e.data.items.length>0){t.record=e.data.items;for(var i=0;i<=t.record.length-1;i++)t.record[i].enclosure=t.record[i].enclosure.split(",");t.total=e.data.pages.record_num,t.listParams.total=e.data.pages.record_num,t.listParams.page=e.data.pages.now_page}t.loading=!1})).catch((function(){t.loading=!1}))},conserveVisitLog:function(e){var t=this;if(!0===this.submitLoading)return!1;this.submitLoading=!0;var i=Object(l["a"])({},this.followUp);this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;"allClient"==t.currentNav||"myClient"==t.currentNav||"pubilceClient"==t.currentNav?(i.clue_id=t.clue_ids,i.uid=t.user_id):i.clue_id=t.clue_id,""!=i.enclosure?i.enclosure=i.enclosure.join(","):i.enclosure="",i.next_time=new Date(i.next_time).getTime()/1e3,Object(n["c"])(i).then((function(e){200==e.code?(t.$message.success(e.message),"allClient"==t.currentNav||"myClient"==t.currentNav||"pubilceClient"==t.currentNav?(t.followUpList(t.user_id),t.$emit("companyDetails")):(t.followUpList(),t.$emit("clueDetails"))):t.$message.error(e.message),t.followUp.mode="",t.followUp.next_time="",t.followUp.result="",t.followUp.enclosure=[],t.$refs.uploadFile.clearFiles(),t.submitLoading=!1})).catch((function(){t.submitLoading=!1}))}))},handleAvatarSuccess:function(e,t){URL.createObjectURL(t.raw),e.data&&this.followUp.enclosure.push(e.data.file_url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,i="image/png"===e.type,a=e.size/1024/1024<2;return this.followUp.enclosure.length>=6?(this.$message.error("图片最多可以上传6张"),!1):(t||i||this.$message.error("上传图片只能是 JPG / PNG 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),t&&a||i)},removeImg:function(e,t){for(var i=this.followUp.enclosure,a=0;a<=i.length-1;a++)i[a]==e.response.data.file_url&&this.$delete(i,a);this.followUp.enclosure=i}}},c=o,d=(i("7f45"),i("2877")),u=Object(d["a"])(c,a,s,!1,null,"7ced14a6",null);t["a"]=u.exports},"2d0b":function(e,t,i){"use strict";i("5396")},"2de5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAMCAYAAAC9QufkAAAAvklEQVQokYWRMQoCMRBFX8TSwgvsFazsdHuvoIV29tp4AxGEbcVym20FO7FcEW0srF3FO9hHAgnENTv7IJBh8mfC/0prjWE0mTeADdAHTsAqS5MXAmo4nrnuFph6Tz9AB6gcYLblgHbC9XJB3Ouaawt42l7o5M3ytN3+yKN4S791KCOObREB9/Pl1rb1ARiIameYNS2yw65ZmhS1q31xmboEfLdDiAn4boeOlMC/2yEqEvhxO4SYgGiYoTIB4Atfl1UFq1kTBwAAAABJRU5ErkJggg=="},"37fe":function(e,t,i){},"39a0":function(e,t,i){"use strict";i.r(t),i.d(t,"export_table_to_excel",(function(){return o})),i.d(t,"export_json_to_excel",(function(){return c}));i("d3b7"),i("c19f"),i("ace4"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7");function a(e){for(var t=[],i=e.querySelectorAll("tr"),a=[],s=0;s<i.length;++s){for(var l=[],n=i[s],r=n.querySelectorAll("td"),o=0;o<r.length;++o){var c=r[o],d=c.getAttribute("colspan"),u=c.getAttribute("rowspan"),f=c.innerText;if(""!==f&&f==+f&&(f=+f),a.forEach((function(e){if(s>=e.s.r&&s<=e.e.r&&l.length>=e.s.c&&l.length<=e.e.c)for(var t=0;t<=e.e.c-e.s.c;++t)l.push(null)})),(u||d)&&(u=u||1,d=d||1,a.push({s:{r:s,c:l.length},e:{r:s+u-1,c:l.length+d-1}})),l.push(""!==f?f:null),d)for(var p=0;p<d-1;++p)l.push(null)}t.push(l)}return[t,a]}function s(e,t){t&&(e+=1462);var i=Date.parse(e);return(i-new Date(Date.UTC(1899,11,30)))/864e5}function l(e,t){for(var i={},a={s:{c:1e7,r:1e7},e:{c:0,r:0}},l=0;l!=e.length;++l)for(var n=0;n!=e[l].length;++n){a.s.r>l&&(a.s.r=l),a.s.c>n&&(a.s.c=n),a.e.r<l&&(a.e.r=l),a.e.c<n&&(a.e.c=n);var r={v:e[l][n]};if(null!=r.v){var o=XLSX.utils.encode_cell({c:n,r:l});"number"===typeof r.v?r.t="n":"boolean"===typeof r.v?r.t="b":r.v instanceof Date?(r.t="n",r.z=XLSX.SSF._table[14],r.v=s(r.v)):r.t="s",i[o]=r}}return a.s.c<1e7&&(i["!ref"]=XLSX.utils.encode_range(a)),i}function n(){if(!(this instanceof n))return new n;this.SheetNames=[],this.Sheets={}}function r(e){for(var t=new ArrayBuffer(e.length),i=new Uint8Array(t),a=0;a!=e.length;++a)i[a]=255&e.charCodeAt(a);return t}function o(e){var t=document.getElementById(e);console.log("a");var i=a(t),s=i[1],o=i[0],c="SheetJS";console.log(o);var d=new n,u=l(o);u["!merges"]=s,d.SheetNames.push(c),d.Sheets[c]=u;var f=XLSX.write(d,{bookType:"xlsx",bookSST:!1,type:"binary"});saveAs(new Blob([r(f)],{type:"application/octet-stream"}),"test.xlsx")}function c(e,t,i){var a=t;a.unshift(e);var s="SheetJS",o=new n,c=l(a);o.SheetNames.push(s),o.Sheets[s]=c;var d=XLSX.write(o,{bookType:"xlsx",bookSST:!1,type:"binary"}),u=i||"列表";saveAs(new Blob([r(d)],{type:"application/octet-stream"}),u+".xlsx")}i("0fd4"),i("df1a"),i("1447")},"3a0f":function(e,t,i){"use strict";i("37fe")},5396:function(e,t,i){},"5ab5":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAMCAYAAAC9QufkAAAAcElEQVQokWP4//8/DDP9//9/5v///69CaUUkOawYWRCkARl8JmQAiDj8nzxwmImBfMCI7AzZ////v0dyww5CfmYEux0BZBkYGGwZGBhOMjAw3CXoJgKm440BQprxxsDgCG1sGG8MoIc2NoA9BhgYGACzIKLIwi8QQAAAAABJRU5ErkJggg=="},6797:function(e,t,i){},"730b":function(e,t,i){},"7f45":function(e,t,i){"use strict";i("6797")},beb9:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.title))])]),a("div",{staticStyle:{float:"right","z-index":"1",position:"relative"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.reset("all")}}},[e._v(" 重置筛选 ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.goto("/user/company/crm/wholeAdd")}}},[e._v(" 新增线索 ")])],1),a("div",{staticClass:"list-search"},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"440px"},attrs:{placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.funSearchKeyword.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[a("el-select",{staticClass:"input-sel",attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.key_type,callback:function(t){e.key_type=t},expression:"key_type"}},[a("el-option",{attrs:{label:"线索名称",value:"1"}}),a("el-option",{attrs:{label:"手机号码",value:"2"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.funSearchKeyword},slot:"append"})],1)],1),a("div",{staticStyle:{position:"relative"}},[a("div",{staticClass:"setField"},[a("el-popover",{attrs:{placement:"bottom-start",width:"220",trigger:"manual"},model:{value:e.visiblepop,callback:function(t){e.visiblepop=t},expression:"visiblepop"}},[a("div",{staticClass:"setField_h"},e._l(e.fieldData,(function(t){return a("div",{staticClass:"setFields"},[1==t.select?a("input",{attrs:{type:"checkbox",name:t.name,checked:""},domProps:{value:t.field},on:{change:function(i){return e.select(t.field)}}}):e._e(),0==t.select?a("input",{attrs:{type:"checkbox",name:t.name},domProps:{value:t.field},on:{change:function(i){return e.select(t.field)}}}):e._e(),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name))])])})),0),a("el-button",{class:"menu"==e.menu_icon?"field_s":"field_s_select",attrs:{slot:"reference"},on:{click:e.menu},slot:"reference"},["menu"==e.menu_icon?a("img",{attrs:{src:i("2de5"),alt:""}}):e._e(),"menu_select"==e.menu_icon?a("img",{attrs:{src:i("5ab5"),alt:""}}):e._e()]),a("div",{staticStyle:{"margin-top":"10px","margin-right":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.setFieldClose()}}},[e._v("关闭")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.setFieldConfirm()}}},[e._v("确认")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark","header-cell-style":{background:"#f9f9f9","border-right":"1px solid #e4e6eb"},border:"",stripe:""},on:{"sort-change":e.sortTable,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"55"}}),e._l(e.fieldData,(function(t){return 1==t.is_locking&&1==t.select?a("el-table-column",{attrs:{fixed:"",sortable:t.is_sortable,prop:t.field,width:t.width},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{class:"custom"==t.is_sortable?"sotrTime":"",on:{mouseenter:function(i){return e.locks(t.field)},mouseleave:function(i){return e.locks(t.field)}}},[a("span",[e._v(e._s(t.name))]),a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},["admin_username"==t.field?a("div",[a("el-checkbox-group",{staticStyle:{height:"250px"}},e._l(e.saleScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.saleScreen,callback:function(t){e.saleScreen=t},expression:"saleScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"trade"==t.field?a("div",[a("el-checkbox-group",e._l(e.industryScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.industryScreen,callback:function(t){e.industryScreen=t},expression:"industryScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"district"==t.field?a("div",[a("el-cascader-panel",{attrs:{props:e.props,clearable:"",options:e.regionScreenData},model:{value:e.regionScreen,callback:function(t){e.regionScreen=t},expression:"regionScreen"}})],1):e._e(),"creat_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.createdByScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.createdByScreen,callback:function(t){e.createdByScreen=t},expression:"createdByScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.reset(t.field)}}},[e._v("重置")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1),"admin_username"==t.field||"trade"==t.field||"district"==t.field||"creat_username"==t.field?a("div",{staticClass:"drop_down",attrs:{slot:"reference"},slot:"reference"}):e._e()]),1==t.is_lock_display?a("div",{staticClass:"unlock_display",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e(),0==t.is_lock_display?a("div",{staticClass:"unlock",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e()],1)]}},{key:"default",fn:function(i){return["id"==t.field?a("div",[""==i.row.id?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.id)+" ")])]):e._e(),"name"==t.field?a("div",[""==i.row.name?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.name)+" ")])]):e._e(),"admin_username"==t.field?a("div",[""==i.row.admin_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.admin_username)+" ")])]):e._e(),"contacts"==t.field?a("div",[""==i.row.contacts?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.contacts)+" ")])]):e._e(),"mobile"==t.field?a("div",[""==i.row.mobile?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.mobile)+" ")])]):e._e(),"weixin"==t.field?a("div",[""==i.row.weixin?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.weixin)+" ")])]):e._e(),"collection_time"==t.field?a("div",[""==i.row.collection_time?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.collection_time)+" ")])]):e._e(),"trade"==t.field?a("div",[""==i.row.trade?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.trade)+" ")])]):e._e(),"district"==t.field?a("div",[""==i.row.district?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.district)+" ")])]):e._e(),"address"==t.field?a("div",[""==i.row.address?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.address)+" ")])]):e._e(),"updatetime"==t.field?a("div",[""==i.row.updatetime?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.updatetime)+" ")])]):e._e(),"follow_count"==t.field?a("div",[""==i.row.follow_count?a("span",[e._v(" 0 ")]):a("span",[e._v(" "+e._s(i.row.follow_count)+" ")])]):e._e(),"creat_username"==t.field?a("div",[""==i.row.creat_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.creat_username)+" ")])]):e._e(),"remark"==t.field?a("div",[""==i.row.remark?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.remark)+" ")])]):e._e()]}}],null,!0)}):e._e()})),e._l(e.fieldData,(function(t){return 0==t.is_locking&&1==t.select?a("el-table-column",{attrs:{prop:t.field,sortable:t.is_sortable,width:t.width},scopedSlots:e._u([{key:"header",fn:function(i){return[a("div",{class:"custom"==t.is_sortable?"sotrTime":"",on:{mouseenter:function(i){return e.locks(t.field)},mouseleave:function(i){return e.locks(t.field)}}},[a("span",[e._v(e._s(t.name))]),a("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},["admin_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.saleScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.saleScreen,callback:function(t){e.saleScreen=t},expression:"saleScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"trade"==t.field?a("div",[a("el-checkbox-group",e._l(e.industryScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.industryScreen,callback:function(t){e.industryScreen=t},expression:"industryScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),"district"==t.field?a("div",[a("el-cascader-panel",{attrs:{props:e.props,clearable:"",options:e.regionScreenData},model:{value:e.regionScreen,callback:function(t){e.regionScreen=t},expression:"regionScreen"}})],1):e._e(),"creat_username"==t.field?a("div",[a("el-checkbox-group",e._l(e.createdByScreenData,(function(t){return a("div",{staticClass:"screenStyle"},[a("el-radio",{key:t.id,attrs:{label:t.id},model:{value:e.createdByScreen,callback:function(t){e.createdByScreen=t},expression:"createdByScreen"}},[e._v(e._s(t.name))])],1)})),0)],1):e._e(),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.reset(t.field)}}},[e._v("重置")]),a("el-button",{staticClass:"filterOperation",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirm()}}},[e._v("确认")])],1),"creat_username"==t.field||"admin_username"==t.field||"trade"==t.field||"district"==t.field?a("div",{staticClass:"drop_down",attrs:{slot:"reference"},slot:"reference"}):e._e()]),1==t.is_lock_display?a("div",{staticClass:"lock_display",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e(),0==t.is_lock_display?a("div",{staticClass:"lock",attrs:{slot:"reference"},on:{click:function(i){return e.locking(t.field)}},slot:"reference"}):e._e()],1)]}},{key:"default",fn:function(i){return["id"==t.field?a("div",[""==i.row.id?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.id)+" ")])]):e._e(),"name"==t.field?a("div",[""==i.row.name?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.name)+" ")])]):e._e(),"admin_username"==t.field?a("div",[""==i.row.admin_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.admin_username)+" ")])]):e._e(),"contacts"==t.field?a("div",[""==i.row.contacts?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.contacts)+" ")])]):e._e(),"mobile"==t.field?a("div",[""==i.row.mobile?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.mobile)+" ")])]):e._e(),"weixin"==t.field?a("div",[""==i.row.weixin?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.weixin)+" ")])]):e._e(),"collection_time"==t.field?a("div",[""==i.row.collection_time?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.collection_time)+" ")])]):e._e(),"trade"==t.field?a("div",[""==i.row.trade?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.trade)+" ")])]):e._e(),"district"==t.field?a("div",[""==i.row.district?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.district)+" ")])]):e._e(),"address"==t.field?a("div",[""==i.row.address?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.address)+" ")])]):e._e(),"updatetime"==t.field?a("div",[""==i.row.updatetime?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.updatetime)+" ")])]):e._e(),"follow_count"==t.field?a("div",[""==i.row.follow_count?a("span",[e._v(" 0 ")]):a("span",[e._v(" "+e._s(i.row.follow_count)+" ")])]):e._e(),"creat_username"==t.field?a("div",[""==i.row.creat_username?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.creat_username)+" ")])]):e._e(),"remark"==t.field?a("div",[""==i.row.remark?a("span",[e._v(" - ")]):a("span",[e._v(" "+e._s(i.row.remark)+" ")])]):e._e()]}}],null,!0)}):e._e()})),a("el-table-column",{attrs:{label:"操作",width:"140",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.see(t.row.id)}}},[e._v("查看")]),2==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.release(t.row.id)}}},[e._v("释放")]):e._e(),2==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.see(t.row.id)}}},[e._v("跟进")]):e._e(),1==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.funAuditBatch("single",t.row.id)}}},[e._v("领取")]):e._e(),1==e.list_type?a("el-button",{staticClass:"operation",attrs:{type:"text",size:"small"},on:{click:function(i){return e.wholeDel("single",t.row.id)}}},[e._v("删除")]):e._e()]}}])})],2)],1),a("div",{staticClass:"bortton-page"},[a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.choose}},[e._v(" 全选/反选 ")]),1==e.list_type?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.funAuditBatch("all")}}},[e._v(" 领取 ")]):e._e(),1==e.list_type?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.wholeDel("all")}}},[e._v(" 删除 ")]):e._e(),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.funExport}},[e._v(" 导出 ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-pagination",{attrs:{background:"","destroy-on-close":"","current-page":e.currentPage,"page-sizes":[10,15,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),e.drawer?a("el-drawer",{attrs:{size:"75%","show-close":!1,"with-header":!1,"wrapper-closable":!1,visible:e.drawer,"before-close":e.handleClose},on:{"update:visible":function(t){e.drawer=t}}},[a("show",{attrs:{"row-id":e.rowId}}),a("div",{staticClass:"close",on:{click:e.handleClose}},[a("i",{staticClass:"el-icon-close"})])],1):e._e()],1)},s=[],l=(i("b0c0"),i("4e82"),i("e9c4"),i("d81d"),i("d3b7"),i("159b"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"popup_box"},[i("div",{staticClass:"base"},[i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[i("div",{staticClass:"name"},[e._v(" "+e._s(e.details.name?e.details.name:"-")+" ")]),i("div",{staticClass:"user"},[e._v(" （"),i("span",[e._v("线索ID： "+e._s(e.details.id?e.details.id:"-")+"； ")]),i("span",{staticClass:"logoin",on:{click:e.conversion}},[e._v("转化为客户")]),e._v("） ")]),i("div",{staticClass:"users",staticStyle:{"margin-left":"30px"}},[e._v(" 转为客户将自动注册企业会员 ")])]),i("div",{staticClass:"details"},[i("el-row",{staticClass:"line"},[i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("所属销售：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.admin_username?e.details.admin_username:"-")+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("跟进记录：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.visit_count)+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("最后跟进：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.last_visit_time?e.details.last_visit_time:"-")+" ")])])],1),i("el-row",{staticClass:"line"},[i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("所在地区：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.district)+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("创建人：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.creat_username?e.details.creat_username:"-")+" ")])]),i("el-col",{attrs:{span:8}},[i("label",{staticClass:"line_label"},[e._v("创建时间：")]),i("span",{staticClass:"text"},[e._v(" "+e._s(e.details.createtime?e.details.createtime:"-")+" ")])])],1)],1)])]),i("div",{staticClass:"tab_box"},[i("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"跟进记录",name:"first"}},[i("followUpRecord",{attrs:{clue_id:e.rowId,contacts:e.details.contacts,mobile:e.details.mobile},on:{clueDetails:e.clueDetails}})],1),i("el-tab-pane",{attrs:{label:"线索详情",name:"second"}},["second"==e.activeName?i("clueDetailsEdit",{attrs:{clue_id:e.rowId,details:e.details},on:{clueDetails:e.clueDetails,conversion:e.conversion}}):e._e()],1)],1)],1)])])}),n=[],r=i("0e2b"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"box"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px",rules:e.rules}},[i("el-form-item",{attrs:{label:"线索名称：",prop:"name"}},[i("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),i("el-form-item",{attrs:{label:"联系人：",prop:"contacts"}},[i("el-input",{model:{value:e.form.contacts,callback:function(t){e.$set(e.form,"contacts",t)},expression:"form.contacts"}})],1),i("el-form-item",{attrs:{label:"联系手机：",prop:"mobile"}},[i("el-input",{attrs:{oninput:"value=value.replace(/[^0-9.]/g,'')"},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}})],1),i("el-form-item",{attrs:{label:"联系微信："}},[i("el-input",{model:{value:e.form.weixin,callback:function(t){e.$set(e.form,"weixin",t)},expression:"form.weixin"}})],1),i("el-form-item",{attrs:{label:"公司规模："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.scale,callback:function(t){e.$set(e.form,"scale",t)},expression:"form.scale"}},e._l(e.scaleData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"所属行业："}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.trade,callback:function(t){e.$set(e.form,"trade",t)},expression:"form.trade"}},e._l(e.industryScreenData,(function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),i("el-form-item",{attrs:{label:"所在地区",prop:"citycategory_arr"}},[i("el-cascader",{attrs:{options:e.options_citycategory,"show-all-levels":!1},model:{value:e.form.district,callback:function(t){e.$set(e.form,"district",t)},expression:"form.district"}})],1),i("el-form-item",{attrs:{label:"详细地址："}},[i("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),i("el-form-item",{attrs:{label:"备注："}},[i("el-input",{staticStyle:{width:"558px"},attrs:{rows:3,type:"textarea"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1),i("el-form-item",{staticClass:"e_button"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("form")}}},[e._v("保存")]),i("el-button",{attrs:{type:"primary"},on:{click:e.conversion}},[e._v("转化为客户")])],1)],1)],1)])},c=[],d=i("5530"),u=i("2909"),f=i("39f6"),p=i("61f7"),m={name:"ClueDetails",props:["clue_id","details"],data:function(){var e=this,t=function(e,t,i){Object(p["c"])(t)?i():i(new Error("请输入正确的手机号"))},i=function(t,i,a){var s={name:i,id:e.clue_id};Object(f["N"])(s).then((function(e){0==e.data.sys_configs&&e.data.clue_count>0?a(new Error("线索名称已重复")):a()}))};return{rules:{name:[{required:!0,message:"请输入线索名称",trigger:"blur"},{max:20,message:"长度在 0 到 20 个字符",trigger:"blur"},{validator:i,trigger:"blur"}],contacts:[{required:!0,message:"请输入联系人",trigger:"blur"},{max:6,message:"长度在 0 到 6 个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入联系电话",trigger:"blur"},{validator:t,trigger:"blur"}]},form:{name:"",contacts:"",mobile:"",weixin:"",scale:"",industry:"",region:"",address:"",trade:"",remark:"",district:[]},submitLoading:!1,scaleData:[],options_citycategory:[],industryScreenData:[]}},created:function(){this.form.name=this.details.name,this.form.contacts=this.details.contacts,this.form.mobile=this.details.mobile,this.form.weixin=this.details.weixin,this.form.scale=this.details.scale,this.form.district=this.details.citycategory_arr,this.form.trade=this.details.trade,this.form.address=this.details.address,this.form.remark=this.details.remark,this.classify()},methods:{classify:function(){var e=this;Object(f["d"])({type:"citycategory,trade,companyScale"}).then((function(t){e.options_citycategory=Object(u["a"])(t.data.citycategory),e.options_citycategory=e.options_citycategory.map((function(e){if(e.children.length){var t=e.children;return t=t.map((function(e){return e.children.length?{label:e.label,value:e.value,children:e.children}:{label:e.label,value:e.value}})),{value:e.value,label:e.label,children:t}}return{value:e.value,label:e.label}})),e.industryScreenData=t.data.trade,e.scaleData=t.data.companyScale})).catch((function(){}))},conversion:function(){this.$emit("conversion")},onSubmit:function(e){var t=this;if(!0===this.submitLoading)return!1;this.submitLoading=!0;var i=this,a=Object(d["a"])({},this.form);a.clue_id=this.clue_id,0==a.district.length&&(a.district1=0,a.district2=0,a.district3=0,a.district=0),1==a.district.length&&(a.district1=a.district[0],a.district=a.district[0],a.district2=0,a.district3=0),2==a.district.length&&(a.district1=a.district[0],a.district2=a.district[1],a.district3=0,a.district=a.district[1]),3==a.district.length&&(a.district1=a.district[0],a.district2=a.district[1],a.district3=a.district[2],a.district=a.district[2]),this.$refs[e].validate((function(e){if(!e)return t.submitLoading=!1,!1;Object(f["i"])(a).then((function(e){200==e.code?(t.$message.success(e.message),t.$emit("clueDetails")):t.$message.error(e.message),i.submitLoading=!1})).catch((function(){i.submitLoading=!1}))}))}}},_=m,h=(i("2d0b"),i("2877")),v=Object(h["a"])(_,o,c,!1,null,"37ee597f",null),b=v.exports,g={name:"Show",components:{clueDetailsEdit:b,followUpRecord:r["a"]},props:{rowId:{default:""}},data:function(){return{details:[],activeName:"first",loading:!1}},created:function(){this.clueDetails()},methods:{conversion:function(){this.$router.push("/user/company/add?id="+this.details.id)},clueDetails:function(){var e=this;this.loading=!0,Object(f["h"])({clue_id:this.rowId}).then((function(t){e.details=t.data;var i=[];0!=t.data.district1&&i.push(t.data.district1),0!=t.data.district2&&i.push(t.data.district2),0!=t.data.district3&&i.push(t.data.district3),e.details.citycategory_arr=i,e.details.citycategory_arr=i,e.loading=!1})).catch((function(){}))}}},y=g,w=(i("f602"),Object(h["a"])(y,l,n,!1,null,"d1282a80",null)),k=w.exports,x=i("39a0"),S={name:"Whole",components:{show:k},data:function(){return{key_type:"1",loading:!1,props:{multiple:!1,checkStrictly:!0},visiblepop:!1,menu_icon:"menu",keyword:"",drawer:!1,fieldData:[],createdByScreen:"",createdByScreenData:[],regionScreen:"",regionScreenData:[],industryScreen:"",industryScreenData:[],saleScreen:"",saleScreenData:[],pagesize:10,total:0,currentPage:1,saleKey:[{text:"aa",value:"aa"},{text:"bb",value:"bb"},{text:"cc",value:"cc"},{text:"dd",value:"dd"}],multipleSelection:[],exportData:[],tableData:[],title:"",currentNav:"",list_type:0,rowId:0,draggableOption:{sort:!1,scroll:!0,disabled:!0},export_field:[],export_name:[],sort_type:"",sort:""}},computed:{clueTime:function(){var e=this.$route.query.time;return e}},watch:{clueTime:function(){var e=localStorage.getItem("clue_type"),t=localStorage.getItem("clue_id");""!=e&&"follow"==e&&(this.drawer=!0,this.rowId=t,localStorage.setItem("clue_type",""),localStorage.setItem("clue_id",""))}},mounted:function(){},created:function(){this.currentNav=this.$route.name,"wholeClue"==this.currentNav?(this.title="全部线索",this.list_type=0):"wholeMy"==this.currentNav?(this.title="我的线索",this.list_type=2):"wholeInternationalWaters"==this.currentNav&&(this.title="线索公海",this.list_type=1),this.clueList(),this.crmCustomList(),this.clueAdminLists(),this.classify();var e=localStorage.getItem("clue_type"),t=localStorage.getItem("clue_id");""!=e&&"follow"==e&&(this.drawer=!0,this.rowId=t,localStorage.setItem("clue_type",""),localStorage.setItem("clue_id",""))},methods:{sortTable:function(e){var t=e.column,i=e.order;this.sortType="ascending"==i?"asc":"descending"==i?"desc":"",this.sort_type=t.property,this.sort=this.sortType,this.clueList()},classify:function(){var e=this;Object(f["d"])({type:"citycategory,trade,companyScale"}).then((function(t){e.regionScreenData=t.data.citycategory,e.industryScreenData=t.data.trade})).catch((function(){}))},clueAdminLists:function(){var e=this;Object(f["f"])().then((function(t){e.saleScreenData=t.data,e.createdByScreenData=t.data})).catch((function(){}))},clueList:function(){var e=this;this.loading=!0,Object(f["j"])({page:this.currentPage,pagesize:this.pagesize,list_type:this.list_type,key_type:this.key_type,keyword:this.keyword,trade:this.industryScreen,district:this.regionScreen,creat_id:this.createdByScreen,admin_id:this.saleScreen,sort_type:this.sort_type,sort:this.sort}).then((function(t){e.tableData=t.data.items,e.total=t.data.total,e.currentPage=t.data.current_page,e.loading=!1})).catch((function(){e.loading=!1}))},setFieldClose:function(){this.menu_icon="menu",this.visiblepop=!1},setFieldConfirm:function(){var e=this,t=this.list_type,i=0;0==t&&(i=1),1==t&&(i=2),2==t&&(i=3),Object(f["A"])({menu:i,type:1,value:JSON.stringify(this.fieldData)},"post").then((function(t){200==t.code?e.$message.success(t.message):e.$message.error(t.message)})).catch((function(){}))},crmCustomList:function(){var e=this,t=this.list_type,i=0;0==t&&(i=1),1==t&&(i=2),2==t&&(i=3),Object(f["z"])({menu:i,type:1}).then((function(t){e.fieldData=JSON.parse(t.data);for(var i=0;i<=e.fieldData.length-1;i++)"collection_time"==e.fieldData[i].field?e.fieldData[i].is_sortable="custom":e.fieldData[i].is_sortable=!1,e.export_name.push(e.fieldData[i].name),e.export_field.push(e.fieldData[i].field)})).catch((function(){}))},locking:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].is_locking?(this.fieldData[t].is_locking=!1,this.fieldData[t].is_lock_display=!1,this.fieldData[t].icon="el-icon-lock"):(this.fieldData[t].icon="el-icon-unlock",this.fieldData[t].is_locking=!0,this.fieldData[t].is_lock_display=!1));this.setFieldConfirm()},select:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].select?this.fieldData[t].select=!1:this.fieldData[t].select=!0)},menu:function(){"menu"==this.menu_icon?(this.visiblepop=!0,this.menu_icon="menu_select"):(this.visiblepop=!1,this.menu_icon="menu")},confirm:function(){this.clueList()},see:function(e){this.drawer=!0,this.rowId=e},handleClose:function(){this.clueList(),this.drawer=!1},handleSizeChange:function(e){this.pagesize=e,this.clueList()},handleCurrentChange:function(e){this.currentPage=e,this.clueList()},release:function(e){var t=this;this.$confirm("您确认释放该线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(f["l"])({clue_id:e}).then((function(e){200==e.code?t.$message.success(e.message):t.$message.error(e.message),t.clueList()}))})).catch((function(){}))},funAuditBatch:function(e,t){var i=this;if("all"==e){var a=this;if(0==a.multipleSelection.length)return a.$message.error("请选择要领取的线索"),!1;var s=a.multipleSelection}else s=t;this.$confirm("您确认要领取此线索？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(f["k"])({clue_id:s}).then((function(e){200==e.code?i.$message.success(e.message):i.$message.error(e.message),i.clueList()}))})).catch((function(){}))},wholeDel:function(e,t){var i=this;if("all"==e){var a=this;if(0==a.multipleSelection.length)return a.$message.error("请选择要删除的线索"),!1;var s=a.multipleSelection}else s=t;this.$confirm("您确认要删除此线索?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(f["g"])({clue_id:s}).then((function(e){200==e.code?i.$message.success(e.message):i.$message.error(e.message),i.clueList()}))})).catch((function(){}))},funExport:function(){var e=this;if(0==e.multipleSelection.length)return e.$message.error("请选择要导出的线索"),!1;e.exportExcel(this.exportData)},exportExcel:function(e){var t=this;Promise.resolve().then(function(){var a=i("39a0"),s=(a.export_json_to_excel,t.export_name),l=t.export_field,n=t.formatJson(l,e);Object(x["export_json_to_excel"])(s,n,"线索导出")}.bind(null,i)).catch(i.oe)},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},funSearchKeyword:function(){this.clueList()},goto:function(e){this.$router.push(e)},locks:function(e){for(var t=0;t<=this.fieldData.length-1;t++)this.fieldData[t].field==e&&(1==this.fieldData[t].is_lock_display?this.fieldData[t].is_lock_display=!1:this.fieldData[t].is_lock_display=!0)},choose:function(){var e=this;this.tableData.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)}))},handleSelectionChange:function(e){var t=[];e.forEach((function(e){t.push(e.id)})),this.exportData=e,this.multipleSelection=t},reset:function(e){"all"==e&&(this.saleScreen=[],this.industryScreen=[],this.regionScreen=[],this.createdByScreen=[],this.key_type="1",this.keyword=""),"admin_username"==e&&(this.saleScreen=[]),"trade"==e&&(this.industryScreen=[]),"district"==e&&(this.regionScreen=[]),"creat_username"==e&&(this.createdByScreen=[]),this.clueList()}}},C=S,D=(i("3a0f"),Object(h["a"])(C,a,s,!1,null,"3daa74e5",null));t["default"]=D.exports},df1a:function(e,t,i){i("ac1f"),i("466d"),i("d3b7"),i("b0c0"),i("1276"),i("a15b"),i("25f0"),i("fb6a"),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(i){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},i=function(){this.data=[]},a=function(e,t,i){this.data=e,this.size=e.length,this.type=t,this.encoding=i},s=i.prototype,l=a.prototype,n=e.FileReaderSync,r=function(e){this.code=this[this.name=e]},o="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),c=o.length,d=e.URL||e.webkitURL||e,u=d.createObjectURL,f=d.revokeObjectURL,p=d,m=e.btoa,_=e.atob,h=e.ArrayBuffer,v=e.Uint8Array;a.fake=l.fake=!0;while(c--)r.prototype[o[c]]=c+1;return d.createObjectURL||(p=e.URL={}),p.createObjectURL=function(e){var t,i=e.type;return null===i&&(i="application/octet-stream"),e instanceof a?(t="data:"+i,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):m?t+";base64,"+m(e.data):t+","+encodeURIComponent(e.data)):u?u.call(d,e):void 0},p.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&f&&f.call(d,e)},s.append=function(e){var i=this.data;if(v&&(e instanceof h||e instanceof v)){for(var s="",l=new v(e),o=0,c=l.length;o<c;o++)s+=String.fromCharCode(l[o]);i.push(s)}else if("Blob"===t(e)||"File"===t(e)){if(!n)throw new r("NOT_READABLE_ERR");var d=new n;i.push(d.readAsBinaryString(e))}else e instanceof a?"base64"===e.encoding&&_?i.push(_(e.data)):"URI"===e.encoding?i.push(decodeURIComponent(e.data)):"raw"===e.encoding&&i.push(e.data):("string"!==typeof e&&(e+=""),i.push(unescape(encodeURIComponent(e))))},s.getBlob=function(e){return arguments.length||(e=null),new a(this.data.join(""),e,"raw")},s.toString=function(){return"[object BlobBuilder]"},l.slice=function(e,t,i){var s=arguments.length;return s<3&&(i=null),new a(this.data.slice(e,s>1?t:this.data.length),i,this.encoding)},l.toString=function(){return"[object Blob]"},l.close=function(){this.size=this.data.length=0},i}(e);e.Blob=function(e,i){var a=i&&i.type||"",s=new t;if(e)for(var l=0,n=e.length;l<n;l++)s.append(e[l]);return s.getBlob(a)}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this)},f602:function(e,t,i){"use strict";i("730b")}}]);