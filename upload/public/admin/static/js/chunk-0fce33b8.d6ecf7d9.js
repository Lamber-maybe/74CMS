(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fce33b8"],{1787:function(t,e,a){"use strict";a("e781")},"50fc3":function(t,e,a){"use strict";a.d(e,"l",(function(){return l})),a.d(e,"i",(function(){return r})),a.d(e,"k",(function(){return s})),a.d(e,"j",(function(){return o})),a.d(e,"m",(function(){return c})),a.d(e,"g",(function(){return d})),a.d(e,"a",(function(){return u})),a.d(e,"b",(function(){return f})),a.d(e,"c",(function(){return p})),a.d(e,"e",(function(){return h})),a.d(e,"o",(function(){return m})),a.d(e,"f",(function(){return b})),a.d(e,"d",(function(){return g})),a.d(e,"h",(function(){return v})),a.d(e,"n",(function(){return y}));var n=a("b775"),i=a("d722");function l(t){return Object(n["a"])({url:i["a"].adminList,method:"get",params:t})}function r(t){return Object(n["a"])({url:i["a"].adminAdd,method:"post",data:t})}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post";return"post"==e?Object(n["a"])({url:i["a"].adminEdit,method:e,data:t}):Object(n["a"])({url:i["a"].adminEdit,method:e,params:t})}function o(t){return Object(n["a"])({url:i["a"].adminDelete,method:"post",data:t})}function c(t){return Object(n["a"])({url:i["a"].adminRoleOptions,method:"get",params:t})}function d(t){return Object(n["a"])({url:i["a"].adminLogList,method:"get",params:t})}function u(t){return Object(n["a"])({url:i["a"].adminAllList,method:"get",params:t})}function f(t){return Object(n["a"])({url:i["a"].adminBindQrcode,method:"get",params:t})}function p(t){return Object(n["a"])({url:i["a"].adminBindQrcodeCancel,method:"post",data:t})}function h(t){return Object(n["a"])({url:i["a"].adminIsBindWechat,method:"post",data:t})}function m(t){return Object(n["a"])({url:i["a"].getAdminCrmData,method:"post",data:t})}function b(t){return Object(n["a"])({url:i["a"].adminLock,method:"post",data:t})}function g(t){return Object(n["a"])({url:i["a"].adminDeblocking,method:"post",data:t})}function v(t){return Object(n["a"])({url:i["a"].adminLogTypeAll,method:"post",data:t})}function y(t){return Object(n["a"])({url:i["a"].delAdminLog,method:"post",data:t})}},a628:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"position",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("管理员日志")]),a("div",{staticClass:"topRight"},[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:t.delLogVisible}},[t._v("清理日志")])],1)]),a("div",{staticClass:"list-search clearfix"},[a("div",{staticClass:"filter-item"},[a("span",{staticClass:"label"},[t._v("管理员：")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:t.funSearch},model:{value:t.admin_id,callback:function(e){t.admin_id=e},expression:"admin_id"}},[a("el-option",{attrs:{label:"全部",value:""}},[t._v("全部")]),t._l(t.adminlist,(function(e,n){return a("el-option",{key:n,attrs:{label:e.username,value:e.id}},[t._v(t._s(e.username))])}))],2)],1),a("div",{staticClass:"filter-item"},[a("span",{staticClass:"label"},[t._v("操作类型：")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},on:{change:t.funSearch},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-option",{attrs:{label:"全部",value:""}},[t._v("全部")]),t._l(t.typeList,(function(e,n){return a("el-option",{key:n,attrs:{label:e,value:n}},[t._v(t._s(e))])}))],2)],1),a("div",{staticClass:"filter-item"},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"200px"},attrs:{placeholder:"请输入搜索内容",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchData(!0)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetchData(!0)}},slot:"append"})],1)],1)]),a("div",{staticClass:"spaceline"}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,"element-loading-text":"Loading",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"时间",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("timeFilter")(e.row.addtime)))])]}}])}),a("el-table-column",{attrs:{label:"操作",prop:"content"}}),a("el-table-column",{attrs:{label:"类型",prop:"type_name",width:"100"}}),a("el-table-column",{attrs:{label:"管理员",prop:"admin_name",width:"100"}}),a("el-table-column",{attrs:{label:"IP",prop:"ip",width:"150"}}),a("el-table-column",{attrs:{label:"IP归属地",prop:"ip_addr",width:"120"}})],1),a("div",{staticClass:"spaceline"}),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}}),a("el-col",{staticStyle:{"text-align":"right"},attrs:{offset:8,span:16}},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"清理日志",visible:t.delVisible,width:"30%"},on:{"update:visible":function(e){t.delVisible=e}}},[a("el-form",{staticClass:"common-form",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"时间段"}},[a("el-radio-group",{model:{value:t.delDays,callback:function(e){t.delDays=e},expression:"delDays"}},[a("el-radio",{attrs:{label:1}},[t._v("一个月前")]),a("el-radio",{attrs:{label:3}},[t._v("三个月前")]),a("el-radio",{attrs:{label:6}},[t._v("半年前")]),a("el-radio",{attrs:{label:12}},[t._v("一年前")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.delDisabled},on:{click:t.delAdminLog}},[t._v(" 确 定 ")])],1)],1)],1)},i=[],l=a("50fc3"),r=a("ed08"),s={filters:{timeFilter:function(t){return Object(r["b"])(t,"{y}-{m}-{d} {h}:{i}")}},data:function(){return{list:null,listLoading:!0,total:0,currentPage:1,pagesize:10,type:"",admin_id:"",keyword:"",adminlist:[],typeList:[],delVisible:!1,delDisabled:!1,delDays:0}},created:function(){this.fetchData()},methods:{funSearch:function(){this.currentPage=1,this.fetchData()},funSearchKeyword:function(){this.currentPage=1,this.fetchData()},fetchData:function(){var t=this;this.listLoading=!0,Object(l["a"])({}).then((function(e){t.adminlist=e.data})),Object(l["h"])({}).then((function(e){t.typeList=e.data}));var e={keyword:this.keyword,admin_id:this.admin_id,type:this.type,page:this.currentPage,pagesize:this.pagesize};Object(l["g"])(e).then((function(e){t.list=e.data.items,t.listLoading=!1,t.total=e.data.total,t.currentPage=e.data.current_page,t.pagesize=e.data.pagesize}))},handleSizeChange:function(t){this.pagesize=t,this.fetchData()},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},delLogVisible:function(){this.delVisible=!0},delAdminLog:function(){var t=this;if(0===this.delDays)return this.$message.error("请选择时间段"),!1;this.delDisabled=!0,this.$confirm("删除管理员日志后无法找回，是否确定删除","警告提示：",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["n"])({days:t.delDays}).then((function(e){return t.$message.success(e.message),t.delVisible=!1,t.delDisabled=!1,t.fetchData(),!0})).catch((function(){t.delDisabled=!1}))})).catch((function(){t.delDisabled=!1}))}}},o=s,c=(a("1787"),a("2877")),d=Object(c["a"])(o,n,i,!1,null,"af9bff7e",null);e["default"]=d.exports},e781:function(t,e,a){}}]);